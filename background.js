var background=function(){"use strict";var hm=Object.defineProperty;var gm=(fr,tr,fe)=>tr in fr?hm(fr,tr,{enumerable:!0,configurable:!0,writable:!0,value:fe}):fr[tr]=fe;var ne=(fr,tr,fe)=>gm(fr,typeof tr!="symbol"?tr+"":tr,fe);var bu,Tu,Su,Au;function fr(n){return n==null||typeof n=="function"?{main:n}:n}const fe=(Tu=(bu=globalThis.browser)==null?void 0:bu.runtime)!=null&&Tu.id?globalThis.browser:globalThis.chrome;var Ni=Object.prototype.hasOwnProperty;function Yn(n,t){var r,i;if(n===t)return!0;if(n&&t&&(r=n.constructor)===t.constructor){if(r===Date)return n.getTime()===t.getTime();if(r===RegExp)return n.toString()===t.toString();if(r===Array){if((i=n.length)===t.length)for(;i--&&Yn(n[i],t[i]););return i===-1}if(!r||typeof n=="object"){i=0;for(r in n)if(Ni.call(n,r)&&++i&&!Ni.call(t,r)||!(r in t)||!Yn(n[r],t[r]))return!1;return Object.keys(t).length===i}}return n!==n&&t!==t}const Gu=new Error("request for lock canceled");var Ku=function(n,t,r,i){function u(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function h(b){try{g(i.next(b))}catch(S){f(S)}}function w(b){try{g(i.throw(b))}catch(S){f(S)}}function g(b){b.done?c(b.value):u(b.value).then(h,w)}g((i=i.apply(n,t||[])).next())})};class Vu{constructor(t,r=Gu){this._value=t,this._cancelError=r,this._queue=[],this._weightedWaiters=[]}acquire(t=1,r=0){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);return new Promise((i,u)=>{const c={resolve:i,reject:u,weight:t,priority:r},f=Fi(this._queue,h=>r<=h.priority);f===-1&&t<=this._value?this._dispatchItem(c):this._queue.splice(f+1,0,c)})}runExclusive(t){return Ku(this,arguments,void 0,function*(r,i=1,u=0){const[c,f]=yield this.acquire(i,u);try{return yield r(c)}finally{f()}})}waitForUnlock(t=1,r=0){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);return this._couldLockImmediately(t,r)?Promise.resolve():new Promise(i=>{this._weightedWaiters[t-1]||(this._weightedWaiters[t-1]=[]),Xu(this._weightedWaiters[t-1],{resolve:i,priority:r})})}isLocked(){return this._value<=0}getValue(){return this._value}setValue(t){this._value=t,this._dispatchQueue()}release(t=1){if(t<=0)throw new Error(`invalid weight ${t}: must be positive`);this._value+=t,this._dispatchQueue()}cancel(){this._queue.forEach(t=>t.reject(this._cancelError)),this._queue=[]}_dispatchQueue(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()}_dispatchItem(t){const r=this._value;this._value-=t.weight,t.resolve([r,this._newReleaser(t.weight)])}_newReleaser(t){let r=!1;return()=>{r||(r=!0,this.release(t))}}_drainUnlockWaiters(){if(this._queue.length===0)for(let t=this._value;t>0;t--){const r=this._weightedWaiters[t-1];r&&(r.forEach(i=>i.resolve()),this._weightedWaiters[t-1]=[])}else{const t=this._queue[0].priority;for(let r=this._value;r>0;r--){const i=this._weightedWaiters[r-1];if(!i)continue;const u=i.findIndex(c=>c.priority<=t);(u===-1?i:i.splice(0,u)).forEach(c=>c.resolve())}}}_couldLockImmediately(t,r){return(this._queue.length===0||this._queue[0].priority<r)&&t<=this._value}}function Xu(n,t){const r=Fi(n,i=>t.priority<=i.priority);n.splice(r+1,0,t)}function Fi(n,t){for(let r=n.length-1;r>=0;r--)if(t(n[r]))return r;return-1}var Ju=function(n,t,r,i){function u(c){return c instanceof r?c:new r(function(f){f(c)})}return new(r||(r=Promise))(function(c,f){function h(b){try{g(i.next(b))}catch(S){f(S)}}function w(b){try{g(i.throw(b))}catch(S){f(S)}}function g(b){b.done?c(b.value):u(b.value).then(h,w)}g((i=i.apply(n,t||[])).next())})};class Zu{constructor(t){this._semaphore=new Vu(1,t)}acquire(){return Ju(this,arguments,void 0,function*(t=0){const[,r]=yield this._semaphore.acquire(1,t);return r})}runExclusive(t,r=0){return this._semaphore.runExclusive(()=>t(),1,r)}isLocked(){return this._semaphore.isLocked()}waitForUnlock(t=0){return this._semaphore.waitForUnlock(1,t)}release(){this._semaphore.isLocked()&&this._semaphore.release()}cancel(){return this._semaphore.cancel()}}const sn=((Au=(Su=globalThis.browser)==null?void 0:Su.runtime)==null?void 0:Au.id)==null?globalThis.chrome:globalThis.browser,qe=el();function el(){const n={local:on("local"),session:on("session"),sync:on("sync"),managed:on("managed")},t=x=>{const y=n[x];if(y==null){const m=Object.keys(n).join(", ");throw Error(`Invalid area "${x}". Options: ${m}`)}return y},r=x=>{const y=x.indexOf(":"),m=x.substring(0,y),C=x.substring(y+1);if(C==null)throw Error(`Storage key should be in the form of "area:key", but received "${x}"`);return{driverArea:m,driverKey:C,driver:t(m)}},i=x=>x+"$",u=(x,y)=>{const m={...x};return Object.entries(y).forEach(([C,E])=>{E==null?delete m[C]:m[C]=E}),m},c=(x,y)=>x??y??null,f=x=>typeof x=="object"&&!Array.isArray(x)?x:{},h=async(x,y,m)=>{const C=await x.getItem(y);return c(C,(m==null?void 0:m.fallback)??(m==null?void 0:m.defaultValue))},w=async(x,y)=>{const m=i(y),C=await x.getItem(m);return f(C)},g=async(x,y,m)=>{await x.setItem(y,m??null)},b=async(x,y,m)=>{const C=i(y),E=f(await x.getItem(C));await x.setItem(C,u(E,m))},S=async(x,y,m)=>{if(await x.removeItem(y),m!=null&&m.removeMeta){const C=i(y);await x.removeItem(C)}},T=async(x,y,m)=>{const C=i(y);if(m==null)await x.removeItem(C);else{const E=f(await x.getItem(C));[m].flat().forEach(R=>delete E[R]),await x.setItem(C,E)}},A=(x,y,m)=>x.watch(y,m);return{getItem:async(x,y)=>{const{driver:m,driverKey:C}=r(x);return await h(m,C,y)},getItems:async x=>{const y=new Map,m=new Map,C=[];x.forEach(R=>{let $,D;typeof R=="string"?$=R:"getValue"in R?($=R.key,D={fallback:R.fallback}):($=R.key,D=R.options),C.push($);const{driverArea:o,driverKey:U}=r($),j=y.get(o)??[];y.set(o,j.concat(U)),m.set($,D)});const E=new Map;return await Promise.all(Array.from(y.entries()).map(async([R,$])=>{(await n[R].getItems($)).forEach(o=>{const U=`${R}:${o.key}`,j=m.get(U),Y=c(o.value,(j==null?void 0:j.fallback)??(j==null?void 0:j.defaultValue));E.set(U,Y)})})),C.map(R=>({key:R,value:E.get(R)}))},getMeta:async x=>{const{driver:y,driverKey:m}=r(x);return await w(y,m)},getMetas:async x=>{const y=x.map(E=>{const R=typeof E=="string"?E:E.key,{driverArea:$,driverKey:D}=r(R);return{key:R,driverArea:$,driverKey:D,driverMetaKey:i(D)}}),m=y.reduce((E,R)=>{var $;return E[$=R.driverArea]??(E[$]=[]),E[R.driverArea].push(R),E},{}),C={};return await Promise.all(Object.entries(m).map(async([E,R])=>{const $=await sn.storage[E].get(R.map(D=>D.driverMetaKey));R.forEach(D=>{C[D.key]=$[D.driverMetaKey]??{}})})),y.map(E=>({key:E.key,meta:C[E.key]}))},setItem:async(x,y)=>{const{driver:m,driverKey:C}=r(x);await g(m,C,y)},setItems:async x=>{const y={};x.forEach(m=>{const{driverArea:C,driverKey:E}=r("key"in m?m.key:m.item.key);y[C]??(y[C]=[]),y[C].push({key:E,value:m.value})}),await Promise.all(Object.entries(y).map(async([m,C])=>{await t(m).setItems(C)}))},setMeta:async(x,y)=>{const{driver:m,driverKey:C}=r(x);await b(m,C,y)},setMetas:async x=>{const y={};x.forEach(m=>{const{driverArea:C,driverKey:E}=r("key"in m?m.key:m.item.key);y[C]??(y[C]=[]),y[C].push({key:E,properties:m.meta})}),await Promise.all(Object.entries(y).map(async([m,C])=>{const E=t(m),R=C.map(({key:U})=>i(U));console.log(m,R);const $=await E.getItems(R),D=Object.fromEntries($.map(({key:U,value:j})=>[U,f(j)])),o=C.map(({key:U,properties:j})=>{const Y=i(U);return{key:Y,value:u(D[Y]??{},j)}});await E.setItems(o)}))},removeItem:async(x,y)=>{const{driver:m,driverKey:C}=r(x);await S(m,C,y)},removeItems:async x=>{const y={};x.forEach(m=>{let C,E;typeof m=="string"?C=m:"getValue"in m?C=m.key:"item"in m?(C=m.item.key,E=m.options):(C=m.key,E=m.options);const{driverArea:R,driverKey:$}=r(C);y[R]??(y[R]=[]),y[R].push($),E!=null&&E.removeMeta&&y[R].push(i($))}),await Promise.all(Object.entries(y).map(async([m,C])=>{await t(m).removeItems(C)}))},removeMeta:async(x,y)=>{const{driver:m,driverKey:C}=r(x);await T(m,C,y)},snapshot:async(x,y)=>{var E;const C=await t(x).snapshot();return(E=y==null?void 0:y.excludeKeys)==null||E.forEach(R=>{delete C[R],delete C[i(R)]}),C},restoreSnapshot:async(x,y)=>{await t(x).restoreSnapshot(y)},watch:(x,y)=>{const{driver:m,driverKey:C}=r(x);return A(m,C,y)},unwatch(){Object.values(n).forEach(x=>{x.unwatch()})},defineItem:(x,y)=>{const{driver:m,driverKey:C}=r(x),{version:E=1,migrations:R={}}=y??{};if(E<1)throw Error("Storage item version cannot be less than 1. Initial versions should be set to 1, not 0.");const $=async()=>{var Z;const Y=i(C),[{value:O},{value:F}]=await m.getItems([C,Y]);if(O==null)return;const G=(F==null?void 0:F.v)??1;if(G>E)throw Error(`Version downgrade detected (v${G} -> v${E}) for "${x}"`);console.debug(`[@wxt-dev/storage] Running storage migration for ${x}: v${G} -> v${E}`);const K=Array.from({length:E-G},(ee,J)=>G+J+1);let H=O;for(const ee of K)try{H=await((Z=R==null?void 0:R[ee])==null?void 0:Z.call(R,H))??H}catch(J){throw Error(`v${ee} migration failed for "${x}"`,{cause:J})}await m.setItems([{key:C,value:H},{key:Y,value:{...F,v:E}}]),console.debug(`[@wxt-dev/storage] Storage migration completed for ${x} v${E}`,{migratedValue:H})},D=(y==null?void 0:y.migrations)==null?Promise.resolve():$().catch(Y=>{console.error(`[@wxt-dev/storage] Migration failed for ${x}`,Y)}),o=new Zu,U=()=>(y==null?void 0:y.fallback)??(y==null?void 0:y.defaultValue)??null,j=()=>o.runExclusive(async()=>{const Y=await m.getItem(C);if(Y!=null||(y==null?void 0:y.init)==null)return Y;const O=await y.init();return await m.setItem(C,O),O});return D.then(j),{key:x,get defaultValue(){return U()},get fallback(){return U()},getValue:async()=>(await D,y!=null&&y.init?await j():await h(m,C,y)),getMeta:async()=>(await D,await w(m,C)),setValue:async Y=>(await D,await g(m,C,Y)),setMeta:async Y=>(await D,await b(m,C,Y)),removeValue:async Y=>(await D,await S(m,C,Y)),removeMeta:async Y=>(await D,await T(m,C,Y)),watch:Y=>A(m,C,(O,F)=>Y(O??U(),F??U())),migrate:$}}}}function on(n){const t=()=>{if(sn.runtime==null)throw Error(["'wxt/storage' must be loaded in a web extension environment",`
 - If thrown during a build, see https://github.com/wxt-dev/wxt/issues/371`,` - If thrown during tests, mock 'wxt/browser' correctly. See https://wxt.dev/guide/go-further/testing.html
`].join(`
`));if(sn.storage==null)throw Error("You must add the 'storage' permission to your manifest to use 'wxt/storage'");const i=sn.storage[n];if(i==null)throw Error(`"browser.storage.${n}" is undefined`);return i},r=new Set;return{getItem:async i=>(await t().get(i))[i],getItems:async i=>{const u=await t().get(i);return i.map(c=>({key:c,value:u[c]??null}))},setItem:async(i,u)=>{u==null?await t().remove(i):await t().set({[i]:u})},setItems:async i=>{const u=i.reduce((c,{key:f,value:h})=>(c[f]=h,c),{});await t().set(u)},removeItem:async i=>{await t().remove(i)},removeItems:async i=>{await t().remove(i)},snapshot:async()=>await t().get(),restoreSnapshot:async i=>{await t().set(i)},watch(i,u){const c=f=>{const h=f[i];h!=null&&(Yn(h.newValue,h.oldValue)||u(h.newValue??null,h.oldValue??null))};return t().onChanged.addListener(c),r.add(c),()=>{t().onChanged.removeListener(c),r.delete(c)}},unwatch(){r.forEach(i=>{t().onChanged.removeListener(i)}),r.clear()}}}const Ui="local:pluginInstallConfig",tl=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(n=>[n.name,n]),rl=new Map(tl);class Qn extends Error{constructor(r){super(Qn._prepareSuperMessage(r));ne(this,"name","NonError")}static _prepareSuperMessage(r){try{return JSON.stringify(r)}catch{return String(r)}}}const nl=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],Gn=new WeakSet,al=n=>{Gn.add(n);const t=n.toJSON();return Gn.delete(n),t},Bi=n=>rl.get(n)??Error,Kn=({from:n,seen:t,to:r,forceEnumerable:i,maxDepth:u,depth:c,useToJSON:f,serialize:h})=>{if(!r)if(Array.isArray(n))r=[];else if(!h&&Hi(n)){const g=Bi(n.name);r=new g}else r={};if(t.push(n),c>=u)return r;if(f&&typeof n.toJSON=="function"&&!Gn.has(n))return al(n);const w=g=>Kn({from:g,seen:[...t],forceEnumerable:i,maxDepth:u,depth:c,useToJSON:f,serialize:h});for(const[g,b]of Object.entries(n)){if(b&&b instanceof Uint8Array&&b.constructor.name==="Buffer"){r[g]="[object Buffer]";continue}if(b!==null&&typeof b=="object"&&typeof b.pipe=="function"){r[g]="[object Stream]";continue}if(typeof b!="function"){if(!b||typeof b!="object"){try{r[g]=b}catch{}continue}if(!t.includes(n[g])){c++,r[g]=w(n[g]);continue}r[g]="[Circular]"}}for(const{property:g,enumerable:b}of nl)typeof n[g]<"u"&&n[g]!==null&&Object.defineProperty(r,g,{value:Hi(n[g])?w(n[g]):n[g],enumerable:i?!0:b,configurable:!0,writable:!0});return r};function il(n,t={}){const{maxDepth:r=Number.POSITIVE_INFINITY,useToJSON:i=!0}=t;return typeof n=="object"&&n!==null?Kn({from:n,seen:[],forceEnumerable:!0,maxDepth:r,depth:0,useToJSON:i,serialize:!0}):typeof n=="function"?`[Function: ${n.name||"anonymous"}]`:n}function sl(n,t={}){const{maxDepth:r=Number.POSITIVE_INFINITY}=t;if(n instanceof Error)return n;if(ol(n)){const i=Bi(n.name);return Kn({from:n,seen:[],to:new i,maxDepth:r,depth:0,serialize:!1})}return new Qn(n)}function Hi(n){return!!n&&typeof n=="object"&&"name"in n&&"message"in n&&"stack"in n}function ol(n){return!!n&&typeof n=="object"&&"message"in n&&!Array.isArray(n)}var ul=Object.defineProperty,ll=Object.defineProperties,cl=Object.getOwnPropertyDescriptors,Wi=Object.getOwnPropertySymbols,fl=Object.prototype.hasOwnProperty,dl=Object.prototype.propertyIsEnumerable,zi=(n,t,r)=>t in n?ul(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r,un=(n,t)=>{for(var r in t||(t={}))fl.call(t,r)&&zi(n,r,t[r]);if(Wi)for(var r of Wi(t))dl.call(t,r)&&zi(n,r,t[r]);return n},ln=(n,t)=>ll(n,cl(t)),Yi=(n,t,r)=>new Promise((i,u)=>{var c=w=>{try{h(r.next(w))}catch(g){u(g)}},f=w=>{try{h(r.throw(w))}catch(g){u(g)}},h=w=>w.done?i(w.value):Promise.resolve(w.value).then(c,f);h((r=r.apply(n,t)).next())});function Qi(n){let t,r={};function i(){Object.entries(r).length===0&&(t==null||t(),t=void 0)}let u=Math.floor(Math.random()*1e4);function c(){return u++}return{sendMessage(f,h,...w){return Yi(this,null,function*(){var g,b,S,T;const A={id:c(),type:f,data:h,timestamp:Date.now()},k=(b=yield(g=n.verifyMessageData)==null?void 0:g.call(n,A))!=null?b:A;(S=n.logger)==null||S.debug(`[messaging] sendMessage {id=${k.id}} ─ᐅ`,k,...w);const x=yield n.sendMessage(k,...w),{res:y,err:m}=x??{err:new Error("No response")};if((T=n.logger)==null||T.debug(`[messaging] sendMessage {id=${k.id}} ᐊ─`,{res:y,err:m}),m!=null)throw sl(m);return y})},onMessage(f,h){var w,g,b;if(t==null&&((w=n.logger)==null||w.debug(`[messaging] "${f}" initialized the message listener for this context`),t=n.addRootListener(S=>{var T,A;if(typeof S.type!="string"||typeof S.timestamp!="number"){if(n.breakError)return;const y=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(S)}`);throw(T=n.logger)==null||T.error(y),y}(A=n==null?void 0:n.logger)==null||A.debug("[messaging] Received message",S);const k=r[S.type];if(k==null)return;const x=k(S);return Promise.resolve(x).then(y=>{var m,C;return(C=(m=n.verifyMessageData)==null?void 0:m.call(n,y))!=null?C:y}).then(y=>{var m;return(m=n==null?void 0:n.logger)==null||m.debug(`[messaging] onMessage {id=${S.id}} ─ᐅ`,{res:y}),{res:y}}).catch(y=>{var m;return(m=n==null?void 0:n.logger)==null||m.debug(`[messaging] onMessage {id=${S.id}} ─ᐅ`,{err:y}),{err:il(y)}})})),r[f]!=null){const S=Error(`[messaging] In this JS context, only one listener can be setup for ${f}`);throw(g=n.logger)==null||g.error(S),S}return r[f]=h,(b=n.logger)==null||b.log(`[messaging] Added listener for ${f}`),()=>{delete r[f],i()}},removeAllListeners(){Object.keys(r).forEach(f=>{delete r[f]}),i()}}}var Gi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function pl(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var r=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var u=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(r,i,u.get?u:{enumerable:!0,get:function(){return n[i]}})}),r}var cn={exports:{}},hl=cn.exports,Ki;function gl(){return Ki||(Ki=1,function(n,t){(function(r,i){i(n)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:hl,function(r){var i,u;if(!((u=(i=globalThis.chrome)==null?void 0:i.runtime)!=null&&u.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const c="The message port closed before a response was received.",f=h=>{const w={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(w).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class g extends WeakMap{constructor(j,Y=void 0){super(Y),this.createItem=j}get(j){return this.has(j)||this.set(j,this.createItem(j)),super.get(j)}}const b=U=>U&&typeof U=="object"&&typeof U.then=="function",S=(U,j)=>(...Y)=>{h.runtime.lastError?U.reject(new Error(h.runtime.lastError.message)):j.singleCallbackArg||Y.length<=1&&j.singleCallbackArg!==!1?U.resolve(Y[0]):U.resolve(Y)},T=U=>U==1?"argument":"arguments",A=(U,j)=>function(O,...F){if(F.length<j.minArgs)throw new Error(`Expected at least ${j.minArgs} ${T(j.minArgs)} for ${U}(), got ${F.length}`);if(F.length>j.maxArgs)throw new Error(`Expected at most ${j.maxArgs} ${T(j.maxArgs)} for ${U}(), got ${F.length}`);return new Promise((G,K)=>{if(j.fallbackToNoCallback)try{O[U](...F,S({resolve:G,reject:K},j))}catch(H){console.warn(`${U} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,H),O[U](...F),j.fallbackToNoCallback=!1,j.noCallback=!0,G()}else j.noCallback?(O[U](...F),G()):O[U](...F,S({resolve:G,reject:K},j))})},k=(U,j,Y)=>new Proxy(j,{apply(O,F,G){return Y.call(F,U,...G)}});let x=Function.call.bind(Object.prototype.hasOwnProperty);const y=(U,j={},Y={})=>{let O=Object.create(null),F={has(K,H){return H in U||H in O},get(K,H,Z){if(H in O)return O[H];if(!(H in U))return;let ee=U[H];if(typeof ee=="function")if(typeof j[H]=="function")ee=k(U,U[H],j[H]);else if(x(Y,H)){let J=A(H,Y[H]);ee=k(U,U[H],J)}else ee=ee.bind(U);else if(typeof ee=="object"&&ee!==null&&(x(j,H)||x(Y,H)))ee=y(ee,j[H],Y[H]);else if(x(Y,"*"))ee=y(ee,j[H],Y["*"]);else return Object.defineProperty(O,H,{configurable:!0,enumerable:!0,get(){return U[H]},set(J){U[H]=J}}),ee;return O[H]=ee,ee},set(K,H,Z,ee){return H in O?O[H]=Z:U[H]=Z,!0},defineProperty(K,H,Z){return Reflect.defineProperty(O,H,Z)},deleteProperty(K,H){return Reflect.deleteProperty(O,H)}},G=Object.create(U);return new Proxy(G,F)},m=U=>({addListener(j,Y,...O){j.addListener(U.get(Y),...O)},hasListener(j,Y){return j.hasListener(U.get(Y))},removeListener(j,Y){j.removeListener(U.get(Y))}}),C=new g(U=>typeof U!="function"?U:function(Y){const O=y(Y,{},{getContent:{minArgs:0,maxArgs:0}});U(O)}),E=new g(U=>typeof U!="function"?U:function(Y,O,F){let G=!1,K,H=new Promise(se=>{K=function(oe){G=!0,se(oe)}}),Z;try{Z=U(Y,O,K)}catch(se){Z=Promise.reject(se)}const ee=Z!==!0&&b(Z);if(Z!==!0&&!ee&&!G)return!1;const J=se=>{se.then(oe=>{F(oe)},oe=>{let be;oe&&(oe instanceof Error||typeof oe.message=="string")?be=oe.message:be="An unexpected error occurred",F({__mozWebExtensionPolyfillReject__:!0,message:be})}).catch(oe=>{console.error("Failed to send onMessage rejected reply",oe)})};return J(ee?Z:H),!0}),R=({reject:U,resolve:j},Y)=>{h.runtime.lastError?h.runtime.lastError.message===c?j():U(new Error(h.runtime.lastError.message)):Y&&Y.__mozWebExtensionPolyfillReject__?U(new Error(Y.message)):j(Y)},$=(U,j,Y,...O)=>{if(O.length<j.minArgs)throw new Error(`Expected at least ${j.minArgs} ${T(j.minArgs)} for ${U}(), got ${O.length}`);if(O.length>j.maxArgs)throw new Error(`Expected at most ${j.maxArgs} ${T(j.maxArgs)} for ${U}(), got ${O.length}`);return new Promise((F,G)=>{const K=R.bind(null,{resolve:F,reject:G});O.push(K),Y.sendMessage(...O)})},D={devtools:{network:{onRequestFinished:m(C)}},runtime:{onMessage:m(E),onMessageExternal:m(E),sendMessage:$.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:$.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},o={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return w.privacy={network:{"*":o},services:{"*":o},websites:{"*":o}},y(h,D,w)};r.exports=f(chrome)}else r.exports=globalThis.browser})}(cn)),cn.exports}var ml=gl();const fn=Vn(ml);function Wt(n){return Qi(ln(un({},n),{sendMessage(t,r){if(r==null)return fn.runtime.sendMessage(t);const i=typeof r=="number"?{tabId:r}:r;return fn.tabs.sendMessage(i.tabId,t,i.frameId!=null?{frameId:i.frameId}:void 0)},addRootListener(t){const r=(i,u)=>t(typeof i=="object"?ln(un({},i),{sender:u}):i);return fn.runtime.onMessage.addListener(r),()=>fn.runtime.onMessage.removeListener(r)}}))}const{sendMessage:mm,onMessage:yl}=Wt(),wl=()=>{let n=null,t=!1;fe.tabs.onRemoved.addListener(i=>{n&&n.id===i&&(n=null,t||fe.management.setEnabled(fe.runtime.id,!1))}),yl("confirmEnabled",async i=>{t=i.data,await qe.setItem(Ui,{confirmEnabled:t}),t||fe.management.setEnabled(fe.runtime.id,!1),fe.tabs.remove(i.sender.tab.id)});const r=async()=>{n?await fe.tabs.update(n.id,{active:!0}):(t=!1,n=await fe.tabs.create({url:fe.runtime.getURL("/install-page.html")}))};fe.runtime.onInstalled.addListener(i=>{i.reason===fe.runtime.OnInstalledReason.INSTALL&&r()}),fe.management.onEnabled.addListener(async i=>{if(i.id===fe.runtime.id){const u=await qe.getItem(Ui);u!=null&&u.confirmEnabled||r()}})},dn=Object.freeze(Object.defineProperty({__proto__:null,source:"sheinChoice"},Symbol.toStringTag,{value:"Module"})),rt=[];for(let n=0;n<256;++n)rt.push((n+256).toString(16).slice(1));function vl(n,t=0){return(rt[n[t+0]]+rt[n[t+1]]+rt[n[t+2]]+rt[n[t+3]]+"-"+rt[n[t+4]]+rt[n[t+5]]+"-"+rt[n[t+6]]+rt[n[t+7]]+"-"+rt[n[t+8]]+rt[n[t+9]]+"-"+rt[n[t+10]]+rt[n[t+11]]+rt[n[t+12]]+rt[n[t+13]]+rt[n[t+14]]+rt[n[t+15]]).toLowerCase()}let Xn;const xl=new Uint8Array(16);function bl(){if(!Xn){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Xn=crypto.getRandomValues.bind(crypto)}return Xn(xl)}const Vi={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Tl(n,t,r){var u;if(Vi.randomUUID&&!n)return Vi.randomUUID();n=n||{};const i=n.random??((u=n.rng)==null?void 0:u.call(n))??bl();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,vl(i)}class Sl{constructor(t,r){ne(this,"taskId",Tl());ne(this,"tabId");ne(this,"collectItemList",[]);ne(this,"browserTab",null);ne(this,"hasTask",!1);ne(this,"loading",!0);ne(this,"result",[]);ne(this,"currentIndex",-1);ne(this,"extraData");ne(this,"keepActiveTab",!0);ne(this,"start",async()=>{const t=this.currentIndex+1,r=this.collectItemList[t];if(await this.removeBrowserTab(),!r){this.loading=!1;return}const i=(await fe.tabs.query({active:!0}))[0];this.loading=!0,this.browserTab=await fe.tabs.create({url:r.itemUrl,active:!0}),this.browserTabId!==(i==null?void 0:i.id)&&this.keepActiveTab&&await fe.tabs.update(i.id,{active:!0}),this.result[t]={itemInfo:this.collectItemList[t],status:"loading"},this.currentIndex=t});this.tabId=t,this.append(r)}get itemList(){return this.collectItemList}get browserTabId(){var t;return(t=this.browserTab)==null?void 0:t.id}async removeBrowserTab(){try{this.browserTabId&&(await fe.tabs.update(this.browserTabId,{active:!1}),await fe.tabs.remove(this.browserTabId),this.browserTab=null)}catch{console.error("当前tab可能已被移除")}}async next(){this.hasTask||await this.start()}append(t){this.collectItemList.push(...t.itemList),"extraData"in t&&(this.extraData=t.extraData),"keepActiveTab"in t&&(this.keepActiveTab=t.keepActiveTab),this.next()}done(){this.hasTask=!1}updateResult(t){this.result[this.currentIndex].status=t.data?"success":"fail",this.result[this.currentIndex].data=t.data,this.result[this.currentIndex].error=t.error,t.itemInfo&&(this.result[this.currentIndex].itemInfo=t.itemInfo)}destroy(){this.removeBrowserTab()}}const Al=n=>{const t=new Map,r=w=>Array.from(t.values()).find(g=>g.browserTabId===w),i=w=>{const g=r(w);return g?{extraData:g.extraData,taskId:g.taskId,tabId:g.tabId,currentIndex:g.currentIndex}:!1},u=async(w,g)=>{const b=r(w);b&&(b.updateResult(g),n==null||n({taskId:b.taskId,tabId:b.tabId,loading:b.loading,result:b.result,total:b.itemList.length,currentIndex:b.currentIndex,itemList:b.itemList}),g.error||await b.next())},c=(w,g)=>{const{itemList:b,taskId:S,extraData:T,keepActiveTab:A}=g,k=t.get(S);if(k)return k.append({extraData:T,itemList:b,keepActiveTab:A}),k.taskId;{const x=new Sl(w,{extraData:T,itemList:b,keepActiveTab:A});return t.set(x.taskId,x),x.taskId}},f=w=>{w&&t.has(w)&&(t.get(w).destroy(),t.delete(w))};return fe.tabs.onRemoved.addListener(w=>{const g=t.entries().find(([b,S])=>S.tabId===w);g&&f(g[0])}),{validatorAutoCollect:i,createAutoCollect:c,destroyAutoCollect:f,updateAutoCollectResult:u,setTaskTabActive:async w=>{const{taskId:g,itemUrl:b}=w,S=t.get(g);if(S)try{if(await fe.tabs.get(S.browserTabId)){await fe.tabs.update(S.browserTabId,{active:!0});return}}catch(T){console.error(T)}b&&await fe.tabs.create({url:b,active:!0})}}},Cl=()=>({startCrawlTask:u=>{const{antiContentStr:c,source:f}=u,{CrawlTask:h}=Hr,{CrawlTask:w}=Br,{source:g}=dn;let b;f===g?b=new w:b=new h(c),b.run()},setCrawlTabId:async u=>{const{crawlTabId:c,source:f}=u,{LOCAL_CRAWL_TAB_ID:h,_globalCrawlData:w}=Hr,{LOCAL_CRAWL_SHEIN_CHOICE_TAB_ID:g,_globalCrawlData:b}=Br,{source:S}=dn;let T;f===S?(b.crawlTabId=c,T=g):(w.crawlTabId=c,T=h),qe.setItem(T,c)},crawlShop:u=>{const{mallInfo:c,source:f}=u,{_globalCrawlData:h}=Hr,{_globalCrawlData:w}=Br,{source:g}=dn,b={...c,action:"manual"};f===g?w.crawlQueue.addCrawlQueue(b):h.crawlQueue.addCrawlQueue(b)},getCrawlInfo:async u=>{const{id:c,source:f}=u,{_globalCrawlData:h,CrawlLog:w}=Hr,{_globalCrawlData:g,CrawlLog:b}=Br,{source:S}=dn;let T,A;return f===S?(T=g.crawlQueue.crawlQueueList.find(x=>`${x.mallId}`==`${c}`),A=new b(c,T?T.requestId:null)):(T=h.crawlQueue.crawlQueueList.find(x=>`${x.mallId}`==`${c}`),A=new w(c,T?T.requestId:null)),await A.init(),await A.getCrawlInfo()}});var Xi=typeof global=="object"&&global&&global.Object===Object&&global,kl=typeof self=="object"&&self&&self.Object===Object&&self,zt=Xi||kl||Function("return this")(),$t=zt.Symbol,Ji=Object.prototype,Ol=Ji.hasOwnProperty,Il=Ji.toString,Pr=$t?$t.toStringTag:void 0;function Ll(n){var t=Ol.call(n,Pr),r=n[Pr];try{n[Pr]=void 0;var i=!0}catch{}var u=Il.call(n);return i&&(t?n[Pr]=r:delete n[Pr]),u}var El=Object.prototype,Dl=El.toString;function _l(n){return Dl.call(n)}var Rl="[object Null]",Ml="[object Undefined]",Zi=$t?$t.toStringTag:void 0;function dr(n){return n==null?n===void 0?Ml:Rl:Zi&&Zi in Object(n)?Ll(n):_l(n)}function rr(n){return n!=null&&typeof n=="object"}var Pl="[object Symbol]";function pn(n){return typeof n=="symbol"||rr(n)&&dr(n)==Pl}function es(n,t){for(var r=-1,i=n==null?0:n.length,u=Array(i);++r<i;)u[r]=t(n[r],r,n);return u}var yt=Array.isArray,ts=$t?$t.prototype:void 0,rs=ts?ts.toString:void 0;function ns(n){if(typeof n=="string")return n;if(yt(n))return es(n,ns)+"";if(pn(n))return rs?rs.call(n):"";var t=n+"";return t=="0"&&1/n==-1/0?"-0":t}var $l=/\s/;function jl(n){for(var t=n.length;t--&&$l.test(n.charAt(t)););return t}var ql=/^\s+/;function Nl(n){return n&&n.slice(0,jl(n)+1).replace(ql,"")}function Or(n){var t=typeof n;return n!=null&&(t=="object"||t=="function")}var as=NaN,Fl=/^[-+]0x[0-9a-f]+$/i,Ul=/^0b[01]+$/i,Bl=/^0o[0-7]+$/i,Hl=parseInt;function Wl(n){if(typeof n=="number")return n;if(pn(n))return as;if(Or(n)){var t=typeof n.valueOf=="function"?n.valueOf():n;n=Or(t)?t+"":t}if(typeof n!="string")return n===0?n:+n;n=Nl(n);var r=Ul.test(n);return r||Bl.test(n)?Hl(n.slice(2),r?2:8):Fl.test(n)?as:+n}var zl=1/0,Yl=17976931348623157e292;function Ql(n){if(!n)return n===0?n:0;if(n=Wl(n),n===zl||n===-1/0){var t=n<0?-1:1;return t*Yl}return n===n?n:0}function Gl(n){var t=Ql(n),r=t%1;return t===t?r?t-r:t:0}function is(n){return n}var Kl="[object AsyncFunction]",Vl="[object Function]",Xl="[object GeneratorFunction]",Jl="[object Proxy]";function ss(n){if(!Or(n))return!1;var t=dr(n);return t==Vl||t==Xl||t==Kl||t==Jl}var Jn=zt["__core-js_shared__"],os=function(){var n=/[^.]+$/.exec(Jn&&Jn.keys&&Jn.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Zl(n){return!!os&&os in n}var ec=Function.prototype,tc=ec.toString;function pr(n){if(n!=null){try{return tc.call(n)}catch{}try{return n+""}catch{}}return""}var rc=/[\\^$.*+?()[\]{}|]/g,nc=/^\[object .+?Constructor\]$/,ac=Function.prototype,ic=Object.prototype,sc=ac.toString,oc=ic.hasOwnProperty,uc=RegExp("^"+sc.call(oc).replace(rc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lc(n){if(!Or(n)||Zl(n))return!1;var t=ss(n)?uc:nc;return t.test(pr(n))}function cc(n,t){return n==null?void 0:n[t]}function hr(n,t){var r=cc(n,t);return lc(r)?r:void 0}var Zn=hr(zt,"WeakMap");function fc(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}var dc=800,pc=16,hc=Date.now;function gc(n){var t=0,r=0;return function(){var i=hc(),u=pc-(i-r);if(r=i,u>0){if(++t>=dc)return arguments[0]}else t=0;return n.apply(void 0,arguments)}}function mc(n){return function(){return n}}var hn=function(){try{var n=hr(Object,"defineProperty");return n({},"",{}),n}catch{}}(),yc=hn?function(n,t){return hn(n,"toString",{configurable:!0,enumerable:!1,value:mc(t),writable:!0})}:is,us=gc(yc);function wc(n,t,r,i){for(var u=n.length,c=r+-1;++c<u;)if(t(n[c],c,n))return c;return-1}function vc(n){return n!==n}function xc(n,t,r){for(var i=r-1,u=n.length;++i<u;)if(n[i]===t)return i;return-1}function bc(n,t,r){return t===t?xc(n,t,r):wc(n,vc,r)}function Tc(n,t){var r=n==null?0:n.length;return!!r&&bc(n,t,0)>-1}var Sc=9007199254740991,Ac=/^(?:0|[1-9]\d*)$/;function ea(n,t){var r=typeof n;return t=t??Sc,!!t&&(r=="number"||r!="symbol"&&Ac.test(n))&&n>-1&&n%1==0&&n<t}function Cc(n,t,r){t=="__proto__"&&hn?hn(n,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):n[t]=r}function ta(n,t){return n===t||n!==n&&t!==t}var kc=Object.prototype,Oc=kc.hasOwnProperty;function Ic(n,t,r){var i=n[t];(!(Oc.call(n,t)&&ta(i,r))||r===void 0&&!(t in n))&&Cc(n,t,r)}var ls=Math.max;function cs(n,t,r){return t=ls(t===void 0?n.length-1:t,0),function(){for(var i=arguments,u=-1,c=ls(i.length-t,0),f=Array(c);++u<c;)f[u]=i[t+u];u=-1;for(var h=Array(t+1);++u<t;)h[u]=i[u];return h[t]=r(f),fc(n,this,h)}}function Lc(n,t){return us(cs(n,t,is),n+"")}var Ec=9007199254740991;function ra(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Ec}function fs(n){return n!=null&&ra(n.length)&&!ss(n)}var Dc=Object.prototype;function _c(n){var t=n&&n.constructor,r=typeof t=="function"&&t.prototype||Dc;return n===r}function Rc(n,t){for(var r=-1,i=Array(n);++r<n;)i[r]=t(r);return i}var Mc="[object Arguments]";function ds(n){return rr(n)&&dr(n)==Mc}var ps=Object.prototype,Pc=ps.hasOwnProperty,$c=ps.propertyIsEnumerable,na=ds(function(){return arguments}())?ds:function(n){return rr(n)&&Pc.call(n,"callee")&&!$c.call(n,"callee")};function jc(){return!1}var hs=typeof exports=="object"&&exports&&!exports.nodeType&&exports,gs=hs&&typeof module=="object"&&module&&!module.nodeType&&module,qc=gs&&gs.exports===hs,ms=qc?zt.Buffer:void 0,Nc=ms?ms.isBuffer:void 0,aa=Nc||jc,Fc="[object Arguments]",Uc="[object Array]",Bc="[object Boolean]",Hc="[object Date]",Wc="[object Error]",zc="[object Function]",Yc="[object Map]",Qc="[object Number]",Gc="[object Object]",Kc="[object RegExp]",Vc="[object Set]",Xc="[object String]",Jc="[object WeakMap]",Zc="[object ArrayBuffer]",ef="[object DataView]",tf="[object Float32Array]",rf="[object Float64Array]",nf="[object Int8Array]",af="[object Int16Array]",sf="[object Int32Array]",of="[object Uint8Array]",uf="[object Uint8ClampedArray]",lf="[object Uint16Array]",cf="[object Uint32Array]",Qe={};Qe[tf]=Qe[rf]=Qe[nf]=Qe[af]=Qe[sf]=Qe[of]=Qe[uf]=Qe[lf]=Qe[cf]=!0,Qe[Fc]=Qe[Uc]=Qe[Zc]=Qe[Bc]=Qe[ef]=Qe[Hc]=Qe[Wc]=Qe[zc]=Qe[Yc]=Qe[Qc]=Qe[Gc]=Qe[Kc]=Qe[Vc]=Qe[Xc]=Qe[Jc]=!1;function ff(n){return rr(n)&&ra(n.length)&&!!Qe[dr(n)]}function df(n){return function(t){return n(t)}}var ys=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$r=ys&&typeof module=="object"&&module&&!module.nodeType&&module,pf=$r&&$r.exports===ys,ia=pf&&Xi.process,ws=function(){try{var n=$r&&$r.require&&$r.require("util").types;return n||ia&&ia.binding&&ia.binding("util")}catch{}}(),vs=ws&&ws.isTypedArray,xs=vs?df(vs):ff,hf=Object.prototype,gf=hf.hasOwnProperty;function mf(n,t){var r=yt(n),i=!r&&na(n),u=!r&&!i&&aa(n),c=!r&&!i&&!u&&xs(n),f=r||i||u||c,h=f?Rc(n.length,String):[],w=h.length;for(var g in n)gf.call(n,g)&&!(f&&(g=="length"||u&&(g=="offset"||g=="parent")||c&&(g=="buffer"||g=="byteLength"||g=="byteOffset")||ea(g,w)))&&h.push(g);return h}function yf(n,t){return function(r){return n(t(r))}}var wf=yf(Object.keys,Object),vf=Object.prototype,xf=vf.hasOwnProperty;function bf(n){if(!_c(n))return wf(n);var t=[];for(var r in Object(n))xf.call(n,r)&&r!="constructor"&&t.push(r);return t}function Tf(n){return fs(n)?mf(n):bf(n)}var Sf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Af=/^\w*$/;function Cf(n,t){if(yt(n))return!1;var r=typeof n;return r=="number"||r=="symbol"||r=="boolean"||n==null||pn(n)?!0:Af.test(n)||!Sf.test(n)||t!=null&&n in Object(t)}var jr=hr(Object,"create");function kf(){this.__data__=jr?jr(null):{},this.size=0}function Of(n){var t=this.has(n)&&delete this.__data__[n];return this.size-=t?1:0,t}var If="__lodash_hash_undefined__",Lf=Object.prototype,Ef=Lf.hasOwnProperty;function Df(n){var t=this.__data__;if(jr){var r=t[n];return r===If?void 0:r}return Ef.call(t,n)?t[n]:void 0}var _f=Object.prototype,Rf=_f.hasOwnProperty;function Mf(n){var t=this.__data__;return jr?t[n]!==void 0:Rf.call(t,n)}var Pf="__lodash_hash_undefined__";function $f(n,t){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=jr&&t===void 0?Pf:t,this}function gr(n){var t=-1,r=n==null?0:n.length;for(this.clear();++t<r;){var i=n[t];this.set(i[0],i[1])}}gr.prototype.clear=kf,gr.prototype.delete=Of,gr.prototype.get=Df,gr.prototype.has=Mf,gr.prototype.set=$f;function jf(){this.__data__=[],this.size=0}function gn(n,t){for(var r=n.length;r--;)if(ta(n[r][0],t))return r;return-1}var qf=Array.prototype,Nf=qf.splice;function Ff(n){var t=this.__data__,r=gn(t,n);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():Nf.call(t,r,1),--this.size,!0}function Uf(n){var t=this.__data__,r=gn(t,n);return r<0?void 0:t[r][1]}function Bf(n){return gn(this.__data__,n)>-1}function Hf(n,t){var r=this.__data__,i=gn(r,n);return i<0?(++this.size,r.push([n,t])):r[i][1]=t,this}function Yt(n){var t=-1,r=n==null?0:n.length;for(this.clear();++t<r;){var i=n[t];this.set(i[0],i[1])}}Yt.prototype.clear=jf,Yt.prototype.delete=Ff,Yt.prototype.get=Uf,Yt.prototype.has=Bf,Yt.prototype.set=Hf;var qr=hr(zt,"Map");function Wf(){this.size=0,this.__data__={hash:new gr,map:new(qr||Yt),string:new gr}}function zf(n){var t=typeof n;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?n!=="__proto__":n===null}function mn(n,t){var r=n.__data__;return zf(t)?r[typeof t=="string"?"string":"hash"]:r.map}function Yf(n){var t=mn(this,n).delete(n);return this.size-=t?1:0,t}function Qf(n){return mn(this,n).get(n)}function Gf(n){return mn(this,n).has(n)}function Kf(n,t){var r=mn(this,n),i=r.size;return r.set(n,t),this.size+=r.size==i?0:1,this}function Qt(n){var t=-1,r=n==null?0:n.length;for(this.clear();++t<r;){var i=n[t];this.set(i[0],i[1])}}Qt.prototype.clear=Wf,Qt.prototype.delete=Yf,Qt.prototype.get=Qf,Qt.prototype.has=Gf,Qt.prototype.set=Kf;var Vf="Expected a function";function sa(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new TypeError(Vf);var r=function(){var i=arguments,u=t?t.apply(this,i):i[0],c=r.cache;if(c.has(u))return c.get(u);var f=n.apply(this,i);return r.cache=c.set(u,f)||c,f};return r.cache=new(sa.Cache||Qt),r}sa.Cache=Qt;var Xf=500;function Jf(n){var t=sa(n,function(i){return r.size===Xf&&r.clear(),i}),r=t.cache;return t}var Zf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ed=/\\(\\)?/g,td=Jf(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(Zf,function(r,i,u,c){t.push(u?c.replace(ed,"$1"):i||r)}),t});function rd(n){return n==null?"":ns(n)}function yn(n,t){return yt(n)?n:Cf(n,t)?[n]:td(rd(n))}function oa(n){if(typeof n=="string"||pn(n))return n;var t=n+"";return t=="0"&&1/n==-1/0?"-0":t}function nd(n,t){t=yn(t,n);for(var r=0,i=t.length;n!=null&&r<i;)n=n[oa(t[r++])];return r&&r==i?n:void 0}function bs(n,t){for(var r=-1,i=t.length,u=n.length;++r<i;)n[u+r]=t[r];return n}var Ts=$t?$t.isConcatSpreadable:void 0;function ad(n){return yt(n)||na(n)||!!(Ts&&n&&n[Ts])}function id(n,t,r,i,u){var c=-1,f=n.length;for(r||(r=ad),u||(u=[]);++c<f;){var h=n[c];r(h)?bs(u,h):u[u.length]=h}return u}function sd(n){var t=n==null?0:n.length;return t?id(n):[]}function od(n){return us(cs(n,void 0,sd),n+"")}function ud(n,t,r){var i=-1,u=n.length;t<0&&(t=-t>u?0:u+t),r=r>u?u:r,r<0&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0;for(var c=Array(u);++i<u;)c[i]=n[i+t];return c}var ld=Math.ceil,cd=Math.max;function Ss(n,t,r){t===void 0?t=1:t=cd(Gl(t),0);var i=n==null?0:n.length;if(!i||t<1)return[];for(var u=0,c=0,f=Array(ld(i/t));u<i;)f[c++]=ud(n,u,u+=t);return f}function fd(){this.__data__=new Yt,this.size=0}function dd(n){var t=this.__data__,r=t.delete(n);return this.size=t.size,r}function pd(n){return this.__data__.get(n)}function hd(n){return this.__data__.has(n)}var gd=200;function md(n,t){var r=this.__data__;if(r instanceof Yt){var i=r.__data__;if(!qr||i.length<gd-1)return i.push([n,t]),this.size=++r.size,this;r=this.__data__=new Qt(i)}return r.set(n,t),this.size=r.size,this}function nr(n){var t=this.__data__=new Yt(n);this.size=t.size}nr.prototype.clear=fd,nr.prototype.delete=dd,nr.prototype.get=pd,nr.prototype.has=hd,nr.prototype.set=md;function yd(n,t){for(var r=-1,i=n==null?0:n.length,u=0,c=[];++r<i;){var f=n[r];t(f,r,n)&&(c[u++]=f)}return c}function wd(){return[]}var vd=Object.prototype,xd=vd.propertyIsEnumerable,As=Object.getOwnPropertySymbols,bd=As?function(n){return n==null?[]:(n=Object(n),yd(As(n),function(t){return xd.call(n,t)}))}:wd;function Td(n,t,r){var i=t(n);return yt(n)?i:bs(i,r(n))}function Cs(n){return Td(n,Tf,bd)}var ua=hr(zt,"DataView"),la=hr(zt,"Promise"),ca=hr(zt,"Set"),ks="[object Map]",Sd="[object Object]",Os="[object Promise]",Is="[object Set]",Ls="[object WeakMap]",Es="[object DataView]",Ad=pr(ua),Cd=pr(qr),kd=pr(la),Od=pr(ca),Id=pr(Zn),ar=dr;(ua&&ar(new ua(new ArrayBuffer(1)))!=Es||qr&&ar(new qr)!=ks||la&&ar(la.resolve())!=Os||ca&&ar(new ca)!=Is||Zn&&ar(new Zn)!=Ls)&&(ar=function(n){var t=dr(n),r=t==Sd?n.constructor:void 0,i=r?pr(r):"";if(i)switch(i){case Ad:return Es;case Cd:return ks;case kd:return Os;case Od:return Is;case Id:return Ls}return t});var Ds=zt.Uint8Array,Ld="__lodash_hash_undefined__";function Ed(n){return this.__data__.set(n,Ld),this}function Dd(n){return this.__data__.has(n)}function Nr(n){var t=-1,r=n==null?0:n.length;for(this.__data__=new Qt;++t<r;)this.add(n[t])}Nr.prototype.add=Nr.prototype.push=Ed,Nr.prototype.has=Dd;function _d(n,t){for(var r=-1,i=n==null?0:n.length;++r<i;)if(t(n[r],r,n))return!0;return!1}function fa(n,t){return n.has(t)}var Rd=1,Md=2;function _s(n,t,r,i,u,c){var f=r&Rd,h=n.length,w=t.length;if(h!=w&&!(f&&w>h))return!1;var g=c.get(n),b=c.get(t);if(g&&b)return g==t&&b==n;var S=-1,T=!0,A=r&Md?new Nr:void 0;for(c.set(n,t),c.set(t,n);++S<h;){var k=n[S],x=t[S];if(i)var y=f?i(x,k,S,t,n,c):i(k,x,S,n,t,c);if(y!==void 0){if(y)continue;T=!1;break}if(A){if(!_d(t,function(m,C){if(!fa(A,C)&&(k===m||u(k,m,r,i,c)))return A.push(C)})){T=!1;break}}else if(!(k===x||u(k,x,r,i,c))){T=!1;break}}return c.delete(n),c.delete(t),T}function Pd(n){var t=-1,r=Array(n.size);return n.forEach(function(i,u){r[++t]=[u,i]}),r}function $d(n){var t=-1,r=Array(n.size);return n.forEach(function(i){r[++t]=i}),r}var jd=1,qd=2,Nd="[object Boolean]",Fd="[object Date]",Ud="[object Error]",Bd="[object Map]",Hd="[object Number]",Wd="[object RegExp]",zd="[object Set]",Yd="[object String]",Qd="[object Symbol]",Gd="[object ArrayBuffer]",Kd="[object DataView]",Rs=$t?$t.prototype:void 0,da=Rs?Rs.valueOf:void 0;function Vd(n,t,r,i,u,c,f){switch(r){case Kd:if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)return!1;n=n.buffer,t=t.buffer;case Gd:return!(n.byteLength!=t.byteLength||!c(new Ds(n),new Ds(t)));case Nd:case Fd:case Hd:return ta(+n,+t);case Ud:return n.name==t.name&&n.message==t.message;case Wd:case Yd:return n==t+"";case Bd:var h=Pd;case zd:var w=i&jd;if(h||(h=$d),n.size!=t.size&&!w)return!1;var g=f.get(n);if(g)return g==t;i|=qd,f.set(n,t);var b=_s(h(n),h(t),i,u,c,f);return f.delete(n),b;case Qd:if(da)return da.call(n)==da.call(t)}return!1}var Xd=1,Jd=Object.prototype,Zd=Jd.hasOwnProperty;function ep(n,t,r,i,u,c){var f=r&Xd,h=Cs(n),w=h.length,g=Cs(t),b=g.length;if(w!=b&&!f)return!1;for(var S=w;S--;){var T=h[S];if(!(f?T in t:Zd.call(t,T)))return!1}var A=c.get(n),k=c.get(t);if(A&&k)return A==t&&k==n;var x=!0;c.set(n,t),c.set(t,n);for(var y=f;++S<w;){T=h[S];var m=n[T],C=t[T];if(i)var E=f?i(C,m,T,t,n,c):i(m,C,T,n,t,c);if(!(E===void 0?m===C||u(m,C,r,i,c):E)){x=!1;break}y||(y=T=="constructor")}if(x&&!y){var R=n.constructor,$=t.constructor;R!=$&&"constructor"in n&&"constructor"in t&&!(typeof R=="function"&&R instanceof R&&typeof $=="function"&&$ instanceof $)&&(x=!1)}return c.delete(n),c.delete(t),x}var tp=1,Ms="[object Arguments]",Ps="[object Array]",wn="[object Object]",rp=Object.prototype,$s=rp.hasOwnProperty;function np(n,t,r,i,u,c){var f=yt(n),h=yt(t),w=f?Ps:ar(n),g=h?Ps:ar(t);w=w==Ms?wn:w,g=g==Ms?wn:g;var b=w==wn,S=g==wn,T=w==g;if(T&&aa(n)){if(!aa(t))return!1;f=!0,b=!1}if(T&&!b)return c||(c=new nr),f||xs(n)?_s(n,t,r,i,u,c):Vd(n,t,w,r,i,u,c);if(!(r&tp)){var A=b&&$s.call(n,"__wrapped__"),k=S&&$s.call(t,"__wrapped__");if(A||k){var x=A?n.value():n,y=k?t.value():t;return c||(c=new nr),u(x,y,r,i,c)}}return T?(c||(c=new nr),ep(n,t,r,i,u,c)):!1}function js(n,t,r,i,u){return n===t?!0:n==null||t==null||!rr(n)&&!rr(t)?n!==n&&t!==t:np(n,t,r,i,js,u)}function ap(n,t){return n!=null&&t in Object(n)}function ip(n,t,r){t=yn(t,n);for(var i=-1,u=t.length,c=!1;++i<u;){var f=oa(t[i]);if(!(c=n!=null&&r(n,f)))break;n=n[f]}return c||++i!=u?c:(u=n==null?0:n.length,!!u&&ra(u)&&ea(f,u)&&(yt(n)||na(n)))}function sp(n,t){return n!=null&&ip(n,t,ap)}function op(n){return rr(n)&&fs(n)}var up=Math.min;function lp(n,t,r){for(var i=Tc,u=n[0].length,c=n.length,f=c,h=Array(c),w=1/0,g=[];f--;){var b=n[f];w=up(b.length,w),h[f]=u>=120&&b.length>=120?new Nr(f&&b):void 0}b=n[0];var S=-1,T=h[0];e:for(;++S<u&&g.length<w;){var A=b[S],k=A;if(A=A!==0?A:0,!(T?fa(T,k):i(g,k))){for(f=c;--f;){var x=h[f];if(!(x?fa(x,k):i(n[f],k)))continue e}T&&T.push(k),g.push(A)}}return g}function cp(n){return op(n)?n:[]}var fp=Lc(function(n){var t=es(n,cp);return t.length&&t[0]===n[0]?lp(t):[]});function dp(n,t){return js(n,t)}var pp="[object Number]";function hp(n){return typeof n=="number"||rr(n)&&dr(n)==pp}function Fr(n){return hp(n)&&n!=+n}function gp(n,t,r,i){if(!Or(n))return n;t=yn(t,n);for(var u=-1,c=t.length,f=c-1,h=n;h!=null&&++u<c;){var w=oa(t[u]),g=r;if(w==="__proto__"||w==="constructor"||w==="prototype")return n;if(u!=f){var b=h[w];g=void 0,g===void 0&&(g=Or(b)?b:ea(t[u+1])?[]:{})}Ic(h,w,g),h=h[w]}return n}function mp(n,t,r){for(var i=-1,u=t.length,c={};++i<u;){var f=t[i],h=nd(n,f);r(h,f)&&gp(c,yn(f,n),h)}return c}function yp(n,t){return mp(n,t,function(r,i){return sp(n,i)})}var Ir=od(function(n,t){return n==null?{}:yp(n,t)});const wp={verticalAttributesMap:{_F_b_kj_dc:"mskjzs",xx:"zying"}};function vp(){const t=navigator.userAgent.match(/Chrome\/(\d+)\./);return Number(t==null?void 0:t[1])||0}var vn={exports:{}},xp=vn.exports,qs;function bp(){return qs||(qs=1,function(n,t){(function(r,i){n.exports=i()})(xp,function(){var r=1e3,i=6e4,u=36e5,c="millisecond",f="second",h="minute",w="hour",g="day",b="week",S="month",T="quarter",A="year",k="date",x="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,m=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(K){var H=["th","st","nd","rd"],Z=K%100;return"["+K+(H[(Z-20)%10]||H[Z]||H[0])+"]"}},E=function(K,H,Z){var ee=String(K);return!ee||ee.length>=H?K:""+Array(H+1-ee.length).join(Z)+K},R={s:E,z:function(K){var H=-K.utcOffset(),Z=Math.abs(H),ee=Math.floor(Z/60),J=Z%60;return(H<=0?"+":"-")+E(ee,2,"0")+":"+E(J,2,"0")},m:function K(H,Z){if(H.date()<Z.date())return-K(Z,H);var ee=12*(Z.year()-H.year())+(Z.month()-H.month()),J=H.clone().add(ee,S),se=Z-J<0,oe=H.clone().add(ee+(se?-1:1),S);return+(-(ee+(Z-J)/(se?J-oe:oe-J))||0)},a:function(K){return K<0?Math.ceil(K)||0:Math.floor(K)},p:function(K){return{M:S,y:A,w:b,d:g,D:k,h:w,m:h,s:f,ms:c,Q:T}[K]||String(K||"").toLowerCase().replace(/s$/,"")},u:function(K){return K===void 0}},$="en",D={};D[$]=C;var o="$isDayjsObject",U=function(K){return K instanceof F||!(!K||!K[o])},j=function K(H,Z,ee){var J;if(!H)return $;if(typeof H=="string"){var se=H.toLowerCase();D[se]&&(J=se),Z&&(D[se]=Z,J=se);var oe=H.split("-");if(!J&&oe.length>1)return K(oe[0])}else{var be=H.name;D[be]=H,J=be}return!ee&&J&&($=J),J||!ee&&$},Y=function(K,H){if(U(K))return K.clone();var Z=typeof H=="object"?H:{};return Z.date=K,Z.args=arguments,new F(Z)},O=R;O.l=j,O.i=U,O.w=function(K,H){return Y(K,{locale:H.$L,utc:H.$u,x:H.$x,$offset:H.$offset})};var F=function(){function K(Z){this.$L=j(Z.locale,null,!0),this.parse(Z),this.$x=this.$x||Z.x||{},this[o]=!0}var H=K.prototype;return H.parse=function(Z){this.$d=function(ee){var J=ee.date,se=ee.utc;if(J===null)return new Date(NaN);if(O.u(J))return new Date;if(J instanceof Date)return new Date(J);if(typeof J=="string"&&!/Z$/i.test(J)){var oe=J.match(y);if(oe){var be=oe[2]-1||0,De=(oe[7]||"0").substring(0,3);return se?new Date(Date.UTC(oe[1],be,oe[3]||1,oe[4]||0,oe[5]||0,oe[6]||0,De)):new Date(oe[1],be,oe[3]||1,oe[4]||0,oe[5]||0,oe[6]||0,De)}}return new Date(J)}(Z),this.init()},H.init=function(){var Z=this.$d;this.$y=Z.getFullYear(),this.$M=Z.getMonth(),this.$D=Z.getDate(),this.$W=Z.getDay(),this.$H=Z.getHours(),this.$m=Z.getMinutes(),this.$s=Z.getSeconds(),this.$ms=Z.getMilliseconds()},H.$utils=function(){return O},H.isValid=function(){return this.$d.toString()!==x},H.isSame=function(Z,ee){var J=Y(Z);return this.startOf(ee)<=J&&J<=this.endOf(ee)},H.isAfter=function(Z,ee){return Y(Z)<this.startOf(ee)},H.isBefore=function(Z,ee){return this.endOf(ee)<Y(Z)},H.$g=function(Z,ee,J){return O.u(Z)?this[ee]:this.set(J,Z)},H.unix=function(){return Math.floor(this.valueOf()/1e3)},H.valueOf=function(){return this.$d.getTime()},H.startOf=function(Z,ee){var J=this,se=!!O.u(ee)||ee,oe=O.p(Z),be=function(ze,ce){var Me=O.w(J.$u?Date.UTC(J.$y,ce,ze):new Date(J.$y,ce,ze),J);return se?Me:Me.endOf(g)},De=function(ze,ce){return O.w(J.toDate()[ze].apply(J.toDate("s"),(se?[0,0,0,0]:[23,59,59,999]).slice(ce)),J)},Pe=this.$W,Be=this.$M,Ke=this.$D,at="set"+(this.$u?"UTC":"");switch(oe){case A:return se?be(1,0):be(31,11);case S:return se?be(1,Be):be(0,Be+1);case b:var lt=this.$locale().weekStart||0,it=(Pe<lt?Pe+7:Pe)-lt;return be(se?Ke-it:Ke+(6-it),Be);case g:case k:return De(at+"Hours",0);case w:return De(at+"Minutes",1);case h:return De(at+"Seconds",2);case f:return De(at+"Milliseconds",3);default:return this.clone()}},H.endOf=function(Z){return this.startOf(Z,!1)},H.$set=function(Z,ee){var J,se=O.p(Z),oe="set"+(this.$u?"UTC":""),be=(J={},J[g]=oe+"Date",J[k]=oe+"Date",J[S]=oe+"Month",J[A]=oe+"FullYear",J[w]=oe+"Hours",J[h]=oe+"Minutes",J[f]=oe+"Seconds",J[c]=oe+"Milliseconds",J)[se],De=se===g?this.$D+(ee-this.$W):ee;if(se===S||se===A){var Pe=this.clone().set(k,1);Pe.$d[be](De),Pe.init(),this.$d=Pe.set(k,Math.min(this.$D,Pe.daysInMonth())).$d}else be&&this.$d[be](De);return this.init(),this},H.set=function(Z,ee){return this.clone().$set(Z,ee)},H.get=function(Z){return this[O.p(Z)]()},H.add=function(Z,ee){var J,se=this;Z=Number(Z);var oe=O.p(ee),be=function(Be){var Ke=Y(se);return O.w(Ke.date(Ke.date()+Math.round(Be*Z)),se)};if(oe===S)return this.set(S,this.$M+Z);if(oe===A)return this.set(A,this.$y+Z);if(oe===g)return be(1);if(oe===b)return be(7);var De=(J={},J[h]=i,J[w]=u,J[f]=r,J)[oe]||1,Pe=this.$d.getTime()+Z*De;return O.w(Pe,this)},H.subtract=function(Z,ee){return this.add(-1*Z,ee)},H.format=function(Z){var ee=this,J=this.$locale();if(!this.isValid())return J.invalidDate||x;var se=Z||"YYYY-MM-DDTHH:mm:ssZ",oe=O.z(this),be=this.$H,De=this.$m,Pe=this.$M,Be=J.weekdays,Ke=J.months,at=J.meridiem,lt=function(ce,Me,Ae,je){return ce&&(ce[Me]||ce(ee,se))||Ae[Me].slice(0,je)},it=function(ce){return O.s(be%12||12,ce,"0")},ze=at||function(ce,Me,Ae){var je=ce<12?"AM":"PM";return Ae?je.toLowerCase():je};return se.replace(m,function(ce,Me){return Me||function(Ae){switch(Ae){case"YY":return String(ee.$y).slice(-2);case"YYYY":return O.s(ee.$y,4,"0");case"M":return Pe+1;case"MM":return O.s(Pe+1,2,"0");case"MMM":return lt(J.monthsShort,Pe,Ke,3);case"MMMM":return lt(Ke,Pe);case"D":return ee.$D;case"DD":return O.s(ee.$D,2,"0");case"d":return String(ee.$W);case"dd":return lt(J.weekdaysMin,ee.$W,Be,2);case"ddd":return lt(J.weekdaysShort,ee.$W,Be,3);case"dddd":return Be[ee.$W];case"H":return String(be);case"HH":return O.s(be,2,"0");case"h":return it(1);case"hh":return it(2);case"a":return ze(be,De,!0);case"A":return ze(be,De,!1);case"m":return String(De);case"mm":return O.s(De,2,"0");case"s":return String(ee.$s);case"ss":return O.s(ee.$s,2,"0");case"SSS":return O.s(ee.$ms,3,"0");case"Z":return oe}return null}(ce)||oe.replace(":","")})},H.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},H.diff=function(Z,ee,J){var se,oe=this,be=O.p(ee),De=Y(Z),Pe=(De.utcOffset()-this.utcOffset())*i,Be=this-De,Ke=function(){return O.m(oe,De)};switch(be){case A:se=Ke()/12;break;case S:se=Ke();break;case T:se=Ke()/3;break;case b:se=(Be-Pe)/6048e5;break;case g:se=(Be-Pe)/864e5;break;case w:se=Be/u;break;case h:se=Be/i;break;case f:se=Be/r;break;default:se=Be}return J?se:O.a(se)},H.daysInMonth=function(){return this.endOf(S).$D},H.$locale=function(){return D[this.$L]},H.locale=function(Z,ee){if(!Z)return this.$L;var J=this.clone(),se=j(Z,ee,!0);return se&&(J.$L=se),J},H.clone=function(){return O.w(this.$d,this)},H.toDate=function(){return new Date(this.valueOf())},H.toJSON=function(){return this.isValid()?this.toISOString():null},H.toISOString=function(){return this.$d.toISOString()},H.toString=function(){return this.$d.toUTCString()},K}(),G=F.prototype;return Y.prototype=G,[["$ms",c],["$s",f],["$m",h],["$H",w],["$W",g],["$M",S],["$y",A],["$D",k]].forEach(function(K){G[K[1]]=function(H){return this.$g(H,K[0],K[1])}}),Y.extend=function(K,H){return K.$i||(K(H,F,Y),K.$i=!0),Y},Y.locale=j,Y.isDayjs=U,Y.unix=function(K){return Y(1e3*K)},Y.en=D[$],Y.Ls=D,Y.p={},Y})}(vn)),vn.exports}var Tp=bp();const Xe=Vn(Tp);async function Lr(n){return await qe.getItem(`local:${n}`)||{}}function xn(n,t){qe.setItem(`local:${n}`,t)}function Ue(n=0){return n?Xe().add(n,"s").format("YYYY-MM-DD HH:mm:ss"):Xe().format("YYYY-MM-DD HH:mm:ss")}function $e(n=""){return{result:"success",reason:n}}function Re(n){return{result:"fail",reason:n}}function Ce(n){switch(typeof n){case"string":return n;case"object":return n.message;default:return"未知错误"}}const ve=n=>new Promise(t=>{setTimeout(()=>{t()},n)}),Sp=()=>{if(Promise.withResolvers)return Promise.withResolvers();let n,t;return{promise:new Promise((i,u)=>{n=i,t=u}),resolve:n,reject:t}};function Ap(n){try{return new URL(n),!0}catch{return!1}}var pa,Ns;function Er(){return Ns||(Ns=1,pa=TypeError),pa}const Cp=pl(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var ha,Fs;function bn(){if(Fs)return ha;Fs=1;var n=typeof Map=="function"&&Map.prototype,t=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,r=n&&t&&typeof t.get=="function"?t.get:null,i=n&&Map.prototype.forEach,u=typeof Set=="function"&&Set.prototype,c=Object.getOwnPropertyDescriptor&&u?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,f=u&&c&&typeof c.get=="function"?c.get:null,h=u&&Set.prototype.forEach,w=typeof WeakMap=="function"&&WeakMap.prototype,g=w?WeakMap.prototype.has:null,b=typeof WeakSet=="function"&&WeakSet.prototype,S=b?WeakSet.prototype.has:null,T=typeof WeakRef=="function"&&WeakRef.prototype,A=T?WeakRef.prototype.deref:null,k=Boolean.prototype.valueOf,x=Object.prototype.toString,y=Function.prototype.toString,m=String.prototype.match,C=String.prototype.slice,E=String.prototype.replace,R=String.prototype.toUpperCase,$=String.prototype.toLowerCase,D=RegExp.prototype.test,o=Array.prototype.concat,U=Array.prototype.join,j=Array.prototype.slice,Y=Math.floor,O=typeof BigInt=="function"?BigInt.prototype.valueOf:null,F=Object.getOwnPropertySymbols,G=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,K=typeof Symbol=="function"&&typeof Symbol.iterator=="object",H=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===K||!0)?Symbol.toStringTag:null,Z=Object.prototype.propertyIsEnumerable,ee=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(q){return q.__proto__}:null);function J(q,W){if(q===1/0||q===-1/0||q!==q||q&&q>-1e3&&q<1e3||D.call(/e/,W))return W;var Ie=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof q=="number"){var Ne=q<0?-Y(-q):Y(q);if(Ne!==q){var We=String(Ne),Te=C.call(W,We.length+1);return E.call(We,Ie,"$&_")+"."+E.call(E.call(Te,/([0-9]{3})/g,"$&_"),/_$/,"")}}return E.call(W,Ie,"$&_")}var se=Cp,oe=se.custom,be=je(oe)?oe:null,De={__proto__:null,double:'"',single:"'"},Pe={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};ha=function q(W,Ie,Ne,We){var Te=Ie||{};if(He(Te,"quoteStyle")&&!He(De,Te.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(He(Te,"maxStringLength")&&(typeof Te.maxStringLength=="number"?Te.maxStringLength<0&&Te.maxStringLength!==1/0:Te.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ht=He(Te,"customInspect")?Te.customInspect:!0;if(typeof ht!="boolean"&&ht!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(He(Te,"indent")&&Te.indent!==null&&Te.indent!=="	"&&!(parseInt(Te.indent,10)===Te.indent&&Te.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(He(Te,"numericSeparator")&&typeof Te.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var At=Te.numericSeparator;if(typeof W>"u")return"undefined";if(W===null)return"null";if(typeof W=="boolean")return W?"true":"false";if(typeof W=="string")return ot(W,Te);if(typeof W=="number"){if(W===0)return 1/0/W>0?"0":"-0";var ct=String(W);return At?J(W,ct):ct}if(typeof W=="bigint"){var Rt=String(W)+"n";return At?J(W,Rt):Rt}var ft=typeof Te.depth>"u"?5:Te.depth;if(typeof Ne>"u"&&(Ne=0),Ne>=ft&&ft>0&&typeof W=="object")return at(W)?"[Array]":"[Object]";var Je=br(Te,Ne);if(typeof We>"u")We=[];else if(Vt(We,W)>=0)return"[Circular]";function gt(Jt,or,Xr){if(or&&(We=j.call(We),We.push(or)),Xr){var Tr={depth:Te.depth};return He(Te,"quoteStyle")&&(Tr.quoteStyle=Te.quoteStyle),q(Jt,Tr,Ne+1,We)}return q(Jt,Te,Ne+1,We)}if(typeof W=="function"&&!it(W)){var $n=pt(W),Yr=Lt(W,gt);return"[Function"+($n?": "+$n:" (anonymous)")+"]"+(Yr.length>0?" { "+U.call(Yr,", ")+" }":"")}if(je(W)){var Qr=K?E.call(String(W),/^(Symbol\(.*\))_[^)]*$/,"$1"):G.call(W);return typeof W=="object"&&!K?xr(Qr):Qr}if(le(W)){for(var Et="<"+$.call(String(W.nodeName)),jt=W.attributes||[],ir=0;ir<jt.length;ir++)Et+=" "+jt[ir].name+"="+Be(Ke(jt[ir].value),"double",Te);return Et+=">",W.childNodes&&W.childNodes.length&&(Et+="..."),Et+="</"+$.call(String(W.nodeName))+">",Et}if(at(W)){if(W.length===0)return"[]";var sr=Lt(W,gt);return Je&&!Pn(sr)?"["+St(sr,Je)+"]":"[ "+U.call(sr,", ")+" ]"}if(ze(W)){var Gr=Lt(W,gt);return!("cause"in Error.prototype)&&"cause"in W&&!Z.call(W,"cause")?"{ ["+String(W)+"] "+U.call(o.call("[cause]: "+gt(W.cause),Gr),", ")+" }":Gr.length===0?"["+String(W)+"]":"{ ["+String(W)+"] "+U.call(Gr,", ")+" }"}if(typeof W=="object"&&ht){if(be&&typeof W[be]=="function"&&se)return se(W,{depth:ft-Ne});if(ht!=="symbol"&&typeof W.inspect=="function")return W.inspect()}if(Xt(W)){var jn=[];return i&&i.call(W,function(Jt,or){jn.push(gt(or,W,!0)+" => "+gt(Jt,W))}),zr("Map",r.call(W),jn,Je)}if(Ot(W)){var qn=[];return h&&h.call(W,function(Jt){qn.push(gt(Jt,W))}),zr("Set",f.call(W),qn,Je)}if(Tt(W))return Wr("WeakMap");if(It(W))return Wr("WeakSet");if(st(W))return Wr("WeakRef");if(Me(W))return xr(gt(Number(W)));if(et(W))return xr(gt(O.call(W)));if(Ae(W))return xr(k.call(W));if(ce(W))return xr(gt(String(W)));if(typeof window<"u"&&W===window)return"{ [object Window] }";if(typeof globalThis<"u"&&W===globalThis||typeof Gi<"u"&&W===Gi)return"{ [object globalThis] }";if(!lt(W)&&!it(W)){var Dr=Lt(W,gt),Nn=ee?ee(W)===Object.prototype:W instanceof Object||W.constructor===Object,Kr=W instanceof Object?"":"null prototype",Vr=!Nn&&H&&Object(W)===W&&H in W?C.call(tt(W),8,-1):Kr?"Object":"",bi=Nn||typeof W.constructor!="function"?"":W.constructor.name?W.constructor.name+" ":"",qt=bi+(Vr||Kr?"["+U.call(o.call([],Vr||[],Kr||[]),": ")+"] ":"");return Dr.length===0?qt+"{}":Je?qt+"{"+St(Dr,Je)+"}":qt+"{ "+U.call(Dr,", ")+" }"}return String(W)};function Be(q,W,Ie){var Ne=Ie.quoteStyle||W,We=De[Ne];return We+q+We}function Ke(q){return E.call(String(q),/"/g,"&quot;")}function at(q){return tt(q)==="[object Array]"&&(!H||!(typeof q=="object"&&H in q))}function lt(q){return tt(q)==="[object Date]"&&(!H||!(typeof q=="object"&&H in q))}function it(q){return tt(q)==="[object RegExp]"&&(!H||!(typeof q=="object"&&H in q))}function ze(q){return tt(q)==="[object Error]"&&(!H||!(typeof q=="object"&&H in q))}function ce(q){return tt(q)==="[object String]"&&(!H||!(typeof q=="object"&&H in q))}function Me(q){return tt(q)==="[object Number]"&&(!H||!(typeof q=="object"&&H in q))}function Ae(q){return tt(q)==="[object Boolean]"&&(!H||!(typeof q=="object"&&H in q))}function je(q){if(K)return q&&typeof q=="object"&&q instanceof Symbol;if(typeof q=="symbol")return!0;if(!q||typeof q!="object"||!G)return!1;try{return G.call(q),!0}catch{}return!1}function et(q){if(!q||typeof q!="object"||!O)return!1;try{return O.call(q),!0}catch{}return!1}var vt=Object.prototype.hasOwnProperty||function(q){return q in this};function He(q,W){return vt.call(q,W)}function tt(q){return x.call(q)}function pt(q){if(q.name)return q.name;var W=m.call(y.call(q),/^function\s*([\w$]+)/);return W?W[1]:null}function Vt(q,W){if(q.indexOf)return q.indexOf(W);for(var Ie=0,Ne=q.length;Ie<Ne;Ie++)if(q[Ie]===W)return Ie;return-1}function Xt(q){if(!r||!q||typeof q!="object")return!1;try{r.call(q);try{f.call(q)}catch{return!0}return q instanceof Map}catch{}return!1}function Tt(q){if(!g||!q||typeof q!="object")return!1;try{g.call(q,g);try{S.call(q,S)}catch{return!0}return q instanceof WeakMap}catch{}return!1}function st(q){if(!A||!q||typeof q!="object")return!1;try{return A.call(q),!0}catch{}return!1}function Ot(q){if(!f||!q||typeof q!="object")return!1;try{f.call(q);try{r.call(q)}catch{return!0}return q instanceof Set}catch{}return!1}function It(q){if(!S||!q||typeof q!="object")return!1;try{S.call(q,S);try{g.call(q,g)}catch{return!0}return q instanceof WeakSet}catch{}return!1}function le(q){return!q||typeof q!="object"?!1:typeof HTMLElement<"u"&&q instanceof HTMLElement?!0:typeof q.nodeName=="string"&&typeof q.getAttribute=="function"}function ot(q,W){if(q.length>W.maxStringLength){var Ie=q.length-W.maxStringLength,Ne="... "+Ie+" more character"+(Ie>1?"s":"");return ot(C.call(q,0,W.maxStringLength),W)+Ne}var We=Pe[W.quoteStyle||"single"];We.lastIndex=0;var Te=E.call(E.call(q,We,"\\$1"),/[\x00-\x1f]/g,xi);return Be(Te,"single",W)}function xi(q){var W=q.charCodeAt(0),Ie={8:"b",9:"t",10:"n",12:"f",13:"r"}[W];return Ie?"\\"+Ie:"\\x"+(W<16?"0":"")+R.call(W.toString(16))}function xr(q){return"Object("+q+")"}function Wr(q){return q+" { ? }"}function zr(q,W,Ie,Ne){var We=Ne?St(Ie,Ne):U.call(Ie,", ");return q+" ("+W+") {"+We+"}"}function Pn(q){for(var W=0;W<q.length;W++)if(Vt(q[W],`
`)>=0)return!1;return!0}function br(q,W){var Ie;if(q.indent==="	")Ie="	";else if(typeof q.indent=="number"&&q.indent>0)Ie=U.call(Array(q.indent+1)," ");else return null;return{base:Ie,prev:U.call(Array(W+1),Ie)}}function St(q,W){if(q.length===0)return"";var Ie=`
`+W.prev+W.base;return Ie+U.call(q,","+Ie)+`
`+W.prev}function Lt(q,W){var Ie=at(q),Ne=[];if(Ie){Ne.length=q.length;for(var We=0;We<q.length;We++)Ne[We]=He(q,We)?W(q[We],q):""}var Te=typeof F=="function"?F(q):[],ht;if(K){ht={};for(var At=0;At<Te.length;At++)ht["$"+Te[At]]=Te[At]}for(var ct in q)He(q,ct)&&(Ie&&String(Number(ct))===ct&&ct<q.length||K&&ht["$"+ct]instanceof Symbol||(D.call(/[^\w$]/,ct)?Ne.push(W(ct,q)+": "+W(q[ct],q)):Ne.push(ct+": "+W(q[ct],q))));if(typeof F=="function")for(var Rt=0;Rt<Te.length;Rt++)Z.call(q,Te[Rt])&&Ne.push("["+W(Te[Rt])+"]: "+W(q[Te[Rt]],q));return Ne}return ha}var ga,Us;function kp(){if(Us)return ga;Us=1;var n=bn(),t=Er(),r=function(h,w,g){for(var b=h,S;(S=b.next)!=null;b=S)if(S.key===w)return b.next=S.next,g||(S.next=h.next,h.next=S),S},i=function(h,w){if(h){var g=r(h,w);return g&&g.value}},u=function(h,w,g){var b=r(h,w);b?b.value=g:h.next={key:w,next:h.next,value:g}},c=function(h,w){return h?!!r(h,w):!1},f=function(h,w){if(h)return r(h,w,!0)};return ga=function(){var w,g={assert:function(b){if(!g.has(b))throw new t("Side channel does not contain "+n(b))},delete:function(b){var S=w&&w.next,T=f(w,b);return T&&S&&S===T&&(w=void 0),!!T},get:function(b){return i(w,b)},has:function(b){return c(w,b)},set:function(b,S){w||(w={next:void 0}),u(w,b,S)}};return g},ga}var ma,Bs;function Hs(){return Bs||(Bs=1,ma=Object),ma}var ya,Ws;function Op(){return Ws||(Ws=1,ya=Error),ya}var wa,zs;function Ip(){return zs||(zs=1,wa=EvalError),wa}var va,Ys;function Lp(){return Ys||(Ys=1,va=RangeError),va}var xa,Qs;function Ep(){return Qs||(Qs=1,xa=ReferenceError),xa}var ba,Gs;function Dp(){return Gs||(Gs=1,ba=SyntaxError),ba}var Ta,Ks;function _p(){return Ks||(Ks=1,Ta=URIError),Ta}var Sa,Vs;function Rp(){return Vs||(Vs=1,Sa=Math.abs),Sa}var Aa,Xs;function Mp(){return Xs||(Xs=1,Aa=Math.floor),Aa}var Ca,Js;function Pp(){return Js||(Js=1,Ca=Math.max),Ca}var ka,Zs;function $p(){return Zs||(Zs=1,ka=Math.min),ka}var Oa,eo;function jp(){return eo||(eo=1,Oa=Math.pow),Oa}var Ia,to;function qp(){return to||(to=1,Ia=Math.round),Ia}var La,ro;function Np(){return ro||(ro=1,La=Number.isNaN||function(t){return t!==t}),La}var Ea,no;function Fp(){if(no)return Ea;no=1;var n=Np();return Ea=function(r){return n(r)||r===0?r:r<0?-1:1},Ea}var Da,ao;function Up(){return ao||(ao=1,Da=Object.getOwnPropertyDescriptor),Da}var _a,io;function so(){if(io)return _a;io=1;var n=Up();if(n)try{n([],"length")}catch{n=null}return _a=n,_a}var Ra,oo;function Bp(){if(oo)return Ra;oo=1;var n=Object.defineProperty||!1;if(n)try{n({},"a",{value:1})}catch{n=!1}return Ra=n,Ra}var Ma,uo;function Hp(){return uo||(uo=1,Ma=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},r=Symbol("test"),i=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var u=42;t[r]=u;for(var c in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var f=Object.getOwnPropertySymbols(t);if(f.length!==1||f[0]!==r||!Object.prototype.propertyIsEnumerable.call(t,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var h=Object.getOwnPropertyDescriptor(t,r);if(h.value!==u||h.enumerable!==!0)return!1}return!0}),Ma}var Pa,lo;function Wp(){if(lo)return Pa;lo=1;var n=typeof Symbol<"u"&&Symbol,t=Hp();return Pa=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},Pa}var $a,co;function fo(){return co||(co=1,$a=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),$a}var ja,po;function ho(){if(po)return ja;po=1;var n=Hs();return ja=n.getPrototypeOf||null,ja}var qa,go;function zp(){if(go)return qa;go=1;var n="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,r=Math.max,i="[object Function]",u=function(w,g){for(var b=[],S=0;S<w.length;S+=1)b[S]=w[S];for(var T=0;T<g.length;T+=1)b[T+w.length]=g[T];return b},c=function(w,g){for(var b=[],S=g,T=0;S<w.length;S+=1,T+=1)b[T]=w[S];return b},f=function(h,w){for(var g="",b=0;b<h.length;b+=1)g+=h[b],b+1<h.length&&(g+=w);return g};return qa=function(w){var g=this;if(typeof g!="function"||t.apply(g)!==i)throw new TypeError(n+g);for(var b=c(arguments,1),S,T=function(){if(this instanceof S){var m=g.apply(this,u(b,arguments));return Object(m)===m?m:this}return g.apply(w,u(b,arguments))},A=r(0,g.length-b.length),k=[],x=0;x<A;x++)k[x]="$"+x;if(S=Function("binder","return function ("+f(k,",")+"){ return binder.apply(this,arguments); }")(T),g.prototype){var y=function(){};y.prototype=g.prototype,S.prototype=new y,y.prototype=null}return S},qa}var Na,mo;function Tn(){if(mo)return Na;mo=1;var n=zp();return Na=Function.prototype.bind||n,Na}var Fa,yo;function Ua(){return yo||(yo=1,Fa=Function.prototype.call),Fa}var Ba,wo;function vo(){return wo||(wo=1,Ba=Function.prototype.apply),Ba}var Ha,xo;function Yp(){return xo||(xo=1,Ha=typeof Reflect<"u"&&Reflect&&Reflect.apply),Ha}var Wa,bo;function Qp(){if(bo)return Wa;bo=1;var n=Tn(),t=vo(),r=Ua(),i=Yp();return Wa=i||n.call(r,t),Wa}var za,To;function So(){if(To)return za;To=1;var n=Tn(),t=Er(),r=Ua(),i=Qp();return za=function(c){if(c.length<1||typeof c[0]!="function")throw new t("a function is required");return i(n,r,c)},za}var Ya,Ao;function Gp(){if(Ao)return Ya;Ao=1;var n=So(),t=so(),r;try{r=[].__proto__===Array.prototype}catch(f){if(!f||typeof f!="object"||!("code"in f)||f.code!=="ERR_PROTO_ACCESS")throw f}var i=!!r&&t&&t(Object.prototype,"__proto__"),u=Object,c=u.getPrototypeOf;return Ya=i&&typeof i.get=="function"?n([i.get]):typeof c=="function"?function(h){return c(h==null?h:u(h))}:!1,Ya}var Qa,Co;function Kp(){if(Co)return Qa;Co=1;var n=fo(),t=ho(),r=Gp();return Qa=n?function(u){return n(u)}:t?function(u){if(!u||typeof u!="object"&&typeof u!="function")throw new TypeError("getProto: not an object");return t(u)}:r?function(u){return r(u)}:null,Qa}var Ga,ko;function Vp(){if(ko)return Ga;ko=1;var n=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=Tn();return Ga=r.call(n,t),Ga}var Ka,Oo;function Va(){if(Oo)return Ka;Oo=1;var n,t=Hs(),r=Op(),i=Ip(),u=Lp(),c=Ep(),f=Dp(),h=Er(),w=_p(),g=Rp(),b=Mp(),S=Pp(),T=$p(),A=jp(),k=qp(),x=Fp(),y=Function,m=function(ze){try{return y('"use strict"; return ('+ze+").constructor;")()}catch{}},C=so(),E=Bp(),R=function(){throw new h},$=C?function(){try{return arguments.callee,R}catch{try{return C(arguments,"callee").get}catch{return R}}}():R,D=Wp()(),o=Kp(),U=ho(),j=fo(),Y=vo(),O=Ua(),F={},G=typeof Uint8Array>"u"||!o?n:o(Uint8Array),K={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":D&&o?o([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":F,"%AsyncGenerator%":F,"%AsyncGeneratorFunction%":F,"%AsyncIteratorPrototype%":F,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":i,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":y,"%GeneratorFunction%":F,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":D&&o?o(o([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!D||!o?n:o(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":C,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":u,"%ReferenceError%":c,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!D||!o?n:o(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":D&&o?o(""[Symbol.iterator]()):n,"%Symbol%":D?Symbol:n,"%SyntaxError%":f,"%ThrowTypeError%":$,"%TypedArray%":G,"%TypeError%":h,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":w,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet,"%Function.prototype.call%":O,"%Function.prototype.apply%":Y,"%Object.defineProperty%":E,"%Object.getPrototypeOf%":U,"%Math.abs%":g,"%Math.floor%":b,"%Math.max%":S,"%Math.min%":T,"%Math.pow%":A,"%Math.round%":k,"%Math.sign%":x,"%Reflect.getPrototypeOf%":j};if(o)try{null.error}catch(ze){var H=o(o(ze));K["%Error.prototype%"]=H}var Z=function ze(ce){var Me;if(ce==="%AsyncFunction%")Me=m("async function () {}");else if(ce==="%GeneratorFunction%")Me=m("function* () {}");else if(ce==="%AsyncGeneratorFunction%")Me=m("async function* () {}");else if(ce==="%AsyncGenerator%"){var Ae=ze("%AsyncGeneratorFunction%");Ae&&(Me=Ae.prototype)}else if(ce==="%AsyncIteratorPrototype%"){var je=ze("%AsyncGenerator%");je&&o&&(Me=o(je.prototype))}return K[ce]=Me,Me},ee={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},J=Tn(),se=Vp(),oe=J.call(O,Array.prototype.concat),be=J.call(Y,Array.prototype.splice),De=J.call(O,String.prototype.replace),Pe=J.call(O,String.prototype.slice),Be=J.call(O,RegExp.prototype.exec),Ke=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,at=/\\(\\)?/g,lt=function(ce){var Me=Pe(ce,0,1),Ae=Pe(ce,-1);if(Me==="%"&&Ae!=="%")throw new f("invalid intrinsic syntax, expected closing `%`");if(Ae==="%"&&Me!=="%")throw new f("invalid intrinsic syntax, expected opening `%`");var je=[];return De(ce,Ke,function(et,vt,He,tt){je[je.length]=He?De(tt,at,"$1"):vt||et}),je},it=function(ce,Me){var Ae=ce,je;if(se(ee,Ae)&&(je=ee[Ae],Ae="%"+je[0]+"%"),se(K,Ae)){var et=K[Ae];if(et===F&&(et=Z(Ae)),typeof et>"u"&&!Me)throw new h("intrinsic "+ce+" exists, but is not available. Please file an issue!");return{alias:je,name:Ae,value:et}}throw new f("intrinsic "+ce+" does not exist!")};return Ka=function(ce,Me){if(typeof ce!="string"||ce.length===0)throw new h("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof Me!="boolean")throw new h('"allowMissing" argument must be a boolean');if(Be(/^%?[^%]*%?$/,ce)===null)throw new f("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var Ae=lt(ce),je=Ae.length>0?Ae[0]:"",et=it("%"+je+"%",Me),vt=et.name,He=et.value,tt=!1,pt=et.alias;pt&&(je=pt[0],be(Ae,oe([0,1],pt)));for(var Vt=1,Xt=!0;Vt<Ae.length;Vt+=1){var Tt=Ae[Vt],st=Pe(Tt,0,1),Ot=Pe(Tt,-1);if((st==='"'||st==="'"||st==="`"||Ot==='"'||Ot==="'"||Ot==="`")&&st!==Ot)throw new f("property names with quotes must have matching quotes");if((Tt==="constructor"||!Xt)&&(tt=!0),je+="."+Tt,vt="%"+je+"%",se(K,vt))He=K[vt];else if(He!=null){if(!(Tt in He)){if(!Me)throw new h("base intrinsic for "+ce+" exists, but the property is not available.");return}if(C&&Vt+1>=Ae.length){var It=C(He,Tt);Xt=!!It,Xt&&"get"in It&&!("originalValue"in It.get)?He=It.get:He=He[Tt]}else Xt=se(He,Tt),He=He[Tt];Xt&&!tt&&(K[vt]=He)}}return He},Ka}var Xa,Io;function Lo(){if(Io)return Xa;Io=1;var n=Va(),t=So(),r=t([n("%String.prototype.indexOf%")]);return Xa=function(u,c){var f=n(u,!!c);return typeof f=="function"&&r(u,".prototype.")>-1?t([f]):f},Xa}var Ja,Eo;function Do(){if(Eo)return Ja;Eo=1;var n=Va(),t=Lo(),r=bn(),i=Er(),u=n("%Map%",!0),c=t("Map.prototype.get",!0),f=t("Map.prototype.set",!0),h=t("Map.prototype.has",!0),w=t("Map.prototype.delete",!0),g=t("Map.prototype.size",!0);return Ja=!!u&&function(){var S,T={assert:function(A){if(!T.has(A))throw new i("Side channel does not contain "+r(A))},delete:function(A){if(S){var k=w(S,A);return g(S)===0&&(S=void 0),k}return!1},get:function(A){if(S)return c(S,A)},has:function(A){return S?h(S,A):!1},set:function(A,k){S||(S=new u),f(S,A,k)}};return T},Ja}var Za,_o;function Xp(){if(_o)return Za;_o=1;var n=Va(),t=Lo(),r=bn(),i=Do(),u=Er(),c=n("%WeakMap%",!0),f=t("WeakMap.prototype.get",!0),h=t("WeakMap.prototype.set",!0),w=t("WeakMap.prototype.has",!0),g=t("WeakMap.prototype.delete",!0);return Za=c?function(){var S,T,A={assert:function(k){if(!A.has(k))throw new u("Side channel does not contain "+r(k))},delete:function(k){if(c&&k&&(typeof k=="object"||typeof k=="function")){if(S)return g(S,k)}else if(i&&T)return T.delete(k);return!1},get:function(k){return c&&k&&(typeof k=="object"||typeof k=="function")&&S?f(S,k):T&&T.get(k)},has:function(k){return c&&k&&(typeof k=="object"||typeof k=="function")&&S?w(S,k):!!T&&T.has(k)},set:function(k,x){c&&k&&(typeof k=="object"||typeof k=="function")?(S||(S=new c),h(S,k,x)):i&&(T||(T=i()),T.set(k,x))}};return A}:i,Za}var ei,Ro;function Jp(){if(Ro)return ei;Ro=1;var n=Er(),t=bn(),r=kp(),i=Do(),u=Xp(),c=u||i||r;return ei=function(){var h,w={assert:function(g){if(!w.has(g))throw new n("Side channel does not contain "+t(g))},delete:function(g){return!!h&&h.delete(g)},get:function(g){return h&&h.get(g)},has:function(g){return!!h&&h.has(g)},set:function(g,b){h||(h=c()),h.set(g,b)}};return w},ei}var ti,Mo;function ri(){if(Mo)return ti;Mo=1;var n=String.prototype.replace,t=/%20/g,r={RFC1738:"RFC1738",RFC3986:"RFC3986"};return ti={default:r.RFC3986,formatters:{RFC1738:function(i){return n.call(i,t,"+")},RFC3986:function(i){return String(i)}},RFC1738:r.RFC1738,RFC3986:r.RFC3986},ti}var ni,Po;function $o(){if(Po)return ni;Po=1;var n=ri(),t=Object.prototype.hasOwnProperty,r=Array.isArray,i=function(){for(var y=[],m=0;m<256;++m)y.push("%"+((m<16?"0":"")+m.toString(16)).toUpperCase());return y}(),u=function(m){for(;m.length>1;){var C=m.pop(),E=C.obj[C.prop];if(r(E)){for(var R=[],$=0;$<E.length;++$)typeof E[$]<"u"&&R.push(E[$]);C.obj[C.prop]=R}}},c=function(m,C){for(var E=C&&C.plainObjects?{__proto__:null}:{},R=0;R<m.length;++R)typeof m[R]<"u"&&(E[R]=m[R]);return E},f=function y(m,C,E){if(!C)return m;if(typeof C!="object"&&typeof C!="function"){if(r(m))m.push(C);else if(m&&typeof m=="object")(E&&(E.plainObjects||E.allowPrototypes)||!t.call(Object.prototype,C))&&(m[C]=!0);else return[m,C];return m}if(!m||typeof m!="object")return[m].concat(C);var R=m;return r(m)&&!r(C)&&(R=c(m,E)),r(m)&&r(C)?(C.forEach(function($,D){if(t.call(m,D)){var o=m[D];o&&typeof o=="object"&&$&&typeof $=="object"?m[D]=y(o,$,E):m.push($)}else m[D]=$}),m):Object.keys(C).reduce(function($,D){var o=C[D];return t.call($,D)?$[D]=y($[D],o,E):$[D]=o,$},R)},h=function(m,C){return Object.keys(C).reduce(function(E,R){return E[R]=C[R],E},m)},w=function(y,m,C){var E=y.replace(/\+/g," ");if(C==="iso-8859-1")return E.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(E)}catch{return E}},g=1024,b=function(m,C,E,R,$){if(m.length===0)return m;var D=m;if(typeof m=="symbol"?D=Symbol.prototype.toString.call(m):typeof m!="string"&&(D=String(m)),E==="iso-8859-1")return escape(D).replace(/%u[0-9a-f]{4}/gi,function(G){return"%26%23"+parseInt(G.slice(2),16)+"%3B"});for(var o="",U=0;U<D.length;U+=g){for(var j=D.length>=g?D.slice(U,U+g):D,Y=[],O=0;O<j.length;++O){var F=j.charCodeAt(O);if(F===45||F===46||F===95||F===126||F>=48&&F<=57||F>=65&&F<=90||F>=97&&F<=122||$===n.RFC1738&&(F===40||F===41)){Y[Y.length]=j.charAt(O);continue}if(F<128){Y[Y.length]=i[F];continue}if(F<2048){Y[Y.length]=i[192|F>>6]+i[128|F&63];continue}if(F<55296||F>=57344){Y[Y.length]=i[224|F>>12]+i[128|F>>6&63]+i[128|F&63];continue}O+=1,F=65536+((F&1023)<<10|j.charCodeAt(O)&1023),Y[Y.length]=i[240|F>>18]+i[128|F>>12&63]+i[128|F>>6&63]+i[128|F&63]}o+=Y.join("")}return o},S=function(m){for(var C=[{obj:{o:m},prop:"o"}],E=[],R=0;R<C.length;++R)for(var $=C[R],D=$.obj[$.prop],o=Object.keys(D),U=0;U<o.length;++U){var j=o[U],Y=D[j];typeof Y=="object"&&Y!==null&&E.indexOf(Y)===-1&&(C.push({obj:D,prop:j}),E.push(Y))}return u(C),m},T=function(m){return Object.prototype.toString.call(m)==="[object RegExp]"},A=function(m){return!m||typeof m!="object"?!1:!!(m.constructor&&m.constructor.isBuffer&&m.constructor.isBuffer(m))},k=function(m,C){return[].concat(m,C)},x=function(m,C){if(r(m)){for(var E=[],R=0;R<m.length;R+=1)E.push(C(m[R]));return E}return C(m)};return ni={arrayToObject:c,assign:h,combine:k,compact:S,decode:w,encode:b,isBuffer:A,isRegExp:T,maybeMap:x,merge:f},ni}var ai,jo;function Zp(){if(jo)return ai;jo=1;var n=Jp(),t=$o(),r=ri(),i=Object.prototype.hasOwnProperty,u={brackets:function(y){return y+"[]"},comma:"comma",indices:function(y,m){return y+"["+m+"]"},repeat:function(y){return y}},c=Array.isArray,f=Array.prototype.push,h=function(x,y){f.apply(x,c(y)?y:[y])},w=Date.prototype.toISOString,g=r.default,b={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:t.encode,encodeValuesOnly:!1,filter:void 0,format:g,formatter:r.formatters[g],indices:!1,serializeDate:function(y){return w.call(y)},skipNulls:!1,strictNullHandling:!1},S=function(y){return typeof y=="string"||typeof y=="number"||typeof y=="boolean"||typeof y=="symbol"||typeof y=="bigint"},T={},A=function x(y,m,C,E,R,$,D,o,U,j,Y,O,F,G,K,H,Z,ee){for(var J=y,se=ee,oe=0,be=!1;(se=se.get(T))!==void 0&&!be;){var De=se.get(y);if(oe+=1,typeof De<"u"){if(De===oe)throw new RangeError("Cyclic object value");be=!0}typeof se.get(T)>"u"&&(oe=0)}if(typeof j=="function"?J=j(m,J):J instanceof Date?J=F(J):C==="comma"&&c(J)&&(J=t.maybeMap(J,function(vt){return vt instanceof Date?F(vt):vt})),J===null){if($)return U&&!H?U(m,b.encoder,Z,"key",G):m;J=""}if(S(J)||t.isBuffer(J)){if(U){var Pe=H?m:U(m,b.encoder,Z,"key",G);return[K(Pe)+"="+K(U(J,b.encoder,Z,"value",G))]}return[K(m)+"="+K(String(J))]}var Be=[];if(typeof J>"u")return Be;var Ke;if(C==="comma"&&c(J))H&&U&&(J=t.maybeMap(J,U)),Ke=[{value:J.length>0?J.join(",")||null:void 0}];else if(c(j))Ke=j;else{var at=Object.keys(J);Ke=Y?at.sort(Y):at}var lt=o?String(m).replace(/\./g,"%2E"):String(m),it=E&&c(J)&&J.length===1?lt+"[]":lt;if(R&&c(J)&&J.length===0)return it+"[]";for(var ze=0;ze<Ke.length;++ze){var ce=Ke[ze],Me=typeof ce=="object"&&ce&&typeof ce.value<"u"?ce.value:J[ce];if(!(D&&Me===null)){var Ae=O&&o?String(ce).replace(/\./g,"%2E"):String(ce),je=c(J)?typeof C=="function"?C(it,Ae):it:it+(O?"."+Ae:"["+Ae+"]");ee.set(y,oe);var et=n();et.set(T,ee),h(Be,x(Me,je,C,E,R,$,D,o,C==="comma"&&H&&c(J)?null:U,j,Y,O,F,G,K,H,Z,et))}}return Be},k=function(y){if(!y)return b;if(typeof y.allowEmptyArrays<"u"&&typeof y.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof y.encodeDotInKeys<"u"&&typeof y.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(y.encoder!==null&&typeof y.encoder<"u"&&typeof y.encoder!="function")throw new TypeError("Encoder has to be a function.");var m=y.charset||b.charset;if(typeof y.charset<"u"&&y.charset!=="utf-8"&&y.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var C=r.default;if(typeof y.format<"u"){if(!i.call(r.formatters,y.format))throw new TypeError("Unknown format option provided.");C=y.format}var E=r.formatters[C],R=b.filter;(typeof y.filter=="function"||c(y.filter))&&(R=y.filter);var $;if(y.arrayFormat in u?$=y.arrayFormat:"indices"in y?$=y.indices?"indices":"repeat":$=b.arrayFormat,"commaRoundTrip"in y&&typeof y.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var D=typeof y.allowDots>"u"?y.encodeDotInKeys===!0?!0:b.allowDots:!!y.allowDots;return{addQueryPrefix:typeof y.addQueryPrefix=="boolean"?y.addQueryPrefix:b.addQueryPrefix,allowDots:D,allowEmptyArrays:typeof y.allowEmptyArrays=="boolean"?!!y.allowEmptyArrays:b.allowEmptyArrays,arrayFormat:$,charset:m,charsetSentinel:typeof y.charsetSentinel=="boolean"?y.charsetSentinel:b.charsetSentinel,commaRoundTrip:!!y.commaRoundTrip,delimiter:typeof y.delimiter>"u"?b.delimiter:y.delimiter,encode:typeof y.encode=="boolean"?y.encode:b.encode,encodeDotInKeys:typeof y.encodeDotInKeys=="boolean"?y.encodeDotInKeys:b.encodeDotInKeys,encoder:typeof y.encoder=="function"?y.encoder:b.encoder,encodeValuesOnly:typeof y.encodeValuesOnly=="boolean"?y.encodeValuesOnly:b.encodeValuesOnly,filter:R,format:C,formatter:E,serializeDate:typeof y.serializeDate=="function"?y.serializeDate:b.serializeDate,skipNulls:typeof y.skipNulls=="boolean"?y.skipNulls:b.skipNulls,sort:typeof y.sort=="function"?y.sort:null,strictNullHandling:typeof y.strictNullHandling=="boolean"?y.strictNullHandling:b.strictNullHandling}};return ai=function(x,y){var m=x,C=k(y),E,R;typeof C.filter=="function"?(R=C.filter,m=R("",m)):c(C.filter)&&(R=C.filter,E=R);var $=[];if(typeof m!="object"||m===null)return"";var D=u[C.arrayFormat],o=D==="comma"&&C.commaRoundTrip;E||(E=Object.keys(m)),C.sort&&E.sort(C.sort);for(var U=n(),j=0;j<E.length;++j){var Y=E[j],O=m[Y];C.skipNulls&&O===null||h($,A(O,Y,D,o,C.allowEmptyArrays,C.strictNullHandling,C.skipNulls,C.encodeDotInKeys,C.encode?C.encoder:null,C.filter,C.sort,C.allowDots,C.serializeDate,C.format,C.formatter,C.encodeValuesOnly,C.charset,U))}var F=$.join(C.delimiter),G=C.addQueryPrefix===!0?"?":"";return C.charsetSentinel&&(C.charset==="iso-8859-1"?G+="utf8=%26%2310003%3B&":G+="utf8=%E2%9C%93&"),F.length>0?G+F:""},ai}var ii,qo;function eh(){if(qo)return ii;qo=1;var n=$o(),t=Object.prototype.hasOwnProperty,r=Array.isArray,i={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:n.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1},u=function(T){return T.replace(/&#(\d+);/g,function(A,k){return String.fromCharCode(parseInt(k,10))})},c=function(T,A){return T&&typeof T=="string"&&A.comma&&T.indexOf(",")>-1?T.split(","):T},f="utf8=%26%2310003%3B",h="utf8=%E2%9C%93",w=function(A,k){var x={__proto__:null},y=k.ignoreQueryPrefix?A.replace(/^\?/,""):A;y=y.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var m=k.parameterLimit===1/0?void 0:k.parameterLimit,C=y.split(k.delimiter,m),E=-1,R,$=k.charset;if(k.charsetSentinel)for(R=0;R<C.length;++R)C[R].indexOf("utf8=")===0&&(C[R]===h?$="utf-8":C[R]===f&&($="iso-8859-1"),E=R,R=C.length);for(R=0;R<C.length;++R)if(R!==E){var D=C[R],o=D.indexOf("]="),U=o===-1?D.indexOf("="):o+1,j,Y;U===-1?(j=k.decoder(D,i.decoder,$,"key"),Y=k.strictNullHandling?null:""):(j=k.decoder(D.slice(0,U),i.decoder,$,"key"),Y=n.maybeMap(c(D.slice(U+1),k),function(F){return k.decoder(F,i.decoder,$,"value")})),Y&&k.interpretNumericEntities&&$==="iso-8859-1"&&(Y=u(String(Y))),D.indexOf("[]=")>-1&&(Y=r(Y)?[Y]:Y);var O=t.call(x,j);O&&k.duplicates==="combine"?x[j]=n.combine(x[j],Y):(!O||k.duplicates==="last")&&(x[j]=Y)}return x},g=function(T,A,k,x){for(var y=x?A:c(A,k),m=T.length-1;m>=0;--m){var C,E=T[m];if(E==="[]"&&k.parseArrays)C=k.allowEmptyArrays&&(y===""||k.strictNullHandling&&y===null)?[]:[].concat(y);else{C=k.plainObjects?{__proto__:null}:{};var R=E.charAt(0)==="["&&E.charAt(E.length-1)==="]"?E.slice(1,-1):E,$=k.decodeDotInKeys?R.replace(/%2E/g,"."):R,D=parseInt($,10);!k.parseArrays&&$===""?C={0:y}:!isNaN(D)&&E!==$&&String(D)===$&&D>=0&&k.parseArrays&&D<=k.arrayLimit?(C=[],C[D]=y):$!=="__proto__"&&(C[$]=y)}y=C}return y},b=function(A,k,x,y){if(A){var m=x.allowDots?A.replace(/\.([^.[]+)/g,"[$1]"):A,C=/(\[[^[\]]*])/,E=/(\[[^[\]]*])/g,R=x.depth>0&&C.exec(m),$=R?m.slice(0,R.index):m,D=[];if($){if(!x.plainObjects&&t.call(Object.prototype,$)&&!x.allowPrototypes)return;D.push($)}for(var o=0;x.depth>0&&(R=E.exec(m))!==null&&o<x.depth;){if(o+=1,!x.plainObjects&&t.call(Object.prototype,R[1].slice(1,-1))&&!x.allowPrototypes)return;D.push(R[1])}if(R){if(x.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+x.depth+" and strictDepth is true");D.push("["+m.slice(R.index)+"]")}return g(D,k,x,y)}},S=function(A){if(!A)return i;if(typeof A.allowEmptyArrays<"u"&&typeof A.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof A.decodeDotInKeys<"u"&&typeof A.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(A.decoder!==null&&typeof A.decoder<"u"&&typeof A.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof A.charset<"u"&&A.charset!=="utf-8"&&A.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var k=typeof A.charset>"u"?i.charset:A.charset,x=typeof A.duplicates>"u"?i.duplicates:A.duplicates;if(x!=="combine"&&x!=="first"&&x!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var y=typeof A.allowDots>"u"?A.decodeDotInKeys===!0?!0:i.allowDots:!!A.allowDots;return{allowDots:y,allowEmptyArrays:typeof A.allowEmptyArrays=="boolean"?!!A.allowEmptyArrays:i.allowEmptyArrays,allowPrototypes:typeof A.allowPrototypes=="boolean"?A.allowPrototypes:i.allowPrototypes,allowSparse:typeof A.allowSparse=="boolean"?A.allowSparse:i.allowSparse,arrayLimit:typeof A.arrayLimit=="number"?A.arrayLimit:i.arrayLimit,charset:k,charsetSentinel:typeof A.charsetSentinel=="boolean"?A.charsetSentinel:i.charsetSentinel,comma:typeof A.comma=="boolean"?A.comma:i.comma,decodeDotInKeys:typeof A.decodeDotInKeys=="boolean"?A.decodeDotInKeys:i.decodeDotInKeys,decoder:typeof A.decoder=="function"?A.decoder:i.decoder,delimiter:typeof A.delimiter=="string"||n.isRegExp(A.delimiter)?A.delimiter:i.delimiter,depth:typeof A.depth=="number"||A.depth===!1?+A.depth:i.depth,duplicates:x,ignoreQueryPrefix:A.ignoreQueryPrefix===!0,interpretNumericEntities:typeof A.interpretNumericEntities=="boolean"?A.interpretNumericEntities:i.interpretNumericEntities,parameterLimit:typeof A.parameterLimit=="number"?A.parameterLimit:i.parameterLimit,parseArrays:A.parseArrays!==!1,plainObjects:typeof A.plainObjects=="boolean"?A.plainObjects:i.plainObjects,strictDepth:typeof A.strictDepth=="boolean"?!!A.strictDepth:i.strictDepth,strictNullHandling:typeof A.strictNullHandling=="boolean"?A.strictNullHandling:i.strictNullHandling}};return ii=function(T,A){var k=S(A);if(T===""||T===null||typeof T>"u")return k.plainObjects?{__proto__:null}:{};for(var x=typeof T=="string"?w(T,k):T,y=k.plainObjects?{__proto__:null}:{},m=Object.keys(x),C=0;C<m.length;++C){var E=m[C],R=b(E,x[E],k,typeof T=="string");y=n.merge(y,R,k)}return k.allowSparse===!0?y:n.compact(y)},ii}var si,No;function th(){if(No)return si;No=1;var n=Zp(),t=eh(),r=ri();return si={formats:r,parse:t,stringify:n},si}var rh=th();const nh=Vn(rh);function ah(n,t="https://kuajing-plw.happyporsche.com"){return Ap(n)?n:`${t}${n}`}async function mr(n){const{url:t,method:r="GET",dataType:i="json",params:u,body:c=null,baseUrl:f,...h}=n,w=ah(t,f),g=u?`${w}?${new URLSearchParams(u).toString()}`:w,b={...h,body:c,method:r};return await fetch(g,b).then(T=>i==="json"?T.json():sh(T))}const ih=5*60*1e3;async function de(n){const{data:t,headers:r,dataType:i="json",...u}=n,{cacheKey:c,cacheMaxAge:f}=n,h=Date.now();if(c){const g=await qe.getItem(c);if(g&&g.expireTime>h)return g.res}const w=await mr({...u,dataType:i,body:t&&nh.stringify(t),headers:{"content-type":"application/x-www-form-urlencoded; charset=UTF-8",...r}});if(c){const b={expireTime:h+(f||ih),res:w};qe.setItem(c,b)}if(w.result==="success")return w;throw w}async function sh(n){var t;return(t=n.headers.get("Content-Type"))!=null&&t.includes("GBK")?n.blob().then(r=>{const{promise:i,resolve:u,reject:c}=Sp(),f=new FileReader;return f.onload=()=>{u(f.result)},f.onerror=h=>{c(h)},f.readAsText(r,"GBK"),i}):await n.text()}var Sn={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */var oh=Sn.exports,Fo;function uh(){return Fo||(Fo=1,function(n){(function(t,r){n.exports=t.document?r(t,!0):function(i){if(!i.document)throw new Error("jQuery requires a window with a document");return r(i)}})(typeof window<"u"?window:oh,function(t,r){var i=[],u=Object.getPrototypeOf,c=i.slice,f=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},h=i.push,w=i.indexOf,g={},b=g.toString,S=g.hasOwnProperty,T=S.toString,A=T.call(Object),k={},x=function(a){return typeof a=="function"&&typeof a.nodeType!="number"&&typeof a.item!="function"},y=function(a){return a!=null&&a===a.window},m=t.document,C={type:!0,src:!0,nonce:!0,noModule:!0};function E(e,a,s){s=s||m;var l,d,p=s.createElement("script");if(p.text=e,a)for(l in C)d=a[l]||a.getAttribute&&a.getAttribute(l),d&&p.setAttribute(l,d);s.head.appendChild(p).parentNode.removeChild(p)}function R(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?g[b.call(e)]||"object":typeof e}var $="3.7.1",D=/HTML$/i,o=function(e,a){return new o.fn.init(e,a)};o.fn=o.prototype={jquery:$,constructor:o,length:0,toArray:function(){return c.call(this)},get:function(e){return e==null?c.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var a=o.merge(this.constructor(),e);return a.prevObject=this,a},each:function(e){return o.each(this,e)},map:function(e){return this.pushStack(o.map(this,function(a,s){return e.call(a,s,a)}))},slice:function(){return this.pushStack(c.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(o.grep(this,function(e,a){return(a+1)%2}))},odd:function(){return this.pushStack(o.grep(this,function(e,a){return a%2}))},eq:function(e){var a=this.length,s=+e+(e<0?a:0);return this.pushStack(s>=0&&s<a?[this[s]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:i.sort,splice:i.splice},o.extend=o.fn.extend=function(){var e,a,s,l,d,p,v=arguments[0]||{},_=1,L=arguments.length,P=!1;for(typeof v=="boolean"&&(P=v,v=arguments[_]||{},_++),typeof v!="object"&&!x(v)&&(v={}),_===L&&(v=this,_--);_<L;_++)if((e=arguments[_])!=null)for(a in e)l=e[a],!(a==="__proto__"||v===l)&&(P&&l&&(o.isPlainObject(l)||(d=Array.isArray(l)))?(s=v[a],d&&!Array.isArray(s)?p=[]:!d&&!o.isPlainObject(s)?p={}:p=s,d=!1,v[a]=o.extend(P,p,l)):l!==void 0&&(v[a]=l));return v},o.extend({expando:"jQuery"+($+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var a,s;return!e||b.call(e)!=="[object Object]"?!1:(a=u(e),a?(s=S.call(a,"constructor")&&a.constructor,typeof s=="function"&&T.call(s)===A):!0)},isEmptyObject:function(e){var a;for(a in e)return!1;return!0},globalEval:function(e,a,s){E(e,{nonce:a&&a.nonce},s)},each:function(e,a){var s,l=0;if(U(e))for(s=e.length;l<s&&a.call(e[l],l,e[l])!==!1;l++);else for(l in e)if(a.call(e[l],l,e[l])===!1)break;return e},text:function(e){var a,s="",l=0,d=e.nodeType;if(!d)for(;a=e[l++];)s+=o.text(a);return d===1||d===11?e.textContent:d===9?e.documentElement.textContent:d===3||d===4?e.nodeValue:s},makeArray:function(e,a){var s=a||[];return e!=null&&(U(Object(e))?o.merge(s,typeof e=="string"?[e]:e):h.call(s,e)),s},inArray:function(e,a,s){return a==null?-1:w.call(a,e,s)},isXMLDoc:function(e){var a=e&&e.namespaceURI,s=e&&(e.ownerDocument||e).documentElement;return!D.test(a||s&&s.nodeName||"HTML")},merge:function(e,a){for(var s=+a.length,l=0,d=e.length;l<s;l++)e[d++]=a[l];return e.length=d,e},grep:function(e,a,s){for(var l,d=[],p=0,v=e.length,_=!s;p<v;p++)l=!a(e[p],p),l!==_&&d.push(e[p]);return d},map:function(e,a,s){var l,d,p=0,v=[];if(U(e))for(l=e.length;p<l;p++)d=a(e[p],p,s),d!=null&&v.push(d);else for(p in e)d=a(e[p],p,s),d!=null&&v.push(d);return f(v)},guid:1,support:k}),typeof Symbol=="function"&&(o.fn[Symbol.iterator]=i[Symbol.iterator]),o.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,a){g["[object "+a+"]"]=a.toLowerCase()});function U(e){var a=!!e&&"length"in e&&e.length,s=R(e);return x(e)||y(e)?!1:s==="array"||a===0||typeof a=="number"&&a>0&&a-1 in e}function j(e,a){return e.nodeName&&e.nodeName.toLowerCase()===a.toLowerCase()}var Y=i.pop,O=i.sort,F=i.splice,G="[\\x20\\t\\r\\n\\f]",K=new RegExp("^"+G+"+|((?:^|[^\\\\])(?:\\\\.)*)"+G+"+$","g");o.contains=function(e,a){var s=a&&a.parentNode;return e===s||!!(s&&s.nodeType===1&&(e.contains?e.contains(s):e.compareDocumentPosition&&e.compareDocumentPosition(s)&16))};var H=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Z(e,a){return a?e==="\0"?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}o.escapeSelector=function(e){return(e+"").replace(H,Z)};var ee=m,J=h;(function(){var e,a,s,l,d,p=J,v,_,L,P,Q,X=o.expando,B=0,te=0,ye=Bn(),Ee=Bn(),Se=Bn(),ut=Bn(),Ze=function(I,M){return I===M&&(d=!0),0},Nt="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ft="(?:\\\\[\\da-fA-F]{1,6}"+G+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Le="\\["+G+"*("+Ft+")(?:"+G+"*([*^$|!~]?=)"+G+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Ft+"))|)"+G+"*\\]",Cr=":("+Ft+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+Le+")*)|.*)\\)|)",_e=new RegExp(G+"+","g"),Ve=new RegExp("^"+G+"*,"+G+"*"),rn=new RegExp("^"+G+"*([>+~]|"+G+")"+G+"*"),_i=new RegExp(G+"|>"),Ut=new RegExp(Cr),nn=new RegExp("^"+Ft+"$"),Bt={ID:new RegExp("^#("+Ft+")"),CLASS:new RegExp("^\\.("+Ft+")"),TAG:new RegExp("^("+Ft+"|[*])"),ATTR:new RegExp("^"+Le),PSEUDO:new RegExp("^"+Cr),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+G+"*(even|odd|(([+-]|)(\\d*)n|)"+G+"*(?:([+-]|)"+G+"*(\\d+)|))"+G+"*\\)|)","i"),bool:new RegExp("^(?:"+Nt+")$","i"),needsContext:new RegExp("^"+G+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+G+"*((?:-\\d)?\\d*)"+G+"*\\)|)(?=[^-]|$)","i")},ur=/^(?:input|select|textarea|button)$/i,lr=/^h\d$/i,Dt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Ri=/[+~]/,Zt=new RegExp("\\\\[\\da-fA-F]{1,6}"+G+"?|\\\\([^\\r\\n\\f])","g"),er=function(I,M){var N="0x"+I.slice(1)-65536;return M||(N<0?String.fromCharCode(N+65536):String.fromCharCode(N>>10|55296,N&1023|56320))},om=function(){cr()},um=Wn(function(I){return I.disabled===!0&&j(I,"fieldset")},{dir:"parentNode",next:"legend"});function lm(){try{return v.activeElement}catch{}}try{p.apply(i=c.call(ee.childNodes),ee.childNodes),i[ee.childNodes.length].nodeType}catch{p={apply:function(M,N){J.apply(M,c.call(N))},call:function(M){J.apply(M,c.call(arguments,1))}}}function Fe(I,M,N,z){var V,re,ae,ue,ie,ke,me,we=M&&M.ownerDocument,Oe=M?M.nodeType:9;if(N=N||[],typeof I!="string"||!I||Oe!==1&&Oe!==9&&Oe!==11)return N;if(!z&&(cr(M),M=M||v,L)){if(Oe!==11&&(ie=Dt.exec(I)))if(V=ie[1]){if(Oe===9)if(ae=M.getElementById(V)){if(ae.id===V)return p.call(N,ae),N}else return N;else if(we&&(ae=we.getElementById(V))&&Fe.contains(M,ae)&&ae.id===V)return p.call(N,ae),N}else{if(ie[2])return p.apply(N,M.getElementsByTagName(I)),N;if((V=ie[3])&&M.getElementsByClassName)return p.apply(N,M.getElementsByClassName(V)),N}if(!ut[I+" "]&&(!P||!P.test(I))){if(me=I,we=M,Oe===1&&(_i.test(I)||rn.test(I))){for(we=Ri.test(I)&&Mi(M.parentNode)||M,(we!=M||!k.scope)&&((ue=M.getAttribute("id"))?ue=o.escapeSelector(ue):M.setAttribute("id",ue=X)),ke=an(I),re=ke.length;re--;)ke[re]=(ue?"#"+ue:":scope")+" "+Hn(ke[re]);me=ke.join(",")}try{return p.apply(N,we.querySelectorAll(me)),N}catch{ut(I,!0)}finally{ue===X&&M.removeAttribute("id")}}}return Qu(I.replace(K,"$1"),M,N,z)}function Bn(){var I=[];function M(N,z){return I.push(N+" ")>a.cacheLength&&delete M[I.shift()],M[N+" "]=z}return M}function Pt(I){return I[X]=!0,I}function Rr(I){var M=v.createElement("fieldset");try{return!!I(M)}catch{return!1}finally{M.parentNode&&M.parentNode.removeChild(M),M=null}}function cm(I){return function(M){return j(M,"input")&&M.type===I}}function fm(I){return function(M){return(j(M,"input")||j(M,"button"))&&M.type===I}}function zu(I){return function(M){return"form"in M?M.parentNode&&M.disabled===!1?"label"in M?"label"in M.parentNode?M.parentNode.disabled===I:M.disabled===I:M.isDisabled===I||M.isDisabled!==!I&&um(M)===I:M.disabled===I:"label"in M?M.disabled===I:!1}}function kr(I){return Pt(function(M){return M=+M,Pt(function(N,z){for(var V,re=I([],N.length,M),ae=re.length;ae--;)N[V=re[ae]]&&(N[V]=!(z[V]=N[V]))})})}function Mi(I){return I&&typeof I.getElementsByTagName<"u"&&I}function cr(I){var M,N=I?I.ownerDocument||I:ee;return N==v||N.nodeType!==9||!N.documentElement||(v=N,_=v.documentElement,L=!o.isXMLDoc(v),Q=_.matches||_.webkitMatchesSelector||_.msMatchesSelector,_.msMatchesSelector&&ee!=v&&(M=v.defaultView)&&M.top!==M&&M.addEventListener("unload",om),k.getById=Rr(function(z){return _.appendChild(z).id=o.expando,!v.getElementsByName||!v.getElementsByName(o.expando).length}),k.disconnectedMatch=Rr(function(z){return Q.call(z,"*")}),k.scope=Rr(function(){return v.querySelectorAll(":scope")}),k.cssHas=Rr(function(){try{return v.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),k.getById?(a.filter.ID=function(z){var V=z.replace(Zt,er);return function(re){return re.getAttribute("id")===V}},a.find.ID=function(z,V){if(typeof V.getElementById<"u"&&L){var re=V.getElementById(z);return re?[re]:[]}}):(a.filter.ID=function(z){var V=z.replace(Zt,er);return function(re){var ae=typeof re.getAttributeNode<"u"&&re.getAttributeNode("id");return ae&&ae.value===V}},a.find.ID=function(z,V){if(typeof V.getElementById<"u"&&L){var re,ae,ue,ie=V.getElementById(z);if(ie){if(re=ie.getAttributeNode("id"),re&&re.value===z)return[ie];for(ue=V.getElementsByName(z),ae=0;ie=ue[ae++];)if(re=ie.getAttributeNode("id"),re&&re.value===z)return[ie]}return[]}}),a.find.TAG=function(z,V){return typeof V.getElementsByTagName<"u"?V.getElementsByTagName(z):V.querySelectorAll(z)},a.find.CLASS=function(z,V){if(typeof V.getElementsByClassName<"u"&&L)return V.getElementsByClassName(z)},P=[],Rr(function(z){var V;_.appendChild(z).innerHTML="<a id='"+X+"' href='' disabled='disabled'></a><select id='"+X+"-\r\\' disabled='disabled'><option selected=''></option></select>",z.querySelectorAll("[selected]").length||P.push("\\["+G+"*(?:value|"+Nt+")"),z.querySelectorAll("[id~="+X+"-]").length||P.push("~="),z.querySelectorAll("a#"+X+"+*").length||P.push(".#.+[+~]"),z.querySelectorAll(":checked").length||P.push(":checked"),V=v.createElement("input"),V.setAttribute("type","hidden"),z.appendChild(V).setAttribute("name","D"),_.appendChild(z).disabled=!0,z.querySelectorAll(":disabled").length!==2&&P.push(":enabled",":disabled"),V=v.createElement("input"),V.setAttribute("name",""),z.appendChild(V),z.querySelectorAll("[name='']").length||P.push("\\["+G+"*name"+G+"*="+G+`*(?:''|"")`)}),k.cssHas||P.push(":has"),P=P.length&&new RegExp(P.join("|")),Ze=function(z,V){if(z===V)return d=!0,0;var re=!z.compareDocumentPosition-!V.compareDocumentPosition;return re||(re=(z.ownerDocument||z)==(V.ownerDocument||V)?z.compareDocumentPosition(V):1,re&1||!k.sortDetached&&V.compareDocumentPosition(z)===re?z===v||z.ownerDocument==ee&&Fe.contains(ee,z)?-1:V===v||V.ownerDocument==ee&&Fe.contains(ee,V)?1:l?w.call(l,z)-w.call(l,V):0:re&4?-1:1)}),v}Fe.matches=function(I,M){return Fe(I,null,null,M)},Fe.matchesSelector=function(I,M){if(cr(I),L&&!ut[M+" "]&&(!P||!P.test(M)))try{var N=Q.call(I,M);if(N||k.disconnectedMatch||I.document&&I.document.nodeType!==11)return N}catch{ut(M,!0)}return Fe(M,v,null,[I]).length>0},Fe.contains=function(I,M){return(I.ownerDocument||I)!=v&&cr(I),o.contains(I,M)},Fe.attr=function(I,M){(I.ownerDocument||I)!=v&&cr(I);var N=a.attrHandle[M.toLowerCase()],z=N&&S.call(a.attrHandle,M.toLowerCase())?N(I,M,!L):void 0;return z!==void 0?z:I.getAttribute(M)},Fe.error=function(I){throw new Error("Syntax error, unrecognized expression: "+I)},o.uniqueSort=function(I){var M,N=[],z=0,V=0;if(d=!k.sortStable,l=!k.sortStable&&c.call(I,0),O.call(I,Ze),d){for(;M=I[V++];)M===I[V]&&(z=N.push(V));for(;z--;)F.call(I,N[z],1)}return l=null,I},o.fn.uniqueSort=function(){return this.pushStack(o.uniqueSort(c.apply(this)))},a=o.expr={cacheLength:50,createPseudo:Pt,match:Bt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(I){return I[1]=I[1].replace(Zt,er),I[3]=(I[3]||I[4]||I[5]||"").replace(Zt,er),I[2]==="~="&&(I[3]=" "+I[3]+" "),I.slice(0,4)},CHILD:function(I){return I[1]=I[1].toLowerCase(),I[1].slice(0,3)==="nth"?(I[3]||Fe.error(I[0]),I[4]=+(I[4]?I[5]+(I[6]||1):2*(I[3]==="even"||I[3]==="odd")),I[5]=+(I[7]+I[8]||I[3]==="odd")):I[3]&&Fe.error(I[0]),I},PSEUDO:function(I){var M,N=!I[6]&&I[2];return Bt.CHILD.test(I[0])?null:(I[3]?I[2]=I[4]||I[5]||"":N&&Ut.test(N)&&(M=an(N,!0))&&(M=N.indexOf(")",N.length-M)-N.length)&&(I[0]=I[0].slice(0,M),I[2]=N.slice(0,M)),I.slice(0,3))}},filter:{TAG:function(I){var M=I.replace(Zt,er).toLowerCase();return I==="*"?function(){return!0}:function(N){return j(N,M)}},CLASS:function(I){var M=ye[I+" "];return M||(M=new RegExp("(^|"+G+")"+I+"("+G+"|$)"))&&ye(I,function(N){return M.test(typeof N.className=="string"&&N.className||typeof N.getAttribute<"u"&&N.getAttribute("class")||"")})},ATTR:function(I,M,N){return function(z){var V=Fe.attr(z,I);return V==null?M==="!=":M?(V+="",M==="="?V===N:M==="!="?V!==N:M==="^="?N&&V.indexOf(N)===0:M==="*="?N&&V.indexOf(N)>-1:M==="$="?N&&V.slice(-N.length)===N:M==="~="?(" "+V.replace(_e," ")+" ").indexOf(N)>-1:M==="|="?V===N||V.slice(0,N.length+1)===N+"-":!1):!0}},CHILD:function(I,M,N,z,V){var re=I.slice(0,3)!=="nth",ae=I.slice(-4)!=="last",ue=M==="of-type";return z===1&&V===0?function(ie){return!!ie.parentNode}:function(ie,ke,me){var we,Oe,he,Ye,bt,dt=re!==ae?"nextSibling":"previousSibling",_t=ie.parentNode,Ht=ue&&ie.nodeName.toLowerCase(),Mr=!me&&!ue,mt=!1;if(_t){if(re){for(;dt;){for(he=ie;he=he[dt];)if(ue?j(he,Ht):he.nodeType===1)return!1;bt=dt=I==="only"&&!bt&&"nextSibling"}return!0}if(bt=[ae?_t.firstChild:_t.lastChild],ae&&Mr){for(Oe=_t[X]||(_t[X]={}),we=Oe[I]||[],Ye=we[0]===B&&we[1],mt=Ye&&we[2],he=Ye&&_t.childNodes[Ye];he=++Ye&&he&&he[dt]||(mt=Ye=0)||bt.pop();)if(he.nodeType===1&&++mt&&he===ie){Oe[I]=[B,Ye,mt];break}}else if(Mr&&(Oe=ie[X]||(ie[X]={}),we=Oe[I]||[],Ye=we[0]===B&&we[1],mt=Ye),mt===!1)for(;(he=++Ye&&he&&he[dt]||(mt=Ye=0)||bt.pop())&&!((ue?j(he,Ht):he.nodeType===1)&&++mt&&(Mr&&(Oe=he[X]||(he[X]={}),Oe[I]=[B,mt]),he===ie)););return mt-=V,mt===z||mt%z===0&&mt/z>=0}}},PSEUDO:function(I,M){var N,z=a.pseudos[I]||a.setFilters[I.toLowerCase()]||Fe.error("unsupported pseudo: "+I);return z[X]?z(M):z.length>1?(N=[I,I,"",M],a.setFilters.hasOwnProperty(I.toLowerCase())?Pt(function(V,re){for(var ae,ue=z(V,M),ie=ue.length;ie--;)ae=w.call(V,ue[ie]),V[ae]=!(re[ae]=ue[ie])}):function(V){return z(V,0,N)}):z}},pseudos:{not:Pt(function(I){var M=[],N=[],z=qi(I.replace(K,"$1"));return z[X]?Pt(function(V,re,ae,ue){for(var ie,ke=z(V,null,ue,[]),me=V.length;me--;)(ie=ke[me])&&(V[me]=!(re[me]=ie))}):function(V,re,ae){return M[0]=V,z(M,null,ae,N),M[0]=null,!N.pop()}}),has:Pt(function(I){return function(M){return Fe(I,M).length>0}}),contains:Pt(function(I){return I=I.replace(Zt,er),function(M){return(M.textContent||o.text(M)).indexOf(I)>-1}}),lang:Pt(function(I){return nn.test(I||"")||Fe.error("unsupported lang: "+I),I=I.replace(Zt,er).toLowerCase(),function(M){var N;do if(N=L?M.lang:M.getAttribute("xml:lang")||M.getAttribute("lang"))return N=N.toLowerCase(),N===I||N.indexOf(I+"-")===0;while((M=M.parentNode)&&M.nodeType===1);return!1}}),target:function(I){var M=t.location&&t.location.hash;return M&&M.slice(1)===I.id},root:function(I){return I===_},focus:function(I){return I===lm()&&v.hasFocus()&&!!(I.type||I.href||~I.tabIndex)},enabled:zu(!1),disabled:zu(!0),checked:function(I){return j(I,"input")&&!!I.checked||j(I,"option")&&!!I.selected},selected:function(I){return I.parentNode&&I.parentNode.selectedIndex,I.selected===!0},empty:function(I){for(I=I.firstChild;I;I=I.nextSibling)if(I.nodeType<6)return!1;return!0},parent:function(I){return!a.pseudos.empty(I)},header:function(I){return lr.test(I.nodeName)},input:function(I){return ur.test(I.nodeName)},button:function(I){return j(I,"input")&&I.type==="button"||j(I,"button")},text:function(I){var M;return j(I,"input")&&I.type==="text"&&((M=I.getAttribute("type"))==null||M.toLowerCase()==="text")},first:kr(function(){return[0]}),last:kr(function(I,M){return[M-1]}),eq:kr(function(I,M,N){return[N<0?N+M:N]}),even:kr(function(I,M){for(var N=0;N<M;N+=2)I.push(N);return I}),odd:kr(function(I,M){for(var N=1;N<M;N+=2)I.push(N);return I}),lt:kr(function(I,M,N){var z;for(N<0?z=N+M:N>M?z=M:z=N;--z>=0;)I.push(z);return I}),gt:kr(function(I,M,N){for(var z=N<0?N+M:N;++z<M;)I.push(z);return I})}},a.pseudos.nth=a.pseudos.eq;for(e in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})a.pseudos[e]=cm(e);for(e in{submit:!0,reset:!0})a.pseudos[e]=fm(e);function Yu(){}Yu.prototype=a.filters=a.pseudos,a.setFilters=new Yu;function an(I,M){var N,z,V,re,ae,ue,ie,ke=Ee[I+" "];if(ke)return M?0:ke.slice(0);for(ae=I,ue=[],ie=a.preFilter;ae;){(!N||(z=Ve.exec(ae)))&&(z&&(ae=ae.slice(z[0].length)||ae),ue.push(V=[])),N=!1,(z=rn.exec(ae))&&(N=z.shift(),V.push({value:N,type:z[0].replace(K," ")}),ae=ae.slice(N.length));for(re in a.filter)(z=Bt[re].exec(ae))&&(!ie[re]||(z=ie[re](z)))&&(N=z.shift(),V.push({value:N,type:re,matches:z}),ae=ae.slice(N.length));if(!N)break}return M?ae.length:ae?Fe.error(I):Ee(I,ue).slice(0)}function Hn(I){for(var M=0,N=I.length,z="";M<N;M++)z+=I[M].value;return z}function Wn(I,M,N){var z=M.dir,V=M.next,re=V||z,ae=N&&re==="parentNode",ue=te++;return M.first?function(ie,ke,me){for(;ie=ie[z];)if(ie.nodeType===1||ae)return I(ie,ke,me);return!1}:function(ie,ke,me){var we,Oe,he=[B,ue];if(me){for(;ie=ie[z];)if((ie.nodeType===1||ae)&&I(ie,ke,me))return!0}else for(;ie=ie[z];)if(ie.nodeType===1||ae)if(Oe=ie[X]||(ie[X]={}),V&&j(ie,V))ie=ie[z]||ie;else{if((we=Oe[re])&&we[0]===B&&we[1]===ue)return he[2]=we[2];if(Oe[re]=he,he[2]=I(ie,ke,me))return!0}return!1}}function Pi(I){return I.length>1?function(M,N,z){for(var V=I.length;V--;)if(!I[V](M,N,z))return!1;return!0}:I[0]}function dm(I,M,N){for(var z=0,V=M.length;z<V;z++)Fe(I,M[z],N);return N}function zn(I,M,N,z,V){for(var re,ae=[],ue=0,ie=I.length,ke=M!=null;ue<ie;ue++)(re=I[ue])&&(!N||N(re,z,V))&&(ae.push(re),ke&&M.push(ue));return ae}function $i(I,M,N,z,V,re){return z&&!z[X]&&(z=$i(z)),V&&!V[X]&&(V=$i(V,re)),Pt(function(ae,ue,ie,ke){var me,we,Oe,he,Ye=[],bt=[],dt=ue.length,_t=ae||dm(M||"*",ie.nodeType?[ie]:ie,[]),Ht=I&&(ae||!M)?zn(_t,Ye,I,ie,ke):_t;if(N?(he=V||(ae?I:dt||z)?[]:ue,N(Ht,he,ie,ke)):he=Ht,z)for(me=zn(he,bt),z(me,[],ie,ke),we=me.length;we--;)(Oe=me[we])&&(he[bt[we]]=!(Ht[bt[we]]=Oe));if(ae){if(V||I){if(V){for(me=[],we=he.length;we--;)(Oe=he[we])&&me.push(Ht[we]=Oe);V(null,he=[],me,ke)}for(we=he.length;we--;)(Oe=he[we])&&(me=V?w.call(ae,Oe):Ye[we])>-1&&(ae[me]=!(ue[me]=Oe))}}else he=zn(he===ue?he.splice(dt,he.length):he),V?V(null,ue,he,ke):p.apply(ue,he)})}function ji(I){for(var M,N,z,V=I.length,re=a.relative[I[0].type],ae=re||a.relative[" "],ue=re?1:0,ie=Wn(function(we){return we===M},ae,!0),ke=Wn(function(we){return w.call(M,we)>-1},ae,!0),me=[function(we,Oe,he){var Ye=!re&&(he||Oe!=s)||((M=Oe).nodeType?ie(we,Oe,he):ke(we,Oe,he));return M=null,Ye}];ue<V;ue++)if(N=a.relative[I[ue].type])me=[Wn(Pi(me),N)];else{if(N=a.filter[I[ue].type].apply(null,I[ue].matches),N[X]){for(z=++ue;z<V&&!a.relative[I[z].type];z++);return $i(ue>1&&Pi(me),ue>1&&Hn(I.slice(0,ue-1).concat({value:I[ue-2].type===" "?"*":""})).replace(K,"$1"),N,ue<z&&ji(I.slice(ue,z)),z<V&&ji(I=I.slice(z)),z<V&&Hn(I))}me.push(N)}return Pi(me)}function pm(I,M){var N=M.length>0,z=I.length>0,V=function(re,ae,ue,ie,ke){var me,we,Oe,he=0,Ye="0",bt=re&&[],dt=[],_t=s,Ht=re||z&&a.find.TAG("*",ke),Mr=B+=_t==null?1:Math.random()||.1,mt=Ht.length;for(ke&&(s=ae==v||ae||ke);Ye!==mt&&(me=Ht[Ye])!=null;Ye++){if(z&&me){for(we=0,!ae&&me.ownerDocument!=v&&(cr(me),ue=!L);Oe=I[we++];)if(Oe(me,ae||v,ue)){p.call(ie,me);break}ke&&(B=Mr)}N&&((me=!Oe&&me)&&he--,re&&bt.push(me))}if(he+=Ye,N&&Ye!==he){for(we=0;Oe=M[we++];)Oe(bt,dt,ae,ue);if(re){if(he>0)for(;Ye--;)bt[Ye]||dt[Ye]||(dt[Ye]=Y.call(ie));dt=zn(dt)}p.apply(ie,dt),ke&&!re&&dt.length>0&&he+M.length>1&&o.uniqueSort(ie)}return ke&&(B=Mr,s=_t),bt};return N?Pt(V):V}function qi(I,M){var N,z=[],V=[],re=Se[I+" "];if(!re){for(M||(M=an(I)),N=M.length;N--;)re=ji(M[N]),re[X]?z.push(re):V.push(re);re=Se(I,pm(V,z)),re.selector=I}return re}function Qu(I,M,N,z){var V,re,ae,ue,ie,ke=typeof I=="function"&&I,me=!z&&an(I=ke.selector||I);if(N=N||[],me.length===1){if(re=me[0]=me[0].slice(0),re.length>2&&(ae=re[0]).type==="ID"&&M.nodeType===9&&L&&a.relative[re[1].type]){if(M=(a.find.ID(ae.matches[0].replace(Zt,er),M)||[])[0],M)ke&&(M=M.parentNode);else return N;I=I.slice(re.shift().value.length)}for(V=Bt.needsContext.test(I)?0:re.length;V--&&(ae=re[V],!a.relative[ue=ae.type]);)if((ie=a.find[ue])&&(z=ie(ae.matches[0].replace(Zt,er),Ri.test(re[0].type)&&Mi(M.parentNode)||M))){if(re.splice(V,1),I=z.length&&Hn(re),!I)return p.apply(N,z),N;break}}return(ke||qi(I,me))(z,M,!L,N,!M||Ri.test(I)&&Mi(M.parentNode)||M),N}k.sortStable=X.split("").sort(Ze).join("")===X,cr(),k.sortDetached=Rr(function(I){return I.compareDocumentPosition(v.createElement("fieldset"))&1}),o.find=Fe,o.expr[":"]=o.expr.pseudos,o.unique=o.uniqueSort,Fe.compile=qi,Fe.select=Qu,Fe.setDocument=cr,Fe.tokenize=an,Fe.escape=o.escapeSelector,Fe.getText=o.text,Fe.isXML=o.isXMLDoc,Fe.selectors=o.expr,Fe.support=o.support,Fe.uniqueSort=o.uniqueSort})();var se=function(e,a,s){for(var l=[],d=s!==void 0;(e=e[a])&&e.nodeType!==9;)if(e.nodeType===1){if(d&&o(e).is(s))break;l.push(e)}return l},oe=function(e,a){for(var s=[];e;e=e.nextSibling)e.nodeType===1&&e!==a&&s.push(e);return s},be=o.expr.match.needsContext,De=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Pe(e,a,s){return x(a)?o.grep(e,function(l,d){return!!a.call(l,d,l)!==s}):a.nodeType?o.grep(e,function(l){return l===a!==s}):typeof a!="string"?o.grep(e,function(l){return w.call(a,l)>-1!==s}):o.filter(a,e,s)}o.filter=function(e,a,s){var l=a[0];return s&&(e=":not("+e+")"),a.length===1&&l.nodeType===1?o.find.matchesSelector(l,e)?[l]:[]:o.find.matches(e,o.grep(a,function(d){return d.nodeType===1}))},o.fn.extend({find:function(e){var a,s,l=this.length,d=this;if(typeof e!="string")return this.pushStack(o(e).filter(function(){for(a=0;a<l;a++)if(o.contains(d[a],this))return!0}));for(s=this.pushStack([]),a=0;a<l;a++)o.find(e,d[a],s);return l>1?o.uniqueSort(s):s},filter:function(e){return this.pushStack(Pe(this,e||[],!1))},not:function(e){return this.pushStack(Pe(this,e||[],!0))},is:function(e){return!!Pe(this,typeof e=="string"&&be.test(e)?o(e):e||[],!1).length}});var Be,Ke=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,at=o.fn.init=function(e,a,s){var l,d;if(!e)return this;if(s=s||Be,typeof e=="string")if(e[0]==="<"&&e[e.length-1]===">"&&e.length>=3?l=[null,e,null]:l=Ke.exec(e),l&&(l[1]||!a))if(l[1]){if(a=a instanceof o?a[0]:a,o.merge(this,o.parseHTML(l[1],a&&a.nodeType?a.ownerDocument||a:m,!0)),De.test(l[1])&&o.isPlainObject(a))for(l in a)x(this[l])?this[l](a[l]):this.attr(l,a[l]);return this}else return d=m.getElementById(l[2]),d&&(this[0]=d,this.length=1),this;else return!a||a.jquery?(a||s).find(e):this.constructor(a).find(e);else{if(e.nodeType)return this[0]=e,this.length=1,this;if(x(e))return s.ready!==void 0?s.ready(e):e(o)}return o.makeArray(e,this)};at.prototype=o.fn,Be=o(m);var lt=/^(?:parents|prev(?:Until|All))/,it={children:!0,contents:!0,next:!0,prev:!0};o.fn.extend({has:function(e){var a=o(e,this),s=a.length;return this.filter(function(){for(var l=0;l<s;l++)if(o.contains(this,a[l]))return!0})},closest:function(e,a){var s,l=0,d=this.length,p=[],v=typeof e!="string"&&o(e);if(!be.test(e)){for(;l<d;l++)for(s=this[l];s&&s!==a;s=s.parentNode)if(s.nodeType<11&&(v?v.index(s)>-1:s.nodeType===1&&o.find.matchesSelector(s,e))){p.push(s);break}}return this.pushStack(p.length>1?o.uniqueSort(p):p)},index:function(e){return e?typeof e=="string"?w.call(o(e),this[0]):w.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,a){return this.pushStack(o.uniqueSort(o.merge(this.get(),o(e,a))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}});function ze(e,a){for(;(e=e[a])&&e.nodeType!==1;);return e}o.each({parent:function(e){var a=e.parentNode;return a&&a.nodeType!==11?a:null},parents:function(e){return se(e,"parentNode")},parentsUntil:function(e,a,s){return se(e,"parentNode",s)},next:function(e){return ze(e,"nextSibling")},prev:function(e){return ze(e,"previousSibling")},nextAll:function(e){return se(e,"nextSibling")},prevAll:function(e){return se(e,"previousSibling")},nextUntil:function(e,a,s){return se(e,"nextSibling",s)},prevUntil:function(e,a,s){return se(e,"previousSibling",s)},siblings:function(e){return oe((e.parentNode||{}).firstChild,e)},children:function(e){return oe(e.firstChild)},contents:function(e){return e.contentDocument!=null&&u(e.contentDocument)?e.contentDocument:(j(e,"template")&&(e=e.content||e),o.merge([],e.childNodes))}},function(e,a){o.fn[e]=function(s,l){var d=o.map(this,a,s);return e.slice(-5)!=="Until"&&(l=s),l&&typeof l=="string"&&(d=o.filter(l,d)),this.length>1&&(it[e]||o.uniqueSort(d),lt.test(e)&&d.reverse()),this.pushStack(d)}});var ce=/[^\x20\t\r\n\f]+/g;function Me(e){var a={};return o.each(e.match(ce)||[],function(s,l){a[l]=!0}),a}o.Callbacks=function(e){e=typeof e=="string"?Me(e):o.extend({},e);var a,s,l,d,p=[],v=[],_=-1,L=function(){for(d=d||e.once,l=a=!0;v.length;_=-1)for(s=v.shift();++_<p.length;)p[_].apply(s[0],s[1])===!1&&e.stopOnFalse&&(_=p.length,s=!1);e.memory||(s=!1),a=!1,d&&(s?p=[]:p="")},P={add:function(){return p&&(s&&!a&&(_=p.length-1,v.push(s)),function Q(X){o.each(X,function(B,te){x(te)?(!e.unique||!P.has(te))&&p.push(te):te&&te.length&&R(te)!=="string"&&Q(te)})}(arguments),s&&!a&&L()),this},remove:function(){return o.each(arguments,function(Q,X){for(var B;(B=o.inArray(X,p,B))>-1;)p.splice(B,1),B<=_&&_--}),this},has:function(Q){return Q?o.inArray(Q,p)>-1:p.length>0},empty:function(){return p&&(p=[]),this},disable:function(){return d=v=[],p=s="",this},disabled:function(){return!p},lock:function(){return d=v=[],!s&&!a&&(p=s=""),this},locked:function(){return!!d},fireWith:function(Q,X){return d||(X=X||[],X=[Q,X.slice?X.slice():X],v.push(X),a||L()),this},fire:function(){return P.fireWith(this,arguments),this},fired:function(){return!!l}};return P};function Ae(e){return e}function je(e){throw e}function et(e,a,s,l){var d;try{e&&x(d=e.promise)?d.call(e).done(a).fail(s):e&&x(d=e.then)?d.call(e,a,s):a.apply(void 0,[e].slice(l))}catch(p){s.apply(void 0,[p])}}o.extend({Deferred:function(e){var a=[["notify","progress",o.Callbacks("memory"),o.Callbacks("memory"),2],["resolve","done",o.Callbacks("once memory"),o.Callbacks("once memory"),0,"resolved"],["reject","fail",o.Callbacks("once memory"),o.Callbacks("once memory"),1,"rejected"]],s="pending",l={state:function(){return s},always:function(){return d.done(arguments).fail(arguments),this},catch:function(p){return l.then(null,p)},pipe:function(){var p=arguments;return o.Deferred(function(v){o.each(a,function(_,L){var P=x(p[L[4]])&&p[L[4]];d[L[1]](function(){var Q=P&&P.apply(this,arguments);Q&&x(Q.promise)?Q.promise().progress(v.notify).done(v.resolve).fail(v.reject):v[L[0]+"With"](this,P?[Q]:arguments)})}),p=null}).promise()},then:function(p,v,_){var L=0;function P(Q,X,B,te){return function(){var ye=this,Ee=arguments,Se=function(){var Ze,Nt;if(!(Q<L)){if(Ze=B.apply(ye,Ee),Ze===X.promise())throw new TypeError("Thenable self-resolution");Nt=Ze&&(typeof Ze=="object"||typeof Ze=="function")&&Ze.then,x(Nt)?te?Nt.call(Ze,P(L,X,Ae,te),P(L,X,je,te)):(L++,Nt.call(Ze,P(L,X,Ae,te),P(L,X,je,te),P(L,X,Ae,X.notifyWith))):(B!==Ae&&(ye=void 0,Ee=[Ze]),(te||X.resolveWith)(ye,Ee))}},ut=te?Se:function(){try{Se()}catch(Ze){o.Deferred.exceptionHook&&o.Deferred.exceptionHook(Ze,ut.error),Q+1>=L&&(B!==je&&(ye=void 0,Ee=[Ze]),X.rejectWith(ye,Ee))}};Q?ut():(o.Deferred.getErrorHook?ut.error=o.Deferred.getErrorHook():o.Deferred.getStackHook&&(ut.error=o.Deferred.getStackHook()),t.setTimeout(ut))}}return o.Deferred(function(Q){a[0][3].add(P(0,Q,x(_)?_:Ae,Q.notifyWith)),a[1][3].add(P(0,Q,x(p)?p:Ae)),a[2][3].add(P(0,Q,x(v)?v:je))}).promise()},promise:function(p){return p!=null?o.extend(p,l):l}},d={};return o.each(a,function(p,v){var _=v[2],L=v[5];l[v[1]]=_.add,L&&_.add(function(){s=L},a[3-p][2].disable,a[3-p][3].disable,a[0][2].lock,a[0][3].lock),_.add(v[3].fire),d[v[0]]=function(){return d[v[0]+"With"](this===d?void 0:this,arguments),this},d[v[0]+"With"]=_.fireWith}),l.promise(d),e&&e.call(d,d),d},when:function(e){var a=arguments.length,s=a,l=Array(s),d=c.call(arguments),p=o.Deferred(),v=function(_){return function(L){l[_]=this,d[_]=arguments.length>1?c.call(arguments):L,--a||p.resolveWith(l,d)}};if(a<=1&&(et(e,p.done(v(s)).resolve,p.reject,!a),p.state()==="pending"||x(d[s]&&d[s].then)))return p.then();for(;s--;)et(d[s],v(s),p.reject);return p.promise()}});var vt=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;o.Deferred.exceptionHook=function(e,a){t.console&&t.console.warn&&e&&vt.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,a)},o.readyException=function(e){t.setTimeout(function(){throw e})};var He=o.Deferred();o.fn.ready=function(e){return He.then(e).catch(function(a){o.readyException(a)}),this},o.extend({isReady:!1,readyWait:1,ready:function(e){(e===!0?--o.readyWait:o.isReady)||(o.isReady=!0,!(e!==!0&&--o.readyWait>0)&&He.resolveWith(m,[o]))}}),o.ready.then=He.then;function tt(){m.removeEventListener("DOMContentLoaded",tt),t.removeEventListener("load",tt),o.ready()}m.readyState==="complete"||m.readyState!=="loading"&&!m.documentElement.doScroll?t.setTimeout(o.ready):(m.addEventListener("DOMContentLoaded",tt),t.addEventListener("load",tt));var pt=function(e,a,s,l,d,p,v){var _=0,L=e.length,P=s==null;if(R(s)==="object"){d=!0;for(_ in s)pt(e,a,_,s[_],!0,p,v)}else if(l!==void 0&&(d=!0,x(l)||(v=!0),P&&(v?(a.call(e,l),a=null):(P=a,a=function(Q,X,B){return P.call(o(Q),B)})),a))for(;_<L;_++)a(e[_],s,v?l:l.call(e[_],_,a(e[_],s)));return d?e:P?a.call(e):L?a(e[0],s):p},Vt=/^-ms-/,Xt=/-([a-z])/g;function Tt(e,a){return a.toUpperCase()}function st(e){return e.replace(Vt,"ms-").replace(Xt,Tt)}var Ot=function(e){return e.nodeType===1||e.nodeType===9||!+e.nodeType};function It(){this.expando=o.expando+It.uid++}It.uid=1,It.prototype={cache:function(e){var a=e[this.expando];return a||(a={},Ot(e)&&(e.nodeType?e[this.expando]=a:Object.defineProperty(e,this.expando,{value:a,configurable:!0}))),a},set:function(e,a,s){var l,d=this.cache(e);if(typeof a=="string")d[st(a)]=s;else for(l in a)d[st(l)]=a[l];return d},get:function(e,a){return a===void 0?this.cache(e):e[this.expando]&&e[this.expando][st(a)]},access:function(e,a,s){return a===void 0||a&&typeof a=="string"&&s===void 0?this.get(e,a):(this.set(e,a,s),s!==void 0?s:a)},remove:function(e,a){var s,l=e[this.expando];if(l!==void 0){if(a!==void 0)for(Array.isArray(a)?a=a.map(st):(a=st(a),a=a in l?[a]:a.match(ce)||[]),s=a.length;s--;)delete l[a[s]];(a===void 0||o.isEmptyObject(l))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var a=e[this.expando];return a!==void 0&&!o.isEmptyObject(a)}};var le=new It,ot=new It,xi=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,xr=/[A-Z]/g;function Wr(e){return e==="true"?!0:e==="false"?!1:e==="null"?null:e===+e+""?+e:xi.test(e)?JSON.parse(e):e}function zr(e,a,s){var l;if(s===void 0&&e.nodeType===1)if(l="data-"+a.replace(xr,"-$&").toLowerCase(),s=e.getAttribute(l),typeof s=="string"){try{s=Wr(s)}catch{}ot.set(e,a,s)}else s=void 0;return s}o.extend({hasData:function(e){return ot.hasData(e)||le.hasData(e)},data:function(e,a,s){return ot.access(e,a,s)},removeData:function(e,a){ot.remove(e,a)},_data:function(e,a,s){return le.access(e,a,s)},_removeData:function(e,a){le.remove(e,a)}}),o.fn.extend({data:function(e,a){var s,l,d,p=this[0],v=p&&p.attributes;if(e===void 0){if(this.length&&(d=ot.get(p),p.nodeType===1&&!le.get(p,"hasDataAttrs"))){for(s=v.length;s--;)v[s]&&(l=v[s].name,l.indexOf("data-")===0&&(l=st(l.slice(5)),zr(p,l,d[l])));le.set(p,"hasDataAttrs",!0)}return d}return typeof e=="object"?this.each(function(){ot.set(this,e)}):pt(this,function(_){var L;if(p&&_===void 0)return L=ot.get(p,e),L!==void 0||(L=zr(p,e),L!==void 0)?L:void 0;this.each(function(){ot.set(this,e,_)})},null,a,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ot.remove(this,e)})}}),o.extend({queue:function(e,a,s){var l;if(e)return a=(a||"fx")+"queue",l=le.get(e,a),s&&(!l||Array.isArray(s)?l=le.access(e,a,o.makeArray(s)):l.push(s)),l||[]},dequeue:function(e,a){a=a||"fx";var s=o.queue(e,a),l=s.length,d=s.shift(),p=o._queueHooks(e,a),v=function(){o.dequeue(e,a)};d==="inprogress"&&(d=s.shift(),l--),d&&(a==="fx"&&s.unshift("inprogress"),delete p.stop,d.call(e,v,p)),!l&&p&&p.empty.fire()},_queueHooks:function(e,a){var s=a+"queueHooks";return le.get(e,s)||le.access(e,s,{empty:o.Callbacks("once memory").add(function(){le.remove(e,[a+"queue",s])})})}}),o.fn.extend({queue:function(e,a){var s=2;return typeof e!="string"&&(a=e,e="fx",s--),arguments.length<s?o.queue(this[0],e):a===void 0?this:this.each(function(){var l=o.queue(this,e,a);o._queueHooks(this,e),e==="fx"&&l[0]!=="inprogress"&&o.dequeue(this,e)})},dequeue:function(e){return this.each(function(){o.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,a){var s,l=1,d=o.Deferred(),p=this,v=this.length,_=function(){--l||d.resolveWith(p,[p])};for(typeof e!="string"&&(a=e,e=void 0),e=e||"fx";v--;)s=le.get(p[v],e+"queueHooks"),s&&s.empty&&(l++,s.empty.add(_));return _(),d.promise(a)}});var Pn=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,br=new RegExp("^(?:([+-])=|)("+Pn+")([a-z%]*)$","i"),St=["Top","Right","Bottom","Left"],Lt=m.documentElement,q=function(e){return o.contains(e.ownerDocument,e)},W={composed:!0};Lt.getRootNode&&(q=function(e){return o.contains(e.ownerDocument,e)||e.getRootNode(W)===e.ownerDocument});var Ie=function(e,a){return e=a||e,e.style.display==="none"||e.style.display===""&&q(e)&&o.css(e,"display")==="none"};function Ne(e,a,s,l){var d,p,v=20,_=l?function(){return l.cur()}:function(){return o.css(e,a,"")},L=_(),P=s&&s[3]||(o.cssNumber[a]?"":"px"),Q=e.nodeType&&(o.cssNumber[a]||P!=="px"&&+L)&&br.exec(o.css(e,a));if(Q&&Q[3]!==P){for(L=L/2,P=P||Q[3],Q=+L||1;v--;)o.style(e,a,Q+P),(1-p)*(1-(p=_()/L||.5))<=0&&(v=0),Q=Q/p;Q=Q*2,o.style(e,a,Q+P),s=s||[]}return s&&(Q=+Q||+L||0,d=s[1]?Q+(s[1]+1)*s[2]:+s[2],l&&(l.unit=P,l.start=Q,l.end=d)),d}var We={};function Te(e){var a,s=e.ownerDocument,l=e.nodeName,d=We[l];return d||(a=s.body.appendChild(s.createElement(l)),d=o.css(a,"display"),a.parentNode.removeChild(a),d==="none"&&(d="block"),We[l]=d,d)}function ht(e,a){for(var s,l,d=[],p=0,v=e.length;p<v;p++)l=e[p],l.style&&(s=l.style.display,a?(s==="none"&&(d[p]=le.get(l,"display")||null,d[p]||(l.style.display="")),l.style.display===""&&Ie(l)&&(d[p]=Te(l))):s!=="none"&&(d[p]="none",le.set(l,"display",s)));for(p=0;p<v;p++)d[p]!=null&&(e[p].style.display=d[p]);return e}o.fn.extend({show:function(){return ht(this,!0)},hide:function(){return ht(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){Ie(this)?o(this).show():o(this).hide()})}});var At=/^(?:checkbox|radio)$/i,ct=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Rt=/^$|^module$|\/(?:java|ecma)script/i;(function(){var e=m.createDocumentFragment(),a=e.appendChild(m.createElement("div")),s=m.createElement("input");s.setAttribute("type","radio"),s.setAttribute("checked","checked"),s.setAttribute("name","t"),a.appendChild(s),k.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,a.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!a.cloneNode(!0).lastChild.defaultValue,a.innerHTML="<option></option>",k.option=!!a.lastChild})();var ft={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ft.tbody=ft.tfoot=ft.colgroup=ft.caption=ft.thead,ft.th=ft.td,k.option||(ft.optgroup=ft.option=[1,"<select multiple='multiple'>","</select>"]);function Je(e,a){var s;return typeof e.getElementsByTagName<"u"?s=e.getElementsByTagName(a||"*"):typeof e.querySelectorAll<"u"?s=e.querySelectorAll(a||"*"):s=[],a===void 0||a&&j(e,a)?o.merge([e],s):s}function gt(e,a){for(var s=0,l=e.length;s<l;s++)le.set(e[s],"globalEval",!a||le.get(a[s],"globalEval"))}var $n=/<|&#?\w+;/;function Yr(e,a,s,l,d){for(var p,v,_,L,P,Q,X=a.createDocumentFragment(),B=[],te=0,ye=e.length;te<ye;te++)if(p=e[te],p||p===0)if(R(p)==="object")o.merge(B,p.nodeType?[p]:p);else if(!$n.test(p))B.push(a.createTextNode(p));else{for(v=v||X.appendChild(a.createElement("div")),_=(ct.exec(p)||["",""])[1].toLowerCase(),L=ft[_]||ft._default,v.innerHTML=L[1]+o.htmlPrefilter(p)+L[2],Q=L[0];Q--;)v=v.lastChild;o.merge(B,v.childNodes),v=X.firstChild,v.textContent=""}for(X.textContent="",te=0;p=B[te++];){if(l&&o.inArray(p,l)>-1){d&&d.push(p);continue}if(P=q(p),v=Je(X.appendChild(p),"script"),P&&gt(v),s)for(Q=0;p=v[Q++];)Rt.test(p.type||"")&&s.push(p)}return X}var Qr=/^([^.]*)(?:\.(.+)|)/;function Et(){return!0}function jt(){return!1}function ir(e,a,s,l,d,p){var v,_;if(typeof a=="object"){typeof s!="string"&&(l=l||s,s=void 0);for(_ in a)ir(e,_,s,l,a[_],p);return e}if(l==null&&d==null?(d=s,l=s=void 0):d==null&&(typeof s=="string"?(d=l,l=void 0):(d=l,l=s,s=void 0)),d===!1)d=jt;else if(!d)return e;return p===1&&(v=d,d=function(L){return o().off(L),v.apply(this,arguments)},d.guid=v.guid||(v.guid=o.guid++)),e.each(function(){o.event.add(this,a,d,l,s)})}o.event={global:{},add:function(e,a,s,l,d){var p,v,_,L,P,Q,X,B,te,ye,Ee,Se=le.get(e);if(Ot(e))for(s.handler&&(p=s,s=p.handler,d=p.selector),d&&o.find.matchesSelector(Lt,d),s.guid||(s.guid=o.guid++),(L=Se.events)||(L=Se.events=Object.create(null)),(v=Se.handle)||(v=Se.handle=function(ut){return typeof o<"u"&&o.event.triggered!==ut.type?o.event.dispatch.apply(e,arguments):void 0}),a=(a||"").match(ce)||[""],P=a.length;P--;)_=Qr.exec(a[P])||[],te=Ee=_[1],ye=(_[2]||"").split(".").sort(),te&&(X=o.event.special[te]||{},te=(d?X.delegateType:X.bindType)||te,X=o.event.special[te]||{},Q=o.extend({type:te,origType:Ee,data:l,handler:s,guid:s.guid,selector:d,needsContext:d&&o.expr.match.needsContext.test(d),namespace:ye.join(".")},p),(B=L[te])||(B=L[te]=[],B.delegateCount=0,(!X.setup||X.setup.call(e,l,ye,v)===!1)&&e.addEventListener&&e.addEventListener(te,v)),X.add&&(X.add.call(e,Q),Q.handler.guid||(Q.handler.guid=s.guid)),d?B.splice(B.delegateCount++,0,Q):B.push(Q),o.event.global[te]=!0)},remove:function(e,a,s,l,d){var p,v,_,L,P,Q,X,B,te,ye,Ee,Se=le.hasData(e)&&le.get(e);if(!(!Se||!(L=Se.events))){for(a=(a||"").match(ce)||[""],P=a.length;P--;){if(_=Qr.exec(a[P])||[],te=Ee=_[1],ye=(_[2]||"").split(".").sort(),!te){for(te in L)o.event.remove(e,te+a[P],s,l,!0);continue}for(X=o.event.special[te]||{},te=(l?X.delegateType:X.bindType)||te,B=L[te]||[],_=_[2]&&new RegExp("(^|\\.)"+ye.join("\\.(?:.*\\.|)")+"(\\.|$)"),v=p=B.length;p--;)Q=B[p],(d||Ee===Q.origType)&&(!s||s.guid===Q.guid)&&(!_||_.test(Q.namespace))&&(!l||l===Q.selector||l==="**"&&Q.selector)&&(B.splice(p,1),Q.selector&&B.delegateCount--,X.remove&&X.remove.call(e,Q));v&&!B.length&&((!X.teardown||X.teardown.call(e,ye,Se.handle)===!1)&&o.removeEvent(e,te,Se.handle),delete L[te])}o.isEmptyObject(L)&&le.remove(e,"handle events")}},dispatch:function(e){var a,s,l,d,p,v,_=new Array(arguments.length),L=o.event.fix(e),P=(le.get(this,"events")||Object.create(null))[L.type]||[],Q=o.event.special[L.type]||{};for(_[0]=L,a=1;a<arguments.length;a++)_[a]=arguments[a];if(L.delegateTarget=this,!(Q.preDispatch&&Q.preDispatch.call(this,L)===!1)){for(v=o.event.handlers.call(this,L,P),a=0;(d=v[a++])&&!L.isPropagationStopped();)for(L.currentTarget=d.elem,s=0;(p=d.handlers[s++])&&!L.isImmediatePropagationStopped();)(!L.rnamespace||p.namespace===!1||L.rnamespace.test(p.namespace))&&(L.handleObj=p,L.data=p.data,l=((o.event.special[p.origType]||{}).handle||p.handler).apply(d.elem,_),l!==void 0&&(L.result=l)===!1&&(L.preventDefault(),L.stopPropagation()));return Q.postDispatch&&Q.postDispatch.call(this,L),L.result}},handlers:function(e,a){var s,l,d,p,v,_=[],L=a.delegateCount,P=e.target;if(L&&P.nodeType&&!(e.type==="click"&&e.button>=1)){for(;P!==this;P=P.parentNode||this)if(P.nodeType===1&&!(e.type==="click"&&P.disabled===!0)){for(p=[],v={},s=0;s<L;s++)l=a[s],d=l.selector+" ",v[d]===void 0&&(v[d]=l.needsContext?o(d,this).index(P)>-1:o.find(d,this,null,[P]).length),v[d]&&p.push(l);p.length&&_.push({elem:P,handlers:p})}}return P=this,L<a.length&&_.push({elem:P,handlers:a.slice(L)}),_},addProp:function(e,a){Object.defineProperty(o.Event.prototype,e,{enumerable:!0,configurable:!0,get:x(a)?function(){if(this.originalEvent)return a(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(s){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:s})}})},fix:function(e){return e[o.expando]?e:new o.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var a=this||e;return At.test(a.type)&&a.click&&j(a,"input")&&sr(a,"click",!0),!1},trigger:function(e){var a=this||e;return At.test(a.type)&&a.click&&j(a,"input")&&sr(a,"click"),!0},_default:function(e){var a=e.target;return At.test(a.type)&&a.click&&j(a,"input")&&le.get(a,"click")||j(a,"a")}},beforeunload:{postDispatch:function(e){e.result!==void 0&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}};function sr(e,a,s){if(!s){le.get(e,a)===void 0&&o.event.add(e,a,Et);return}le.set(e,a,!1),o.event.add(e,a,{namespace:!1,handler:function(l){var d,p=le.get(this,a);if(l.isTrigger&1&&this[a]){if(p)(o.event.special[a]||{}).delegateType&&l.stopPropagation();else if(p=c.call(arguments),le.set(this,a,p),this[a](),d=le.get(this,a),le.set(this,a,!1),p!==d)return l.stopImmediatePropagation(),l.preventDefault(),d}else p&&(le.set(this,a,o.event.trigger(p[0],p.slice(1),this)),l.stopPropagation(),l.isImmediatePropagationStopped=Et)}})}o.removeEvent=function(e,a,s){e.removeEventListener&&e.removeEventListener(a,s)},o.Event=function(e,a){if(!(this instanceof o.Event))return new o.Event(e,a);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===void 0&&e.returnValue===!1?Et:jt,this.target=e.target&&e.target.nodeType===3?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,a&&o.extend(this,a),this.timeStamp=e&&e.timeStamp||Date.now(),this[o.expando]=!0},o.Event.prototype={constructor:o.Event,isDefaultPrevented:jt,isPropagationStopped:jt,isImmediatePropagationStopped:jt,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Et,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Et,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Et,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},o.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},o.event.addProp),o.each({focus:"focusin",blur:"focusout"},function(e,a){function s(l){if(m.documentMode){var d=le.get(this,"handle"),p=o.event.fix(l);p.type=l.type==="focusin"?"focus":"blur",p.isSimulated=!0,d(l),p.target===p.currentTarget&&d(p)}else o.event.simulate(a,l.target,o.event.fix(l))}o.event.special[e]={setup:function(){var l;if(sr(this,e,!0),m.documentMode)l=le.get(this,a),l||this.addEventListener(a,s),le.set(this,a,(l||0)+1);else return!1},trigger:function(){return sr(this,e),!0},teardown:function(){var l;if(m.documentMode)l=le.get(this,a)-1,l?le.set(this,a,l):(this.removeEventListener(a,s),le.remove(this,a));else return!1},_default:function(l){return le.get(l.target,e)},delegateType:a},o.event.special[a]={setup:function(){var l=this.ownerDocument||this.document||this,d=m.documentMode?this:l,p=le.get(d,a);p||(m.documentMode?this.addEventListener(a,s):l.addEventListener(e,s,!0)),le.set(d,a,(p||0)+1)},teardown:function(){var l=this.ownerDocument||this.document||this,d=m.documentMode?this:l,p=le.get(d,a)-1;p?le.set(d,a,p):(m.documentMode?this.removeEventListener(a,s):l.removeEventListener(e,s,!0),le.remove(d,a))}}}),o.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,a){o.event.special[e]={delegateType:a,bindType:a,handle:function(s){var l,d=this,p=s.relatedTarget,v=s.handleObj;return(!p||p!==d&&!o.contains(d,p))&&(s.type=v.origType,l=v.handler.apply(this,arguments),s.type=a),l}}}),o.fn.extend({on:function(e,a,s,l){return ir(this,e,a,s,l)},one:function(e,a,s,l){return ir(this,e,a,s,l,1)},off:function(e,a,s){var l,d;if(e&&e.preventDefault&&e.handleObj)return l=e.handleObj,o(e.delegateTarget).off(l.namespace?l.origType+"."+l.namespace:l.origType,l.selector,l.handler),this;if(typeof e=="object"){for(d in e)this.off(d,a,e[d]);return this}return(a===!1||typeof a=="function")&&(s=a,a=void 0),s===!1&&(s=jt),this.each(function(){o.event.remove(this,e,s,a)})}});var Gr=/<script|<style|<link/i,jn=/checked\s*(?:[^=]|=\s*.checked.)/i,qn=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Dr(e,a){return j(e,"table")&&j(a.nodeType!==11?a:a.firstChild,"tr")&&o(e).children("tbody")[0]||e}function Nn(e){return e.type=(e.getAttribute("type")!==null)+"/"+e.type,e}function Kr(e){return(e.type||"").slice(0,5)==="true/"?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Vr(e,a){var s,l,d,p,v,_,L;if(a.nodeType===1){if(le.hasData(e)&&(p=le.get(e),L=p.events,L)){le.remove(a,"handle events");for(d in L)for(s=0,l=L[d].length;s<l;s++)o.event.add(a,d,L[d][s])}ot.hasData(e)&&(v=ot.access(e),_=o.extend({},v),ot.set(a,_))}}function bi(e,a){var s=a.nodeName.toLowerCase();s==="input"&&At.test(e.type)?a.checked=e.checked:(s==="input"||s==="textarea")&&(a.defaultValue=e.defaultValue)}function qt(e,a,s,l){a=f(a);var d,p,v,_,L,P,Q=0,X=e.length,B=X-1,te=a[0],ye=x(te);if(ye||X>1&&typeof te=="string"&&!k.checkClone&&jn.test(te))return e.each(function(Ee){var Se=e.eq(Ee);ye&&(a[0]=te.call(this,Ee,Se.html())),qt(Se,a,s,l)});if(X&&(d=Yr(a,e[0].ownerDocument,!1,e,l),p=d.firstChild,d.childNodes.length===1&&(d=p),p||l)){for(v=o.map(Je(d,"script"),Nn),_=v.length;Q<X;Q++)L=d,Q!==B&&(L=o.clone(L,!0,!0),_&&o.merge(v,Je(L,"script"))),s.call(e[Q],L,Q);if(_)for(P=v[v.length-1].ownerDocument,o.map(v,Kr),Q=0;Q<_;Q++)L=v[Q],Rt.test(L.type||"")&&!le.access(L,"globalEval")&&o.contains(P,L)&&(L.src&&(L.type||"").toLowerCase()!=="module"?o._evalUrl&&!L.noModule&&o._evalUrl(L.src,{nonce:L.nonce||L.getAttribute("nonce")},P):E(L.textContent.replace(qn,""),L,P))}return e}function Jt(e,a,s){for(var l,d=a?o.filter(a,e):e,p=0;(l=d[p])!=null;p++)!s&&l.nodeType===1&&o.cleanData(Je(l)),l.parentNode&&(s&&q(l)&&gt(Je(l,"script")),l.parentNode.removeChild(l));return e}o.extend({htmlPrefilter:function(e){return e},clone:function(e,a,s){var l,d,p,v,_=e.cloneNode(!0),L=q(e);if(!k.noCloneChecked&&(e.nodeType===1||e.nodeType===11)&&!o.isXMLDoc(e))for(v=Je(_),p=Je(e),l=0,d=p.length;l<d;l++)bi(p[l],v[l]);if(a)if(s)for(p=p||Je(e),v=v||Je(_),l=0,d=p.length;l<d;l++)Vr(p[l],v[l]);else Vr(e,_);return v=Je(_,"script"),v.length>0&&gt(v,!L&&Je(e,"script")),_},cleanData:function(e){for(var a,s,l,d=o.event.special,p=0;(s=e[p])!==void 0;p++)if(Ot(s)){if(a=s[le.expando]){if(a.events)for(l in a.events)d[l]?o.event.remove(s,l):o.removeEvent(s,l,a.handle);s[le.expando]=void 0}s[ot.expando]&&(s[ot.expando]=void 0)}}}),o.fn.extend({detach:function(e){return Jt(this,e,!0)},remove:function(e){return Jt(this,e)},text:function(e){return pt(this,function(a){return a===void 0?o.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=a)})},null,e,arguments.length)},append:function(){return qt(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var a=Dr(this,e);a.appendChild(e)}})},prepend:function(){return qt(this,arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var a=Dr(this,e);a.insertBefore(e,a.firstChild)}})},before:function(){return qt(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return qt(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,a=0;(e=this[a])!=null;a++)e.nodeType===1&&(o.cleanData(Je(e,!1)),e.textContent="");return this},clone:function(e,a){return e=e??!1,a=a??e,this.map(function(){return o.clone(this,e,a)})},html:function(e){return pt(this,function(a){var s=this[0]||{},l=0,d=this.length;if(a===void 0&&s.nodeType===1)return s.innerHTML;if(typeof a=="string"&&!Gr.test(a)&&!ft[(ct.exec(a)||["",""])[1].toLowerCase()]){a=o.htmlPrefilter(a);try{for(;l<d;l++)s=this[l]||{},s.nodeType===1&&(o.cleanData(Je(s,!1)),s.innerHTML=a);s=0}catch{}}s&&this.empty().append(a)},null,e,arguments.length)},replaceWith:function(){var e=[];return qt(this,arguments,function(a){var s=this.parentNode;o.inArray(this,e)<0&&(o.cleanData(Je(this)),s&&s.replaceChild(a,this))},e)}}),o.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){o.fn[e]=function(s){for(var l,d=[],p=o(s),v=p.length-1,_=0;_<=v;_++)l=_===v?this:this.clone(!0),o(p[_])[a](l),h.apply(d,l.get());return this.pushStack(d)}});var or=new RegExp("^("+Pn+")(?!px)[a-z%]+$","i"),Xr=/^--/,Tr=function(e){var a=e.ownerDocument.defaultView;return(!a||!a.opener)&&(a=t),a.getComputedStyle(e)},Cu=function(e,a,s){var l,d,p={};for(d in a)p[d]=e.style[d],e.style[d]=a[d];l=s.call(e);for(d in a)e.style[d]=p[d];return l},Mg=new RegExp(St.join("|"),"i");(function(){function e(){if(P){L.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",P.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",Lt.appendChild(L).appendChild(P);var Q=t.getComputedStyle(P);s=Q.top!=="1%",_=a(Q.marginLeft)===12,P.style.right="60%",p=a(Q.right)===36,l=a(Q.width)===36,P.style.position="absolute",d=a(P.offsetWidth/3)===12,Lt.removeChild(L),P=null}}function a(Q){return Math.round(parseFloat(Q))}var s,l,d,p,v,_,L=m.createElement("div"),P=m.createElement("div");P.style&&(P.style.backgroundClip="content-box",P.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle=P.style.backgroundClip==="content-box",o.extend(k,{boxSizingReliable:function(){return e(),l},pixelBoxStyles:function(){return e(),p},pixelPosition:function(){return e(),s},reliableMarginLeft:function(){return e(),_},scrollboxSize:function(){return e(),d},reliableTrDimensions:function(){var Q,X,B,te;return v==null&&(Q=m.createElement("table"),X=m.createElement("tr"),B=m.createElement("div"),Q.style.cssText="position:absolute;left:-11111px;border-collapse:separate",X.style.cssText="box-sizing:content-box;border:1px solid",X.style.height="1px",B.style.height="9px",B.style.display="block",Lt.appendChild(Q).appendChild(X).appendChild(B),te=t.getComputedStyle(X),v=parseInt(te.height,10)+parseInt(te.borderTopWidth,10)+parseInt(te.borderBottomWidth,10)===X.offsetHeight,Lt.removeChild(Q)),v}}))})();function Jr(e,a,s){var l,d,p,v,_=Xr.test(a),L=e.style;return s=s||Tr(e),s&&(v=s.getPropertyValue(a)||s[a],_&&v&&(v=v.replace(K,"$1")||void 0),v===""&&!q(e)&&(v=o.style(e,a)),!k.pixelBoxStyles()&&or.test(v)&&Mg.test(a)&&(l=L.width,d=L.minWidth,p=L.maxWidth,L.minWidth=L.maxWidth=L.width=v,v=s.width,L.width=l,L.minWidth=d,L.maxWidth=p)),v!==void 0?v+"":v}function ku(e,a){return{get:function(){if(e()){delete this.get;return}return(this.get=a).apply(this,arguments)}}}var Ou=["Webkit","Moz","ms"],Iu=m.createElement("div").style,Lu={};function Pg(e){for(var a=e[0].toUpperCase()+e.slice(1),s=Ou.length;s--;)if(e=Ou[s]+a,e in Iu)return e}function Ti(e){var a=o.cssProps[e]||Lu[e];return a||(e in Iu?e:Lu[e]=Pg(e)||e)}var $g=/^(none|table(?!-c[ea]).+)/,jg={position:"absolute",visibility:"hidden",display:"block"},Eu={letterSpacing:"0",fontWeight:"400"};function Du(e,a,s){var l=br.exec(a);return l?Math.max(0,l[2]-(s||0))+(l[3]||"px"):a}function Si(e,a,s,l,d,p){var v=a==="width"?1:0,_=0,L=0,P=0;if(s===(l?"border":"content"))return 0;for(;v<4;v+=2)s==="margin"&&(P+=o.css(e,s+St[v],!0,d)),l?(s==="content"&&(L-=o.css(e,"padding"+St[v],!0,d)),s!=="margin"&&(L-=o.css(e,"border"+St[v]+"Width",!0,d))):(L+=o.css(e,"padding"+St[v],!0,d),s!=="padding"?L+=o.css(e,"border"+St[v]+"Width",!0,d):_+=o.css(e,"border"+St[v]+"Width",!0,d));return!l&&p>=0&&(L+=Math.max(0,Math.ceil(e["offset"+a[0].toUpperCase()+a.slice(1)]-p-L-_-.5))||0),L+P}function _u(e,a,s){var l=Tr(e),d=!k.boxSizingReliable()||s,p=d&&o.css(e,"boxSizing",!1,l)==="border-box",v=p,_=Jr(e,a,l),L="offset"+a[0].toUpperCase()+a.slice(1);if(or.test(_)){if(!s)return _;_="auto"}return(!k.boxSizingReliable()&&p||!k.reliableTrDimensions()&&j(e,"tr")||_==="auto"||!parseFloat(_)&&o.css(e,"display",!1,l)==="inline")&&e.getClientRects().length&&(p=o.css(e,"boxSizing",!1,l)==="border-box",v=L in e,v&&(_=e[L])),_=parseFloat(_)||0,_+Si(e,a,s||(p?"border":"content"),v,l,_)+"px"}o.extend({cssHooks:{opacity:{get:function(e,a){if(a){var s=Jr(e,"opacity");return s===""?"1":s}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,a,s,l){if(!(!e||e.nodeType===3||e.nodeType===8||!e.style)){var d,p,v,_=st(a),L=Xr.test(a),P=e.style;if(L||(a=Ti(_)),v=o.cssHooks[a]||o.cssHooks[_],s!==void 0){if(p=typeof s,p==="string"&&(d=br.exec(s))&&d[1]&&(s=Ne(e,a,d),p="number"),s==null||s!==s)return;p==="number"&&!L&&(s+=d&&d[3]||(o.cssNumber[_]?"":"px")),!k.clearCloneStyle&&s===""&&a.indexOf("background")===0&&(P[a]="inherit"),(!v||!("set"in v)||(s=v.set(e,s,l))!==void 0)&&(L?P.setProperty(a,s):P[a]=s)}else return v&&"get"in v&&(d=v.get(e,!1,l))!==void 0?d:P[a]}},css:function(e,a,s,l){var d,p,v,_=st(a),L=Xr.test(a);return L||(a=Ti(_)),v=o.cssHooks[a]||o.cssHooks[_],v&&"get"in v&&(d=v.get(e,!0,s)),d===void 0&&(d=Jr(e,a,l)),d==="normal"&&a in Eu&&(d=Eu[a]),s===""||s?(p=parseFloat(d),s===!0||isFinite(p)?p||0:d):d}}),o.each(["height","width"],function(e,a){o.cssHooks[a]={get:function(s,l,d){if(l)return $g.test(o.css(s,"display"))&&(!s.getClientRects().length||!s.getBoundingClientRect().width)?Cu(s,jg,function(){return _u(s,a,d)}):_u(s,a,d)},set:function(s,l,d){var p,v=Tr(s),_=!k.scrollboxSize()&&v.position==="absolute",L=_||d,P=L&&o.css(s,"boxSizing",!1,v)==="border-box",Q=d?Si(s,a,d,P,v):0;return P&&_&&(Q-=Math.ceil(s["offset"+a[0].toUpperCase()+a.slice(1)]-parseFloat(v[a])-Si(s,a,"border",!1,v)-.5)),Q&&(p=br.exec(l))&&(p[3]||"px")!=="px"&&(s.style[a]=l,l=o.css(s,a)),Du(s,l,Q)}}}),o.cssHooks.marginLeft=ku(k.reliableMarginLeft,function(e,a){if(a)return(parseFloat(Jr(e,"marginLeft"))||e.getBoundingClientRect().left-Cu(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),o.each({margin:"",padding:"",border:"Width"},function(e,a){o.cssHooks[e+a]={expand:function(s){for(var l=0,d={},p=typeof s=="string"?s.split(" "):[s];l<4;l++)d[e+St[l]+a]=p[l]||p[l-2]||p[0];return d}},e!=="margin"&&(o.cssHooks[e+a].set=Du)}),o.fn.extend({css:function(e,a){return pt(this,function(s,l,d){var p,v,_={},L=0;if(Array.isArray(l)){for(p=Tr(s),v=l.length;L<v;L++)_[l[L]]=o.css(s,l[L],!1,p);return _}return d!==void 0?o.style(s,l,d):o.css(s,l)},e,a,arguments.length>1)}});function xt(e,a,s,l,d){return new xt.prototype.init(e,a,s,l,d)}o.Tween=xt,xt.prototype={constructor:xt,init:function(e,a,s,l,d,p){this.elem=e,this.prop=s,this.easing=d||o.easing._default,this.options=a,this.start=this.now=this.cur(),this.end=l,this.unit=p||(o.cssNumber[s]?"":"px")},cur:function(){var e=xt.propHooks[this.prop];return e&&e.get?e.get(this):xt.propHooks._default.get(this)},run:function(e){var a,s=xt.propHooks[this.prop];return this.options.duration?this.pos=a=o.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=a=e,this.now=(this.end-this.start)*a+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),s&&s.set?s.set(this):xt.propHooks._default.set(this),this}},xt.prototype.init.prototype=xt.prototype,xt.propHooks={_default:{get:function(e){var a;return e.elem.nodeType!==1||e.elem[e.prop]!=null&&e.elem.style[e.prop]==null?e.elem[e.prop]:(a=o.css(e.elem,e.prop,""),!a||a==="auto"?0:a)},set:function(e){o.fx.step[e.prop]?o.fx.step[e.prop](e):e.elem.nodeType===1&&(o.cssHooks[e.prop]||e.elem.style[Ti(e.prop)]!=null)?o.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},xt.propHooks.scrollTop=xt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},o.easing={linear:function(e){return e},swing:function(e){return .5-Math.cos(e*Math.PI)/2},_default:"swing"},o.fx=xt.prototype.init,o.fx.step={};var _r,Fn,qg=/^(?:toggle|show|hide)$/,Ng=/queueHooks$/;function Ai(){Fn&&(m.hidden===!1&&t.requestAnimationFrame?t.requestAnimationFrame(Ai):t.setTimeout(Ai,o.fx.interval),o.fx.tick())}function Ru(){return t.setTimeout(function(){_r=void 0}),_r=Date.now()}function Un(e,a){var s,l=0,d={height:e};for(a=a?1:0;l<4;l+=2-a)s=St[l],d["margin"+s]=d["padding"+s]=e;return a&&(d.opacity=d.width=e),d}function Mu(e,a,s){for(var l,d=(Mt.tweeners[a]||[]).concat(Mt.tweeners["*"]),p=0,v=d.length;p<v;p++)if(l=d[p].call(s,a,e))return l}function Fg(e,a,s){var l,d,p,v,_,L,P,Q,X="width"in a||"height"in a,B=this,te={},ye=e.style,Ee=e.nodeType&&Ie(e),Se=le.get(e,"fxshow");s.queue||(v=o._queueHooks(e,"fx"),v.unqueued==null&&(v.unqueued=0,_=v.empty.fire,v.empty.fire=function(){v.unqueued||_()}),v.unqueued++,B.always(function(){B.always(function(){v.unqueued--,o.queue(e,"fx").length||v.empty.fire()})}));for(l in a)if(d=a[l],qg.test(d)){if(delete a[l],p=p||d==="toggle",d===(Ee?"hide":"show"))if(d==="show"&&Se&&Se[l]!==void 0)Ee=!0;else continue;te[l]=Se&&Se[l]||o.style(e,l)}if(L=!o.isEmptyObject(a),!(!L&&o.isEmptyObject(te))){X&&e.nodeType===1&&(s.overflow=[ye.overflow,ye.overflowX,ye.overflowY],P=Se&&Se.display,P==null&&(P=le.get(e,"display")),Q=o.css(e,"display"),Q==="none"&&(P?Q=P:(ht([e],!0),P=e.style.display||P,Q=o.css(e,"display"),ht([e]))),(Q==="inline"||Q==="inline-block"&&P!=null)&&o.css(e,"float")==="none"&&(L||(B.done(function(){ye.display=P}),P==null&&(Q=ye.display,P=Q==="none"?"":Q)),ye.display="inline-block")),s.overflow&&(ye.overflow="hidden",B.always(function(){ye.overflow=s.overflow[0],ye.overflowX=s.overflow[1],ye.overflowY=s.overflow[2]})),L=!1;for(l in te)L||(Se?"hidden"in Se&&(Ee=Se.hidden):Se=le.access(e,"fxshow",{display:P}),p&&(Se.hidden=!Ee),Ee&&ht([e],!0),B.done(function(){Ee||ht([e]),le.remove(e,"fxshow");for(l in te)o.style(e,l,te[l])})),L=Mu(Ee?Se[l]:0,l,B),l in Se||(Se[l]=L.start,Ee&&(L.end=L.start,L.start=0))}}function Ug(e,a){var s,l,d,p,v;for(s in e)if(l=st(s),d=a[l],p=e[s],Array.isArray(p)&&(d=p[1],p=e[s]=p[0]),s!==l&&(e[l]=p,delete e[s]),v=o.cssHooks[l],v&&"expand"in v){p=v.expand(p),delete e[l];for(s in p)s in e||(e[s]=p[s],a[s]=d)}else a[l]=d}function Mt(e,a,s){var l,d,p=0,v=Mt.prefilters.length,_=o.Deferred().always(function(){delete L.elem}),L=function(){if(d)return!1;for(var X=_r||Ru(),B=Math.max(0,P.startTime+P.duration-X),te=B/P.duration||0,ye=1-te,Ee=0,Se=P.tweens.length;Ee<Se;Ee++)P.tweens[Ee].run(ye);return _.notifyWith(e,[P,ye,B]),ye<1&&Se?B:(Se||_.notifyWith(e,[P,1,0]),_.resolveWith(e,[P]),!1)},P=_.promise({elem:e,props:o.extend({},a),opts:o.extend(!0,{specialEasing:{},easing:o.easing._default},s),originalProperties:a,originalOptions:s,startTime:_r||Ru(),duration:s.duration,tweens:[],createTween:function(X,B){var te=o.Tween(e,P.opts,X,B,P.opts.specialEasing[X]||P.opts.easing);return P.tweens.push(te),te},stop:function(X){var B=0,te=X?P.tweens.length:0;if(d)return this;for(d=!0;B<te;B++)P.tweens[B].run(1);return X?(_.notifyWith(e,[P,1,0]),_.resolveWith(e,[P,X])):_.rejectWith(e,[P,X]),this}}),Q=P.props;for(Ug(Q,P.opts.specialEasing);p<v;p++)if(l=Mt.prefilters[p].call(P,e,Q,P.opts),l)return x(l.stop)&&(o._queueHooks(P.elem,P.opts.queue).stop=l.stop.bind(l)),l;return o.map(Q,Mu,P),x(P.opts.start)&&P.opts.start.call(e,P),P.progress(P.opts.progress).done(P.opts.done,P.opts.complete).fail(P.opts.fail).always(P.opts.always),o.fx.timer(o.extend(L,{elem:e,anim:P,queue:P.opts.queue})),P}o.Animation=o.extend(Mt,{tweeners:{"*":[function(e,a){var s=this.createTween(e,a);return Ne(s.elem,e,br.exec(a),s),s}]},tweener:function(e,a){x(e)?(a=e,e=["*"]):e=e.match(ce);for(var s,l=0,d=e.length;l<d;l++)s=e[l],Mt.tweeners[s]=Mt.tweeners[s]||[],Mt.tweeners[s].unshift(a)},prefilters:[Fg],prefilter:function(e,a){a?Mt.prefilters.unshift(e):Mt.prefilters.push(e)}}),o.speed=function(e,a,s){var l=e&&typeof e=="object"?o.extend({},e):{complete:s||!s&&a||x(e)&&e,duration:e,easing:s&&a||a&&!x(a)&&a};return o.fx.off?l.duration=0:typeof l.duration!="number"&&(l.duration in o.fx.speeds?l.duration=o.fx.speeds[l.duration]:l.duration=o.fx.speeds._default),(l.queue==null||l.queue===!0)&&(l.queue="fx"),l.old=l.complete,l.complete=function(){x(l.old)&&l.old.call(this),l.queue&&o.dequeue(this,l.queue)},l},o.fn.extend({fadeTo:function(e,a,s,l){return this.filter(Ie).css("opacity",0).show().end().animate({opacity:a},e,s,l)},animate:function(e,a,s,l){var d=o.isEmptyObject(e),p=o.speed(a,s,l),v=function(){var _=Mt(this,o.extend({},e),p);(d||le.get(this,"finish"))&&_.stop(!0)};return v.finish=v,d||p.queue===!1?this.each(v):this.queue(p.queue,v)},stop:function(e,a,s){var l=function(d){var p=d.stop;delete d.stop,p(s)};return typeof e!="string"&&(s=a,a=e,e=void 0),a&&this.queue(e||"fx",[]),this.each(function(){var d=!0,p=e!=null&&e+"queueHooks",v=o.timers,_=le.get(this);if(p)_[p]&&_[p].stop&&l(_[p]);else for(p in _)_[p]&&_[p].stop&&Ng.test(p)&&l(_[p]);for(p=v.length;p--;)v[p].elem===this&&(e==null||v[p].queue===e)&&(v[p].anim.stop(s),d=!1,v.splice(p,1));(d||!s)&&o.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var a,s=le.get(this),l=s[e+"queue"],d=s[e+"queueHooks"],p=o.timers,v=l?l.length:0;for(s.finish=!0,o.queue(this,e,[]),d&&d.stop&&d.stop.call(this,!0),a=p.length;a--;)p[a].elem===this&&p[a].queue===e&&(p[a].anim.stop(!0),p.splice(a,1));for(a=0;a<v;a++)l[a]&&l[a].finish&&l[a].finish.call(this);delete s.finish})}}),o.each(["toggle","show","hide"],function(e,a){var s=o.fn[a];o.fn[a]=function(l,d,p){return l==null||typeof l=="boolean"?s.apply(this,arguments):this.animate(Un(a,!0),l,d,p)}}),o.each({slideDown:Un("show"),slideUp:Un("hide"),slideToggle:Un("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,a){o.fn[e]=function(s,l,d){return this.animate(a,s,l,d)}}),o.timers=[],o.fx.tick=function(){var e,a=0,s=o.timers;for(_r=Date.now();a<s.length;a++)e=s[a],!e()&&s[a]===e&&s.splice(a--,1);s.length||o.fx.stop(),_r=void 0},o.fx.timer=function(e){o.timers.push(e),o.fx.start()},o.fx.interval=13,o.fx.start=function(){Fn||(Fn=!0,Ai())},o.fx.stop=function(){Fn=null},o.fx.speeds={slow:600,fast:200,_default:400},o.fn.delay=function(e,a){return e=o.fx&&o.fx.speeds[e]||e,a=a||"fx",this.queue(a,function(s,l){var d=t.setTimeout(s,e);l.stop=function(){t.clearTimeout(d)}})},function(){var e=m.createElement("input"),a=m.createElement("select"),s=a.appendChild(m.createElement("option"));e.type="checkbox",k.checkOn=e.value!=="",k.optSelected=s.selected,e=m.createElement("input"),e.value="t",e.type="radio",k.radioValue=e.value==="t"}();var Pu,Zr=o.expr.attrHandle;o.fn.extend({attr:function(e,a){return pt(this,o.attr,e,a,arguments.length>1)},removeAttr:function(e){return this.each(function(){o.removeAttr(this,e)})}}),o.extend({attr:function(e,a,s){var l,d,p=e.nodeType;if(!(p===3||p===8||p===2)){if(typeof e.getAttribute>"u")return o.prop(e,a,s);if((p!==1||!o.isXMLDoc(e))&&(d=o.attrHooks[a.toLowerCase()]||(o.expr.match.bool.test(a)?Pu:void 0)),s!==void 0){if(s===null){o.removeAttr(e,a);return}return d&&"set"in d&&(l=d.set(e,s,a))!==void 0?l:(e.setAttribute(a,s+""),s)}return d&&"get"in d&&(l=d.get(e,a))!==null?l:(l=o.find.attr(e,a),l??void 0)}},attrHooks:{type:{set:function(e,a){if(!k.radioValue&&a==="radio"&&j(e,"input")){var s=e.value;return e.setAttribute("type",a),s&&(e.value=s),a}}}},removeAttr:function(e,a){var s,l=0,d=a&&a.match(ce);if(d&&e.nodeType===1)for(;s=d[l++];)e.removeAttribute(s)}}),Pu={set:function(e,a,s){return a===!1?o.removeAttr(e,s):e.setAttribute(s,s),s}},o.each(o.expr.match.bool.source.match(/\w+/g),function(e,a){var s=Zr[a]||o.find.attr;Zr[a]=function(l,d,p){var v,_,L=d.toLowerCase();return p||(_=Zr[L],Zr[L]=v,v=s(l,d,p)!=null?L:null,Zr[L]=_),v}});var Bg=/^(?:input|select|textarea|button)$/i,Hg=/^(?:a|area)$/i;o.fn.extend({prop:function(e,a){return pt(this,o.prop,e,a,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[o.propFix[e]||e]})}}),o.extend({prop:function(e,a,s){var l,d,p=e.nodeType;if(!(p===3||p===8||p===2))return(p!==1||!o.isXMLDoc(e))&&(a=o.propFix[a]||a,d=o.propHooks[a]),s!==void 0?d&&"set"in d&&(l=d.set(e,s,a))!==void 0?l:e[a]=s:d&&"get"in d&&(l=d.get(e,a))!==null?l:e[a]},propHooks:{tabIndex:{get:function(e){var a=o.find.attr(e,"tabindex");return a?parseInt(a,10):Bg.test(e.nodeName)||Hg.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),k.optSelected||(o.propHooks.selected={get:function(e){var a=e.parentNode;return a&&a.parentNode&&a.parentNode.selectedIndex,null},set:function(e){var a=e.parentNode;a&&(a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex)}}),o.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){o.propFix[this.toLowerCase()]=this});function Sr(e){var a=e.match(ce)||[];return a.join(" ")}function Ar(e){return e.getAttribute&&e.getAttribute("class")||""}function Ci(e){return Array.isArray(e)?e:typeof e=="string"?e.match(ce)||[]:[]}o.fn.extend({addClass:function(e){var a,s,l,d,p,v;return x(e)?this.each(function(_){o(this).addClass(e.call(this,_,Ar(this)))}):(a=Ci(e),a.length?this.each(function(){if(l=Ar(this),s=this.nodeType===1&&" "+Sr(l)+" ",s){for(p=0;p<a.length;p++)d=a[p],s.indexOf(" "+d+" ")<0&&(s+=d+" ");v=Sr(s),l!==v&&this.setAttribute("class",v)}}):this)},removeClass:function(e){var a,s,l,d,p,v;return x(e)?this.each(function(_){o(this).removeClass(e.call(this,_,Ar(this)))}):arguments.length?(a=Ci(e),a.length?this.each(function(){if(l=Ar(this),s=this.nodeType===1&&" "+Sr(l)+" ",s){for(p=0;p<a.length;p++)for(d=a[p];s.indexOf(" "+d+" ")>-1;)s=s.replace(" "+d+" "," ");v=Sr(s),l!==v&&this.setAttribute("class",v)}}):this):this.attr("class","")},toggleClass:function(e,a){var s,l,d,p,v=typeof e,_=v==="string"||Array.isArray(e);return x(e)?this.each(function(L){o(this).toggleClass(e.call(this,L,Ar(this),a),a)}):typeof a=="boolean"&&_?a?this.addClass(e):this.removeClass(e):(s=Ci(e),this.each(function(){if(_)for(p=o(this),d=0;d<s.length;d++)l=s[d],p.hasClass(l)?p.removeClass(l):p.addClass(l);else(e===void 0||v==="boolean")&&(l=Ar(this),l&&le.set(this,"__className__",l),this.setAttribute&&this.setAttribute("class",l||e===!1?"":le.get(this,"__className__")||""))}))},hasClass:function(e){var a,s,l=0;for(a=" "+e+" ";s=this[l++];)if(s.nodeType===1&&(" "+Sr(Ar(s))+" ").indexOf(a)>-1)return!0;return!1}});var Wg=/\r/g;o.fn.extend({val:function(e){var a,s,l,d=this[0];return arguments.length?(l=x(e),this.each(function(p){var v;this.nodeType===1&&(l?v=e.call(this,p,o(this).val()):v=e,v==null?v="":typeof v=="number"?v+="":Array.isArray(v)&&(v=o.map(v,function(_){return _==null?"":_+""})),a=o.valHooks[this.type]||o.valHooks[this.nodeName.toLowerCase()],(!a||!("set"in a)||a.set(this,v,"value")===void 0)&&(this.value=v))})):d?(a=o.valHooks[d.type]||o.valHooks[d.nodeName.toLowerCase()],a&&"get"in a&&(s=a.get(d,"value"))!==void 0?s:(s=d.value,typeof s=="string"?s.replace(Wg,""):s??"")):void 0}}),o.extend({valHooks:{option:{get:function(e){var a=o.find.attr(e,"value");return a??Sr(o.text(e))}},select:{get:function(e){var a,s,l,d=e.options,p=e.selectedIndex,v=e.type==="select-one",_=v?null:[],L=v?p+1:d.length;for(p<0?l=L:l=v?p:0;l<L;l++)if(s=d[l],(s.selected||l===p)&&!s.disabled&&(!s.parentNode.disabled||!j(s.parentNode,"optgroup"))){if(a=o(s).val(),v)return a;_.push(a)}return _},set:function(e,a){for(var s,l,d=e.options,p=o.makeArray(a),v=d.length;v--;)l=d[v],(l.selected=o.inArray(o.valHooks.option.get(l),p)>-1)&&(s=!0);return s||(e.selectedIndex=-1),p}}}}),o.each(["radio","checkbox"],function(){o.valHooks[this]={set:function(e,a){if(Array.isArray(a))return e.checked=o.inArray(o(e).val(),a)>-1}},k.checkOn||(o.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var en=t.location,$u={guid:Date.now()},ki=/\?/;o.parseXML=function(e){var a,s;if(!e||typeof e!="string")return null;try{a=new t.DOMParser().parseFromString(e,"text/xml")}catch{}return s=a&&a.getElementsByTagName("parsererror")[0],(!a||s)&&o.error("Invalid XML: "+(s?o.map(s.childNodes,function(l){return l.textContent}).join(`
`):e)),a};var ju=/^(?:focusinfocus|focusoutblur)$/,qu=function(e){e.stopPropagation()};o.extend(o.event,{trigger:function(e,a,s,l){var d,p,v,_,L,P,Q,X,B=[s||m],te=S.call(e,"type")?e.type:e,ye=S.call(e,"namespace")?e.namespace.split("."):[];if(p=X=v=s=s||m,!(s.nodeType===3||s.nodeType===8)&&!ju.test(te+o.event.triggered)&&(te.indexOf(".")>-1&&(ye=te.split("."),te=ye.shift(),ye.sort()),L=te.indexOf(":")<0&&"on"+te,e=e[o.expando]?e:new o.Event(te,typeof e=="object"&&e),e.isTrigger=l?2:3,e.namespace=ye.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+ye.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=s),a=a==null?[e]:o.makeArray(a,[e]),Q=o.event.special[te]||{},!(!l&&Q.trigger&&Q.trigger.apply(s,a)===!1))){if(!l&&!Q.noBubble&&!y(s)){for(_=Q.delegateType||te,ju.test(_+te)||(p=p.parentNode);p;p=p.parentNode)B.push(p),v=p;v===(s.ownerDocument||m)&&B.push(v.defaultView||v.parentWindow||t)}for(d=0;(p=B[d++])&&!e.isPropagationStopped();)X=p,e.type=d>1?_:Q.bindType||te,P=(le.get(p,"events")||Object.create(null))[e.type]&&le.get(p,"handle"),P&&P.apply(p,a),P=L&&p[L],P&&P.apply&&Ot(p)&&(e.result=P.apply(p,a),e.result===!1&&e.preventDefault());return e.type=te,!l&&!e.isDefaultPrevented()&&(!Q._default||Q._default.apply(B.pop(),a)===!1)&&Ot(s)&&L&&x(s[te])&&!y(s)&&(v=s[L],v&&(s[L]=null),o.event.triggered=te,e.isPropagationStopped()&&X.addEventListener(te,qu),s[te](),e.isPropagationStopped()&&X.removeEventListener(te,qu),o.event.triggered=void 0,v&&(s[L]=v)),e.result}},simulate:function(e,a,s){var l=o.extend(new o.Event,s,{type:e,isSimulated:!0});o.event.trigger(l,null,a)}}),o.fn.extend({trigger:function(e,a){return this.each(function(){o.event.trigger(e,a,this)})},triggerHandler:function(e,a){var s=this[0];if(s)return o.event.trigger(e,a,s,!0)}});var zg=/\[\]$/,Nu=/\r?\n/g,Yg=/^(?:submit|button|image|reset|file)$/i,Qg=/^(?:input|select|textarea|keygen)/i;function Oi(e,a,s,l){var d;if(Array.isArray(a))o.each(a,function(p,v){s||zg.test(e)?l(e,v):Oi(e+"["+(typeof v=="object"&&v!=null?p:"")+"]",v,s,l)});else if(!s&&R(a)==="object")for(d in a)Oi(e+"["+d+"]",a[d],s,l);else l(e,a)}o.param=function(e,a){var s,l=[],d=function(p,v){var _=x(v)?v():v;l[l.length]=encodeURIComponent(p)+"="+encodeURIComponent(_??"")};if(e==null)return"";if(Array.isArray(e)||e.jquery&&!o.isPlainObject(e))o.each(e,function(){d(this.name,this.value)});else for(s in e)Oi(s,e[s],a,d);return l.join("&")},o.fn.extend({serialize:function(){return o.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=o.prop(this,"elements");return e?o.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!o(this).is(":disabled")&&Qg.test(this.nodeName)&&!Yg.test(e)&&(this.checked||!At.test(e))}).map(function(e,a){var s=o(this).val();return s==null?null:Array.isArray(s)?o.map(s,function(l){return{name:a.name,value:l.replace(Nu,`\r
`)}}):{name:a.name,value:s.replace(Nu,`\r
`)}}).get()}});var Gg=/%20/g,Kg=/#.*$/,Vg=/([?&])_=[^&]*/,Xg=/^(.*?):[ \t]*([^\r\n]*)$/mg,Jg=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Zg=/^(?:GET|HEAD)$/,em=/^\/\//,Fu={},Ii={},Uu="*/".concat("*"),Li=m.createElement("a");Li.href=en.href;function Bu(e){return function(a,s){typeof a!="string"&&(s=a,a="*");var l,d=0,p=a.toLowerCase().match(ce)||[];if(x(s))for(;l=p[d++];)l[0]==="+"?(l=l.slice(1)||"*",(e[l]=e[l]||[]).unshift(s)):(e[l]=e[l]||[]).push(s)}}function Hu(e,a,s,l){var d={},p=e===Ii;function v(_){var L;return d[_]=!0,o.each(e[_]||[],function(P,Q){var X=Q(a,s,l);if(typeof X=="string"&&!p&&!d[X])return a.dataTypes.unshift(X),v(X),!1;if(p)return!(L=X)}),L}return v(a.dataTypes[0])||!d["*"]&&v("*")}function Ei(e,a){var s,l,d=o.ajaxSettings.flatOptions||{};for(s in a)a[s]!==void 0&&((d[s]?e:l||(l={}))[s]=a[s]);return l&&o.extend(!0,e,l),e}function tm(e,a,s){for(var l,d,p,v,_=e.contents,L=e.dataTypes;L[0]==="*";)L.shift(),l===void 0&&(l=e.mimeType||a.getResponseHeader("Content-Type"));if(l){for(d in _)if(_[d]&&_[d].test(l)){L.unshift(d);break}}if(L[0]in s)p=L[0];else{for(d in s){if(!L[0]||e.converters[d+" "+L[0]]){p=d;break}v||(v=d)}p=p||v}if(p)return p!==L[0]&&L.unshift(p),s[p]}function rm(e,a,s,l){var d,p,v,_,L,P={},Q=e.dataTypes.slice();if(Q[1])for(v in e.converters)P[v.toLowerCase()]=e.converters[v];for(p=Q.shift();p;)if(e.responseFields[p]&&(s[e.responseFields[p]]=a),!L&&l&&e.dataFilter&&(a=e.dataFilter(a,e.dataType)),L=p,p=Q.shift(),p){if(p==="*")p=L;else if(L!=="*"&&L!==p){if(v=P[L+" "+p]||P["* "+p],!v){for(d in P)if(_=d.split(" "),_[1]===p&&(v=P[L+" "+_[0]]||P["* "+_[0]],v)){v===!0?v=P[d]:P[d]!==!0&&(p=_[0],Q.unshift(_[1]));break}}if(v!==!0)if(v&&e.throws)a=v(a);else try{a=v(a)}catch(X){return{state:"parsererror",error:v?X:"No conversion from "+L+" to "+p}}}}return{state:"success",data:a}}o.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:en.href,type:"GET",isLocal:Jg.test(en.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Uu,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":o.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,a){return a?Ei(Ei(e,o.ajaxSettings),a):Ei(o.ajaxSettings,e)},ajaxPrefilter:Bu(Fu),ajaxTransport:Bu(Ii),ajax:function(e,a){typeof e=="object"&&(a=e,e=void 0),a=a||{};var s,l,d,p,v,_,L,P,Q,X,B=o.ajaxSetup({},a),te=B.context||B,ye=B.context&&(te.nodeType||te.jquery)?o(te):o.event,Ee=o.Deferred(),Se=o.Callbacks("once memory"),ut=B.statusCode||{},Ze={},Nt={},Ft="canceled",Le={readyState:0,getResponseHeader:function(_e){var Ve;if(L){if(!p)for(p={};Ve=Xg.exec(d);)p[Ve[1].toLowerCase()+" "]=(p[Ve[1].toLowerCase()+" "]||[]).concat(Ve[2]);Ve=p[_e.toLowerCase()+" "]}return Ve==null?null:Ve.join(", ")},getAllResponseHeaders:function(){return L?d:null},setRequestHeader:function(_e,Ve){return L==null&&(_e=Nt[_e.toLowerCase()]=Nt[_e.toLowerCase()]||_e,Ze[_e]=Ve),this},overrideMimeType:function(_e){return L==null&&(B.mimeType=_e),this},statusCode:function(_e){var Ve;if(_e)if(L)Le.always(_e[Le.status]);else for(Ve in _e)ut[Ve]=[ut[Ve],_e[Ve]];return this},abort:function(_e){var Ve=_e||Ft;return s&&s.abort(Ve),Cr(0,Ve),this}};if(Ee.promise(Le),B.url=((e||B.url||en.href)+"").replace(em,en.protocol+"//"),B.type=a.method||a.type||B.method||B.type,B.dataTypes=(B.dataType||"*").toLowerCase().match(ce)||[""],B.crossDomain==null){_=m.createElement("a");try{_.href=B.url,_.href=_.href,B.crossDomain=Li.protocol+"//"+Li.host!=_.protocol+"//"+_.host}catch{B.crossDomain=!0}}if(B.data&&B.processData&&typeof B.data!="string"&&(B.data=o.param(B.data,B.traditional)),Hu(Fu,B,a,Le),L)return Le;P=o.event&&B.global,P&&o.active++===0&&o.event.trigger("ajaxStart"),B.type=B.type.toUpperCase(),B.hasContent=!Zg.test(B.type),l=B.url.replace(Kg,""),B.hasContent?B.data&&B.processData&&(B.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(B.data=B.data.replace(Gg,"+")):(X=B.url.slice(l.length),B.data&&(B.processData||typeof B.data=="string")&&(l+=(ki.test(l)?"&":"?")+B.data,delete B.data),B.cache===!1&&(l=l.replace(Vg,"$1"),X=(ki.test(l)?"&":"?")+"_="+$u.guid+++X),B.url=l+X),B.ifModified&&(o.lastModified[l]&&Le.setRequestHeader("If-Modified-Since",o.lastModified[l]),o.etag[l]&&Le.setRequestHeader("If-None-Match",o.etag[l])),(B.data&&B.hasContent&&B.contentType!==!1||a.contentType)&&Le.setRequestHeader("Content-Type",B.contentType),Le.setRequestHeader("Accept",B.dataTypes[0]&&B.accepts[B.dataTypes[0]]?B.accepts[B.dataTypes[0]]+(B.dataTypes[0]!=="*"?", "+Uu+"; q=0.01":""):B.accepts["*"]);for(Q in B.headers)Le.setRequestHeader(Q,B.headers[Q]);if(B.beforeSend&&(B.beforeSend.call(te,Le,B)===!1||L))return Le.abort();if(Ft="abort",Se.add(B.complete),Le.done(B.success),Le.fail(B.error),s=Hu(Ii,B,a,Le),!s)Cr(-1,"No Transport");else{if(Le.readyState=1,P&&ye.trigger("ajaxSend",[Le,B]),L)return Le;B.async&&B.timeout>0&&(v=t.setTimeout(function(){Le.abort("timeout")},B.timeout));try{L=!1,s.send(Ze,Cr)}catch(_e){if(L)throw _e;Cr(-1,_e)}}function Cr(_e,Ve,rn,_i){var Ut,nn,Bt,ur,lr,Dt=Ve;L||(L=!0,v&&t.clearTimeout(v),s=void 0,d=_i||"",Le.readyState=_e>0?4:0,Ut=_e>=200&&_e<300||_e===304,rn&&(ur=tm(B,Le,rn)),!Ut&&o.inArray("script",B.dataTypes)>-1&&o.inArray("json",B.dataTypes)<0&&(B.converters["text script"]=function(){}),ur=rm(B,ur,Le,Ut),Ut?(B.ifModified&&(lr=Le.getResponseHeader("Last-Modified"),lr&&(o.lastModified[l]=lr),lr=Le.getResponseHeader("etag"),lr&&(o.etag[l]=lr)),_e===204||B.type==="HEAD"?Dt="nocontent":_e===304?Dt="notmodified":(Dt=ur.state,nn=ur.data,Bt=ur.error,Ut=!Bt)):(Bt=Dt,(_e||!Dt)&&(Dt="error",_e<0&&(_e=0))),Le.status=_e,Le.statusText=(Ve||Dt)+"",Ut?Ee.resolveWith(te,[nn,Dt,Le]):Ee.rejectWith(te,[Le,Dt,Bt]),Le.statusCode(ut),ut=void 0,P&&ye.trigger(Ut?"ajaxSuccess":"ajaxError",[Le,B,Ut?nn:Bt]),Se.fireWith(te,[Le,Dt]),P&&(ye.trigger("ajaxComplete",[Le,B]),--o.active||o.event.trigger("ajaxStop")))}return Le},getJSON:function(e,a,s){return o.get(e,a,s,"json")},getScript:function(e,a){return o.get(e,void 0,a,"script")}}),o.each(["get","post"],function(e,a){o[a]=function(s,l,d,p){return x(l)&&(p=p||d,d=l,l=void 0),o.ajax(o.extend({url:s,type:a,dataType:p,data:l,success:d},o.isPlainObject(s)&&s))}}),o.ajaxPrefilter(function(e){var a;for(a in e.headers)a.toLowerCase()==="content-type"&&(e.contentType=e.headers[a]||"")}),o._evalUrl=function(e,a,s){return o.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(l){o.globalEval(l,a,s)}})},o.fn.extend({wrapAll:function(e){var a;return this[0]&&(x(e)&&(e=e.call(this[0])),a=o(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&a.insertBefore(this[0]),a.map(function(){for(var s=this;s.firstElementChild;)s=s.firstElementChild;return s}).append(this)),this},wrapInner:function(e){return x(e)?this.each(function(a){o(this).wrapInner(e.call(this,a))}):this.each(function(){var a=o(this),s=a.contents();s.length?s.wrapAll(e):a.append(e)})},wrap:function(e){var a=x(e);return this.each(function(s){o(this).wrapAll(a?e.call(this,s):e)})},unwrap:function(e){return this.parent(e).not("body").each(function(){o(this).replaceWith(this.childNodes)}),this}}),o.expr.pseudos.hidden=function(e){return!o.expr.pseudos.visible(e)},o.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},o.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch{}};var nm={0:200,1223:204},tn=o.ajaxSettings.xhr();k.cors=!!tn&&"withCredentials"in tn,k.ajax=tn=!!tn,o.ajaxTransport(function(e){var a,s;if(k.cors||tn&&!e.crossDomain)return{send:function(l,d){var p,v=e.xhr();if(v.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(p in e.xhrFields)v[p]=e.xhrFields[p];e.mimeType&&v.overrideMimeType&&v.overrideMimeType(e.mimeType),!e.crossDomain&&!l["X-Requested-With"]&&(l["X-Requested-With"]="XMLHttpRequest");for(p in l)v.setRequestHeader(p,l[p]);a=function(_){return function(){a&&(a=s=v.onload=v.onerror=v.onabort=v.ontimeout=v.onreadystatechange=null,_==="abort"?v.abort():_==="error"?typeof v.status!="number"?d(0,"error"):d(v.status,v.statusText):d(nm[v.status]||v.status,v.statusText,(v.responseType||"text")!=="text"||typeof v.responseText!="string"?{binary:v.response}:{text:v.responseText},v.getAllResponseHeaders()))}},v.onload=a(),s=v.onerror=v.ontimeout=a("error"),v.onabort!==void 0?v.onabort=s:v.onreadystatechange=function(){v.readyState===4&&t.setTimeout(function(){a&&s()})},a=a("abort");try{v.send(e.hasContent&&e.data||null)}catch(_){if(a)throw _}},abort:function(){a&&a()}}}),o.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),o.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return o.globalEval(e),e}}}),o.ajaxPrefilter("script",function(e){e.cache===void 0&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),o.ajaxTransport("script",function(e){if(e.crossDomain||e.scriptAttrs){var a,s;return{send:function(l,d){a=o("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",s=function(p){a.remove(),s=null,p&&d(p.type==="error"?404:200,p.type)}),m.head.appendChild(a[0])},abort:function(){s&&s()}}}});var Wu=[],Di=/(=)\?(?=&|$)|\?\?/;o.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Wu.pop()||o.expando+"_"+$u.guid++;return this[e]=!0,e}}),o.ajaxPrefilter("json jsonp",function(e,a,s){var l,d,p,v=e.jsonp!==!1&&(Di.test(e.url)?"url":typeof e.data=="string"&&(e.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Di.test(e.data)&&"data");if(v||e.dataTypes[0]==="jsonp")return l=e.jsonpCallback=x(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,v?e[v]=e[v].replace(Di,"$1"+l):e.jsonp!==!1&&(e.url+=(ki.test(e.url)?"&":"?")+e.jsonp+"="+l),e.converters["script json"]=function(){return p||o.error(l+" was not called"),p[0]},e.dataTypes[0]="json",d=t[l],t[l]=function(){p=arguments},s.always(function(){d===void 0?o(t).removeProp(l):t[l]=d,e[l]&&(e.jsonpCallback=a.jsonpCallback,Wu.push(l)),p&&x(d)&&d(p[0]),p=d=void 0}),"script"}),k.createHTMLDocument=function(){var e=m.implementation.createHTMLDocument("").body;return e.innerHTML="<form></form><form></form>",e.childNodes.length===2}(),o.parseHTML=function(e,a,s){if(typeof e!="string")return[];typeof a=="boolean"&&(s=a,a=!1);var l,d,p;return a||(k.createHTMLDocument?(a=m.implementation.createHTMLDocument(""),l=a.createElement("base"),l.href=m.location.href,a.head.appendChild(l)):a=m),d=De.exec(e),p=!s&&[],d?[a.createElement(d[1])]:(d=Yr([e],a,p),p&&p.length&&o(p).remove(),o.merge([],d.childNodes))},o.fn.load=function(e,a,s){var l,d,p,v=this,_=e.indexOf(" ");return _>-1&&(l=Sr(e.slice(_)),e=e.slice(0,_)),x(a)?(s=a,a=void 0):a&&typeof a=="object"&&(d="POST"),v.length>0&&o.ajax({url:e,type:d||"GET",dataType:"html",data:a}).done(function(L){p=arguments,v.html(l?o("<div>").append(o.parseHTML(L)).find(l):L)}).always(s&&function(L,P){v.each(function(){s.apply(this,p||[L.responseText,P,L])})}),this},o.expr.pseudos.animated=function(e){return o.grep(o.timers,function(a){return e===a.elem}).length},o.offset={setOffset:function(e,a,s){var l,d,p,v,_,L,P,Q=o.css(e,"position"),X=o(e),B={};Q==="static"&&(e.style.position="relative"),_=X.offset(),p=o.css(e,"top"),L=o.css(e,"left"),P=(Q==="absolute"||Q==="fixed")&&(p+L).indexOf("auto")>-1,P?(l=X.position(),v=l.top,d=l.left):(v=parseFloat(p)||0,d=parseFloat(L)||0),x(a)&&(a=a.call(e,s,o.extend({},_))),a.top!=null&&(B.top=a.top-_.top+v),a.left!=null&&(B.left=a.left-_.left+d),"using"in a?a.using.call(e,B):X.css(B)}},o.fn.extend({offset:function(e){if(arguments.length)return e===void 0?this:this.each(function(d){o.offset.setOffset(this,e,d)});var a,s,l=this[0];if(l)return l.getClientRects().length?(a=l.getBoundingClientRect(),s=l.ownerDocument.defaultView,{top:a.top+s.pageYOffset,left:a.left+s.pageXOffset}):{top:0,left:0}},position:function(){if(this[0]){var e,a,s,l=this[0],d={top:0,left:0};if(o.css(l,"position")==="fixed")a=l.getBoundingClientRect();else{for(a=this.offset(),s=l.ownerDocument,e=l.offsetParent||s.documentElement;e&&(e===s.body||e===s.documentElement)&&o.css(e,"position")==="static";)e=e.parentNode;e&&e!==l&&e.nodeType===1&&(d=o(e).offset(),d.top+=o.css(e,"borderTopWidth",!0),d.left+=o.css(e,"borderLeftWidth",!0))}return{top:a.top-d.top-o.css(l,"marginTop",!0),left:a.left-d.left-o.css(l,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&o.css(e,"position")==="static";)e=e.offsetParent;return e||Lt})}}),o.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,a){var s=a==="pageYOffset";o.fn[e]=function(l){return pt(this,function(d,p,v){var _;if(y(d)?_=d:d.nodeType===9&&(_=d.defaultView),v===void 0)return _?_[a]:d[p];_?_.scrollTo(s?_.pageXOffset:v,s?v:_.pageYOffset):d[p]=v},e,l,arguments.length)}}),o.each(["top","left"],function(e,a){o.cssHooks[a]=ku(k.pixelPosition,function(s,l){if(l)return l=Jr(s,a),or.test(l)?o(s).position()[a]+"px":l})}),o.each({Height:"height",Width:"width"},function(e,a){o.each({padding:"inner"+e,content:a,"":"outer"+e},function(s,l){o.fn[l]=function(d,p){var v=arguments.length&&(s||typeof d!="boolean"),_=s||(d===!0||p===!0?"margin":"border");return pt(this,function(L,P,Q){var X;return y(L)?l.indexOf("outer")===0?L["inner"+e]:L.document.documentElement["client"+e]:L.nodeType===9?(X=L.documentElement,Math.max(L.body["scroll"+e],X["scroll"+e],L.body["offset"+e],X["offset"+e],X["client"+e])):Q===void 0?o.css(L,P,_):o.style(L,P,Q,_)},a,v?d:void 0,v)}})}),o.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,a){o.fn[a]=function(s){return this.on(a,s)}}),o.fn.extend({bind:function(e,a,s){return this.on(e,null,a,s)},unbind:function(e,a){return this.off(e,null,a)},delegate:function(e,a,s,l){return this.on(a,e,s,l)},undelegate:function(e,a,s){return arguments.length===1?this.off(e,"**"):this.off(a,e||"**",s)},hover:function(e,a){return this.on("mouseenter",e).on("mouseleave",a||e)}}),o.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,a){o.fn[a]=function(s,l){return arguments.length>0?this.on(a,null,s,l):this.trigger(a)}});var am=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;o.proxy=function(e,a){var s,l,d;if(typeof a=="string"&&(s=e[a],a=e,e=s),!!x(e))return l=c.call(arguments,2),d=function(){return e.apply(a||this,l.concat(c.call(arguments)))},d.guid=e.guid=e.guid||o.guid++,d},o.holdReady=function(e){e?o.readyWait++:o.ready(!0)},o.isArray=Array.isArray,o.parseJSON=JSON.parse,o.nodeName=j,o.isFunction=x,o.isWindow=y,o.camelCase=st,o.type=R,o.now=Date.now,o.isNumeric=function(e){var a=o.type(e);return(a==="number"||a==="string")&&!isNaN(e-parseFloat(e))},o.trim=function(e){return e==null?"":(e+"").replace(am,"$1")};var im=t.jQuery,sm=t.$;return o.noConflict=function(e){return t.$===o&&(t.$=sm),e&&t.jQuery===o&&(t.jQuery=im),o},typeof r>"u"&&(t.jQuery=t.$=o),o})}(Sn)),Sn.exports}uh();function lh(n){const t=vp();if(!t||t<119)return"";n.partitionKey={topLevelSite:"https://1688.com"},t>=130&&(n.partitionKey.hasCrossSiteAncestor=!1)}var oi={},ui={},An={},li={exports:{}},Uo;function ch(){return Uo||(Uo=1,function(n){n.exports=t,t.defunct=function(r){throw new Error("Unexpected character at index "+(this.index-1)+": "+r)};function t(r){typeof r!="function"&&(r=t.defunct);var i=[],u=[],c=0;this.state=0,this.index=0,this.input="",this.addRule=function(h,w,g){var b=h.global;if(!b){var S="g";h.multiline&&(S+="m"),h.ignoreCase&&(S+="i"),h=new RegExp(h.source,S)}return Object.prototype.toString.call(g)!=="[object Array]"&&(g=[0]),u.push({pattern:h,global:b,action:w,start:g}),this},this.setInput=function(h){return c=0,this.state=0,this.index=0,i.length=0,this.input=h,this},this.lex=function(){if(i.length)return i.shift();for(this.reject=!0;this.index<=this.input.length;){for(var h=f.call(this).splice(c),w=this.index;h.length&&this.reject;){var g=h.shift(),b=g.result,S=g.length;this.index+=S,this.reject=!1,c++;var T=g.action.apply(this,b);if(this.reject)this.index=b.index;else if(typeof T<"u")switch(Object.prototype.toString.call(T)){case"[object Array]":i=T.slice(1),T=T[0];default:return S&&(c=0),T}}var A=this.input;if(w<A.length)if(this.reject){c=0;var T=r.call(this,A.charAt(this.index++));if(typeof T<"u")return Object.prototype.toString.call(T)==="[object Array]"?(i=T.slice(1),T[0]):T}else this.index!==w&&(c=0),this.reject=!0;else if(h.length)this.reject=!0;else break}};function f(){for(var h=[],w=0,g=this.state,b=this.index,S=this.input,T=0,A=u.length;T<A;T++){var k=u[T],x=k.start,y=x.length;if(!y||x.indexOf(g)>=0||g%2&&y===1&&!x[0]){var m=k.pattern;m.lastIndex=b;var C=m.exec(S);if(C&&C.index===b){var E=h.push({result:C,action:k.action,length:C[0].length});for(k.global&&(w=E);--E>w;){var R=E-1;if(h[E].length>h[R].length){var $=h[E];h[E]=h[R],h[R]=$}}}}}return h}}}(li)),li.exports}var Cn={exports:{}},Bo={};/*! http://mths.be/fromcodepoint v0.2.1 by @mathias */var Ho;function fh(){return Ho||(Ho=1,String.fromCodePoint||function(){var n=function(){try{var u={},c=Object.defineProperty,f=c(u,u,u)&&c}catch{}return f}(),t=String.fromCharCode,r=Math.floor,i=function(u){var c=16384,f=[],h,w,g=-1,b=arguments.length;if(!b)return"";for(var S="";++g<b;){var T=Number(arguments[g]);if(!isFinite(T)||T<0||T>1114111||r(T)!=T)throw RangeError("Invalid code point: "+T);T<=65535?f.push(T):(T-=65536,h=(T>>10)+55296,w=T%1024+56320,f.push(h,w)),(g+1==b||f.length>c)&&(S+=t.apply(null,f),f.length=0)}return S};n?n(String,"fromCodePoint",{value:i,configurable:!0,writable:!0}):String.fromCodePoint=i}()),Bo}var Wo;function dh(){return Wo||(Wo=1,function(n,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,fh();var r=/\\(u\{([0-9A-Fa-f]+)\}|u([0-9A-Fa-f]{4})|x([0-9A-Fa-f]{2})|([1-7][0-7]{0,2}|[0-7]{2,3})|(['"tbrnfv0\\]))|\\U([0-9A-Fa-f]{8})/g,i={0:"\0",b:"\b",f:"\f",n:`
`,r:"\r",t:"	",v:"\v","'":"'",'"':'"',"\\":"\\"},u=function(w){return String.fromCodePoint(parseInt(w,16))},c=function(w){return String.fromCodePoint(parseInt(w,8))},f=function(w){return w.replace(r,function(g,b,S,T,A,k,x,y){return S!==void 0?u(S):T!==void 0?u(T):A!==void 0?u(A):k!==void 0?c(k):y!==void 0?u(y):i[x]})};t.default=f,n.exports=t.default}(Cn,Cn.exports)),Cn.exports}var ci={};/*! https://mths.be/utf8js v3.0.0 by @mathias */var zo;function ph(){return zo||(zo=1,function(n){(function(t){var r=String.fromCharCode;function i(x){for(var y=[],m=0,C=x.length,E,R;m<C;)E=x.charCodeAt(m++),E>=55296&&E<=56319&&m<C?(R=x.charCodeAt(m++),(R&64512)==56320?y.push(((E&1023)<<10)+(R&1023)+65536):(y.push(E),m--)):y.push(E);return y}function u(x){for(var y=x.length,m=-1,C,E="";++m<y;)C=x[m],C>65535&&(C-=65536,E+=r(C>>>10&1023|55296),C=56320|C&1023),E+=r(C);return E}function c(x){if(x>=55296&&x<=57343)throw Error("Lone surrogate U+"+x.toString(16).toUpperCase()+" is not a scalar value")}function f(x,y){return r(x>>y&63|128)}function h(x){if((x&4294967168)==0)return r(x);var y="";return(x&4294965248)==0?y=r(x>>6&31|192):(x&4294901760)==0?(c(x),y=r(x>>12&15|224),y+=f(x,6)):(x&4292870144)==0&&(y=r(x>>18&7|240),y+=f(x,12),y+=f(x,6)),y+=r(x&63|128),y}function w(x){for(var y=i(x),m=y.length,C=-1,E,R="";++C<m;)E=y[C],R+=h(E);return R}function g(){if(A>=T)throw Error("Invalid byte index");var x=S[A]&255;if(A++,(x&192)==128)return x&63;throw Error("Invalid continuation byte")}function b(){var x,y,m,C,E;if(A>T)throw Error("Invalid byte index");if(A==T)return!1;if(x=S[A]&255,A++,(x&128)==0)return x;if((x&224)==192){if(y=g(),E=(x&31)<<6|y,E>=128)return E;throw Error("Invalid continuation byte")}if((x&240)==224){if(y=g(),m=g(),E=(x&15)<<12|y<<6|m,E>=2048)return c(E),E;throw Error("Invalid continuation byte")}if((x&248)==240&&(y=g(),m=g(),C=g(),E=(x&7)<<18|y<<12|m<<6|C,E>=65536&&E<=1114111))return E;throw Error("Invalid UTF-8 detected")}var S,T,A;function k(x){S=i(x),T=S.length,A=0;for(var y=[],m;(m=b())!==!1;)y.push(m);return u(y)}t.version="3.0.0",t.encode=w,t.decode=k})(n)}(ci)),ci}var Yo;function hh(){if(Yo)return An;Yo=1;const n=ch(),t=dh();ph();const r=6,i=7,u=11,c=12,f=13,h=14,A=[[/\s*:\s*/,-1],[/\s*,\s*/,-2],[/\s*{\s*/,-3],[/\s*}\s*/,f],[/\s*\[\s*/,-4],[/\s*\]\s*/,c],[/\s*\.\s*/,-5]];function k(C){return C=C.replace(/\\\//,"/"),t(C)}function x(C){let E=new n,R=0,$=0;return E.addRule(/"((?:\\.|[^"])*?)($|")/,(D,o)=>(R+=D.length,{type:u,value:k(o),row:$,col:R,single:!1})),E.addRule(/'((?:\\.|[^'])*?)($|'|(",?[ \t]*\n))/,(D,o)=>(R+=D.length,{type:u,value:k(o),row:$,col:R,single:!0})),E.addRule(/[\-0-9]*\.[0-9]*([eE][\+\-]?)?[0-9]*(?:\s*)/,D=>(R+=D.length,{type:r,value:parseFloat(D),row:$,col:R})),E.addRule(/\-?[0-9]+([eE][\+\-]?)[0-9]*(?:\s*)/,D=>(R+=D.length,{type:r,value:parseFloat(D),row:$,col:R})),E.addRule(/\-?[0-9]+(?:\s*)/,D=>(R+=D.length,{type:i,value:parseInt(D),row:$,col:R})),A.forEach(D=>{E.addRule(D[0],o=>(R+=o.length,{type:D[1],value:o,row:$,col:R}))}),E.addRule(/\s/,D=>{D==`
`?(R=0,$++):R+=D.length}),E.addRule(/\S[ \t]*/,D=>(R+=D.length,{type:h,value:D,row:$,col:R})),E.setInput(C),E}An.lexString=y;function y(C,E){let R=x(C),$="";for(;$=R.lex();)E($)}An.getAllTokens=m;function m(C){let E=[];return y(C,function($){E.push($)}),E}return An}var Qo;function gh(){if(Qo)return ui;Qo=1;let n=hh();const t=0,r=1,i=2,u=3,c=4,f=5,h=6,w=7,g=8,b=9,S=10,T=11,A=12,k=13,x=14,y=15,m=-1,C=-2,E=-3,R=-4;function $(O){O.peek==null&&Object.defineProperty(O,"peek",{enumerable:!1,value:function(){return this[this.length-1]}}),O.last==null&&Object.defineProperty(O,"last",{enumerable:!1,value:function(F){return this[this.length-(1+F)]}})}function D(O,F){return O&&O.hasOwnProperty("type")&&O.type==F}function o(O){}ui.parse=U;function U(O,F){let G=[],K=[];$(G),$(K);let H=function(Z){K.push(Z)};n.lexString(O,H),K[0].type==R&&K.last(0).type!=A&&K.push({type:A,value:"]",row:-1,col:-1}),K[0].type==E&&K.last(0).type!=k&&K.push({type:k,value:"}",row:-1,col:-1});for(let Z=0;Z<K.length;Z++)for(""+K[Z].type,G.push(K[Z]);j(G););return G.length==1&&G[0].type==r&&(G=[{type:S,value:G[0].value}]),Y(G[0],F)}function j(O){let F=O.pop();switch(F.type){case g:if(F.value.trim()=="true")return O.push({type:u,value:"true"}),!0;if(F.value.trim()=="false")return O.push({type:u,value:"false"}),!0;if(F.value.trim()=="null")return O.push({type:y,value:null}),!0;break;case x:return D(O.peek(),g)?(O.peek().value+=F.value,!0):(O.push({type:g,value:F.value}),!0);case w:return D(F,w)&&D(O.peek(),g)?(O.peek().value+=F.value,!0):(F.type=y,O.push(F),!0);case T:return F.type=y,F.value=F.value,O.push(F),!0;case u:return F.type=y,F.value=="true"?F.value=!0:F.value=!1,O.push(F),!0;case h:return F.type=y,O.push(F),!0;case y:if(D(O.peek(),C))return F.type=f,O.pop(),O.push(F),!0;if(D(O.peek(),m))return F.type=c,O.pop(),O.push(F),!0;if(D(O.peek(),g)&&D(O.last(1),y)){let G=O.pop();return O.peek().value+='"'+G.value+'"',O.peek().value+=F.value,!0}if(D(O.peek(),g)&&D(O.last(1),i)){let G=O.pop(),K=O.peek().value.pop();return K+='"'+G.value+'"',K+=F.value,O.peek().value.push(K),!0}if(D(O.peek(),g)&&D(O.last(1),r)){let G=O.pop(),K=O.peek().value.pop();const H=F.single?"'":'"';return K.value+=H+G.value+H,K.value+=F.value,O.peek().value.push(K),!0}if(D(O.peek(),g)){let G=O.pop().value;return F.value=G+F.value,O.push(F),!0}break;case b:if(D(F,b)&&D(O.peek(),C))return F.type=f,O.pop(),O.push(F),!0;if(D(O.peek(),m))return F.type=c,O.pop(),O.push(F),!0;break;case S:if(D(O.peek(),C)){let G={type:f,value:F};return O.pop(),O.push(G),!0}if(D(O.peek(),m)){let G={type:c,value:F};return O.pop(),O.push(G),!0}if(D(O.peek(),g)){let G=O.pop();return O.push({type:t,key:G.value.trim(),value:F}),!0}break;case f:return D(O.peek(),i)?(O.peek().value.push(F.value),!0):(O.push({type:i,value:[F.value]}),!0);case i:if(D(O.peek(),y)||D(O.peek(),b))return F.value.unshift(O.peek().value),O.pop(),O.push(F),!0;if(D(O.peek(),S))return F.value.unshift(O.peek()),O.pop(),O.push(F),!0;if(D(O.peek(),g)&&(O.last(1),C)){let G=O.pop();for(O.push({type:y,value:G.value}),""+G.value;j(O););return O.push(F),!0}if(D(O.peek(),i))return O.peek().value.push(F.value[0]),!0;break;case c:if(D(O.peek(),g)||D(O.peek(),y)||D(O.peek(),i)){let G=O.pop();return O.push({type:t,key:G.value,value:F.value}),!0}throw new Error("Got a :value that can't be handled at line "+F.row+":"+F.col);case t:return D(O.last(0),C)&&D(O.last(1),r)?(O.last(1).value.push(F),O.pop(),!0):(O.push({type:r,value:[F]}),!0);case r:if(D(O.peek(),r))return F.value.forEach(function(G){O.peek().value.push(G)}),!0;break;case A:if(D(O.peek(),i)&&D(O.last(1),R)){let G=O.pop();return O.pop(),O.push({type:b,value:G.value}),!0}if(D(O.peek(),b)&&D(O.last(1),R)){let G=O.pop();return O.pop(),O.push({type:b,value:[G.value]}),!0}if(D(O.peek(),R))return O.pop(),O.push({type:b,value:[]}),!0;if(D(O.peek(),y)&&D(O.last(1),R)){let G=O.pop().value;return O.pop(),O.push({type:b,value:[G]}),!0}if(D(O.peek(),S)&&D(O.last(1),R)){let G=O.pop();return O.pop(),O.push({type:b,value:[G]}),!0}if(D(O.peek(),g)&&D(O.last(1),C)){let G=O.pop();for(O.push({type:y,value:G.value}),""+G.value;j(O););return O.push({type:A}),!0}if(D(O.peek(),C)&&(D(O.last(1),g)||D(O.last(1),S)||D(O.last(1),y))){for(O.pop(),O.push({type:A,value:"]"}),""+JSON.stringify(O);j(O););return!0}if(D(O.peek(),g)&&D(O.last(1),R)){let G=O.pop();return O.pop(),O.push({type:b,value:[G.value]}),!0}if(D(O.peek(),C)&&D(O.last(1),i)){for(O.pop(),O.push({type:A}),""+JSON.stringify(O);j(O););return!0}break;case k:if(D(O.peek(),r)&&D(O.last(1),E)){let G=O.pop();return O.pop(),O.push({type:S,value:G.value}),!0}if(D(O.peek(),E))return O.pop(),O.push({type:S,value:null}),!0;if(D(O.peek(),g)&&D(O.last(1),m)){let G=O.pop();for(O.push({type:y,value:G.value}),""+G.value;j(O););return O.push({type:k}),!0}if(D(O.peek(),m)){for(O.push({type:y,value:null});j(O););return O.push({type:k}),!0}if(D(O.peek(),C))return O.pop(),O.push({type:k}),!0;throw new Error("Found } that I can't handle at line "+F.row+":"+F.col);case C:if(D(O.peek(),C))return!0;if(D(O.peek(),g)){const G=O.pop();for(O.push({type:y,value:G.value});j(O););return O.push(F),!0}if(D(O.peek(),m)){for(O.push({type:y,value:null});j(O););return O.push(F),!0}}return O.push(F),!1}function Y(O,F){if(["boolean","number","string"].indexOf(typeof O)!=-1)return O;if(O===null)return null;if(Array.isArray(O)){let K=[];for(;O.length>0;)K.unshift(Y(O.pop()));return K}if(D(O,S)){let K={};return O.value===null?{}:(O.value.forEach(function(H){const Z=H.key,ee=Y(H.value);F&&Z in K?K[Z]={value:K[Z],next:ee}:K[Z]=ee}),K)}return D(O,b)?Y(O.value):O.value}return ui}var Go;function mh(){if(Go)return oi;Go=1;let n=gh();oi.parse=t;function t(r,i){let u=!0,c=!1;i&&("fallback"in i&&i[u]===!1&&(u=!1),c="duplicateKeys"in i&&i.duplicateKeys===!0);try{return n.parse(r,c)}catch(f){if(u===!1)throw f;try{let h=JSON.parse(r);return console.warn("dirty-json got valid JSON that failed with the custom parser. We're returning the valid JSON, but please file a bug report here: https://github.com/RyanMarcus/dirty-json/issues  -- the JSON that caused the failure was: "+r),h}catch{throw f}}}return oi}mh();/*! js-cookie v3.0.5 | MIT */function kn(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)n[i]=r[i]}return n}var yh={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function fi(n,t){function r(u,c,f){if(!(typeof document>"u")){f=kn({},t,f),typeof f.expires=="number"&&(f.expires=new Date(Date.now()+f.expires*864e5)),f.expires&&(f.expires=f.expires.toUTCString()),u=encodeURIComponent(u).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var h="";for(var w in f)f[w]&&(h+="; "+w,f[w]!==!0&&(h+="="+f[w].split(";")[0]));return document.cookie=u+"="+n.write(c,u)+h}}function i(u){if(!(typeof document>"u"||arguments.length&&!u)){for(var c=document.cookie?document.cookie.split("; "):[],f={},h=0;h<c.length;h++){var w=c[h].split("="),g=w.slice(1).join("=");try{var b=decodeURIComponent(w[0]);if(f[b]=n.read(g,b),u===b)break}catch{}}return u?f[u]:f}}return Object.create({set:r,get:i,remove:function(u,c){r(u,"",kn({},c,{expires:-1}))},withAttributes:function(u){return fi(this.converter,kn({},this.attributes,u))},withConverter:function(u){return fi(kn({},this.converter,u),this.attributes)}},{attributes:{value:Object.freeze(t)},converter:{value:Object.freeze(n)}})}fi(yh,{path:"/"});const wh=()=>{const n=()=>({id:2,priority:999,action:{type:chrome.declarativeNetRequest.RuleActionType.REDIRECT,redirect:{transform:{queryTransform:{removeParams:["extId"],addOrReplaceParams:[{key:"extId",value:JSON.stringify(wp)}]}}}},condition:{tabIds:[],urlFilter:"||order.1688.com/order/smart_make_order.htm",resourceTypes:[chrome.declarativeNetRequest.ResourceType.MAIN_FRAME,chrome.declarativeNetRequest.ResourceType.SUB_FRAME]}});return{updateExtIdDynamicRules:async r=>{const i=n();if(i.condition.tabIds=[r],(await fe.declarativeNetRequest.getSessionRules()).find(f=>f.id===i.id)){const h=(await fe.tabs.query({})).map(g=>g.id),w=Array.from(new Set([...i.condition.tabIds,r]));i.condition.tabIds=fp(w,h)}return fe.declarativeNetRequest.updateSessionRules({removeRuleIds:[i.id],addRules:[i]}).then(()=>fe.declarativeNetRequest.getSessionRules())}}},vh=()=>{const n=["_m_h5_tk","_m_h5_tk_enc","mtop_partitioned_detect"];async function t(i,u=!1){const c={url:i};u&&lh(c);const f=await fe.cookies.getAll(c),h=[];for(const w of f)n.includes(w.name)&&h.push(w);return h.length!==n.length&&!u?t(i,!0):h}async function r(i){if(!i)return;const u=await t(i);for(const c of u){const{name:f,value:h}=c;await fe.cookies.set({url:i,name:f,value:h})}}return{fix1688MtopApiCookieToken:r}},{sendMessage:xh,onMessage:Ur}=Wt(),bh=()=>{const{createAutoCollect:n,updateAutoCollectResult:t,destroyAutoCollect:r,validatorAutoCollect:i,setTaskTabActive:u}=Al(c=>{xh("collectProgress",{...c},c.tabId)});Ur("createAutoCollect",c=>n(c.sender.tab.id,c.data)),Ur("validatorAutoCollect",c=>i(c.sender.tab.id)),Ur("updateAutoCollectResult",c=>t(c.sender.tab.id,c.data)),Ur("destroyAutoCollect",c=>r(c.data)),Ur("setTaskTabActive",c=>u(c.data))},{sendMessage:bm,onMessage:Th}=Wt(),On=(n,t)=>()=>Th(n,r=>t(r.data)),Sh=On("getCookie",n=>new Promise(t=>{fe.cookies.get(n,r=>{t(r)})})),Ah=On("setCookie",n=>new Promise(t=>{fe.cookies.set(n,r=>{t(r)})})),Ch=On("removeCookie",n=>new Promise(t=>{fe.cookies.remove(n,()=>{t()})})),kh=On("getAllCookies",n=>new Promise(t=>{fe.cookies.getAll(n,r=>{t(r)})})),Oh=()=>{Sh(),Ah(),Ch(),kh()},{sendMessage:Tm,onMessage:Ih}=Wt(),Lh=()=>{Ih("getSelf",()=>fe.management.getSelf())},{sendMessage:Sm,onMessage:In}=Wt(),{startCrawlTask:Eh,setCrawlTabId:Dh,crawlShop:_h,getCrawlInfo:Rh}=Cl();function Mh(){return In("startCrawlTask",async n=>{Eh(n.data)})}function Ph(){return In("setCrawlTabId",async n=>{var t;Dh({crawlTabId:(t=n.sender.tab)==null?void 0:t.id,...n.data})})}function $h(){return In("crawlShop",async n=>{_h(n.data)})}function jh(){return In("getCrawlInfo",async n=>Rh(n.data))}function qh(){Mh(),Ph(),$h(),jh()}const{sendMessage:Nh,onMessage:di}=Wt(),{updateExtIdDynamicRules:Fh}=wh(),Uh=()=>{di("updateExtIdDynamicRules",n=>Fh(n.sender.tab.id))},{fix1688MtopApiCookieToken:Bh}=vh(),Hh=()=>{di("fix1688MtopApiCookieToken",n=>Bh(n.data))},Wh=()=>{Uh(),Hh(),di("notifyPurchaseSuccess",async n=>{const t=n.data;return await Nh("purchaseSuccess",{...t},t.purchaseStartTabId)})},{sendMessage:Am,onMessage:Ko}=Wt(),zh=()=>Ko("plwFetch",n=>de(n.data)),Yh=()=>Ko("commonFetch",n=>mr(n.data)),{sendMessage:Cm,onMessage:Vo}=Wt(),Ln=(n,t)=>()=>Vo(n,r=>t(r.data)),Qh=Ln("queryTab",n=>fe.tabs.query(n)),Gh=Ln("createTab",n=>fe.tabs.create(n)),Kh=Ln("getTab",n=>fe.tabs.get(n)),Vh=Ln("removeTab",n=>fe.tabs.remove(n)),Xh=()=>{Vo("senderTabInfo",n=>n.sender.tab)},Jh=()=>{Gh(),Vh(),Qh(),Kh(),Xh()},Ct="https://erp.91miaoshou.com/api",yr="https://sso.geiwohuo.com",Zh="gmt_order_delivery",eg="gmt_settlement";async function wr(n){const{url:t,data:r=null,type:i="POST"}=n||{},u={};i==="POST"?u.body=r&&JSON.stringify(r):u.params=r||void 0;const c=await mr({url:t,method:i,headers:{"content-type":"application/json;charset=UTF-8"},...u}),f=c?c.msg:"";return(f?!+f.includes("子系统登录重定向"):1)?c:Promise.reject("未登录SHEIN后台")}function Xo(n,t){const r=new Date(n),i=new Date(r.toISOString()),u={year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:t,hour12:!1},f=new Intl.DateTimeFormat("en-US",u).format(i),[h,w]=f.split(", "),[g,b,S]=h.split("/").map(x=>x.padStart(2,"0")),[T,A,k]=w.split(":").map(x=>x.padStart(2,"0"));return`${S}-${g}-${b} ${T}:${A}:${k}`}const pi="local:crawlSheinChoiceMallInfoList",Jo="local:crawlSheinChoiceTabId";let hi=class extends Error{constructor(r,i){super(r);ne(this,"sleepSeconds");this.name=this.constructor.name,this.sleepSeconds=i,Error.captureStackTrace(this,this.constructor)}};const kt={isDebug:!1,crawlTabId:null,localData:{},crawlQueue:null};let En=class{constructor(t,r=null){ne(this,"earthUrlsMap",{updateCrawlRequestStatus:`${Ct}/platform/shein_choice/stat/crawl/update_crawl_request_status`,initCrawlRequestDetail:`${Ct}/platform/shein_choice/stat/crawl/init_crawl_request_detail`});ne(this,"mallId");ne(this,"requestId");ne(this,"crawlTaskKey");ne(this,"crawlTaskNameAndRetKey");ne(this,"crawlTaskNameAndLogKey");ne(this,"crawlTaskObj",{});ne(this,"crawlRequestIdAndTaskNameAndRetObj");ne(this,"crawlRequestIdAndTaskNameAndLogObj");this.mallId=t,this.requestId=r,this.crawlTaskKey=`crawl_shein_choice_task_${this.mallId}`,this.crawlTaskNameAndRetKey=`crawl_shein_choice_task_ret_${this.mallId}`,this.crawlTaskNameAndLogKey=`crawl_shein_choice_task_log_${this.mallId}`}async init(){this.crawlTaskObj=await Lr(this.crawlTaskKey),this.crawlRequestIdAndTaskNameAndRetObj=await this.initCacheData(this.crawlTaskNameAndRetKey),this.crawlRequestIdAndTaskNameAndLogObj=await this.initCacheData(this.crawlTaskNameAndLogKey)}resetAllTaskCount(t){this.crawlTaskObj.status=null,this.crawlTaskObj.requestId=this.requestId,this.crawlTaskObj.allTaskCount=t,this.crawlTaskObj.finishTaskCount=0;for(const r in this.crawlRequestIdAndTaskNameAndRetObj){const i=this.crawlRequestIdAndTaskNameAndRetObj[r]||{};for(const u in i)i[u]&&i[u].result==="success"&&this.crawlTaskObj.finishTaskCount++}this.setItem(this.crawlTaskKey,this.crawlTaskObj)}incrFinishTaskCount(t){this.crawlTaskObj.finishTaskCount+=t,this.setItem(this.crawlTaskKey,this.crawlTaskObj)}async getCrawlInfo(){var b;const t={mallId:this.mallId,status:null,progressText:"",progressRate:""};(((b=kt.crawlQueue)==null?void 0:b.crawlQueueList)||[]).find(S=>`${S.mallId}`==`${this.mallId}`)&&(t.status="processing");const{requestId:u,currentTaskName:c,progressText:f,allTaskCount:h,finishTaskCount:w,status:g}=this.crawlTaskObj;return this.requestId&&`${this.requestId}`==`${u}`&&(t.progressText=`【${c}】：${f}`,t.progressRate=h>0?Math.floor(w/h*100):0,g==="success"?t.progressText="采集完成":g==="fail"&&(t.progressText=`采集部分失败：${t.reason||""}`)),console.debug("CrawlInfo",t),t}async updateRequestStatus(t,r){return de({url:this.earthUrlsMap.updateCrawlRequestStatus,method:"POST",data:{requestId:t,status:r.result,reason:r.reason}})}async saveRequestDetail(t,r){return de({url:this.earthUrlsMap.initCrawlRequestDetail,method:"POST",data:{requestId:t,desc:r}})}async initCacheData(t){const r=await Lr(t);let i={};for(const c in r)if(!this.requestId||`${this.requestId}`==`${c}`){i=r[c];break}const u={};return u[this.requestId]=i,u}setItem(t,r){this.requestId&&xn(t,r),this.sendToClientTab()}async sendToClientTab(){if(!kt.crawlTabId)return;const t=await this.getCrawlInfo();try{const r=await qe.getItem(pi)||[],{mallId:i}=t,u=r.reduce((c,f)=>(`${f.id}`==`${i}`?c.push({...f,...t}):c.push(f),c),[]);qe.setItem(pi,u)}catch(r){kt.crawlTabId=null,console.debug(r)}}isTaskSuccess(t,r){const i=this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t]||{};return!!(r&&i[r]&&i[r].result==="success"||i.result==="success")}async updateRequestRet(t){if(this.crawlTaskObj.status=t==null?void 0:t.result,this.crawlTaskObj.reason=t==null?void 0:t.reason,this.setItem(this.crawlTaskKey,this.crawlTaskObj),(await this.updateRequestStatus(this.requestId,t)).result!=="success")throw new Error(`更新采集结果:${t.reason}`)}async saveTaskSubTaskRet(t,r,i){this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t]||(this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t]={}),this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t][r]=i,this.setItem(this.crawlTaskNameAndRetKey,this.crawlRequestIdAndTaskNameAndRetObj);let u="";i.result==="success"?u="采集成功":u=`采集失败，原因：${i.reason}`,await this.updateTaskProgress(t,r+u)}async saveTaskRet(t,r){let i=t,u="";r.result==="success"?(i+="，采集成功",u="采集成功"):(i+=`，采集失败，原因：${r.reason}`,u=`采集失败，原因：${r.reason}`),await this.updateTaskProgress(t,u);const c=await this.saveRequestDetail(this.requestId,i);if(c.result!=="success")throw new Error(`保存采集详情失败:${c.reason}`);r.canRetry||this.incrFinishTaskCount(1),this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t]=r,this.setItem(this.crawlTaskNameAndRetKey,this.crawlRequestIdAndTaskNameAndRetObj)}startTask(t){this.crawlTaskObj.currentTaskName=t,this.crawlTaskObj.progressText="开始采集",this.setItem(this.crawlTaskKey,this.crawlTaskObj),this.debugLog(t,"开始采集")}updateTaskProgress(t,r){this.crawlTaskObj.currentTaskName=t,this.crawlTaskObj.progressText=r,this.setItem(this.crawlTaskKey,this.crawlTaskObj),this.debugLog(t,r)}async debugLog(t,r){kt.isDebug&&(this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][t]||(this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][t]=[]),this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][t].push({date:Ue(),desc:r}),this.setItem(this.crawlTaskNameAndLogKey,this.crawlRequestIdAndTaskNameAndLogObj))}};class Zo{constructor({mallId:t,mallName:r,action:i,mallType:u,bindShopId:c,authAppNameList:f,startDate:h,endDate:w,requestId:g}){ne(this,"earthUrlsMap",{initCrawlRequest:`${Ct}/platform/shein_choice/stat/crawl/init_crawl_request`,updateCrawlRequestStatus:`${Ct}/platform/shein_choice/stat/crawl/update_crawl_request_status`,initCrawlRequestDetail:`${Ct}/platform/shein_choice/stat/crawl/init_crawl_request_detail`,getFullAccountName:`${Ct}/auth/account/get_full_account_name`,getAccountInfo:`${Ct}/auth/account/get_account_info`,createSheinChoiceImportTask:`${Ct}/order/data/import_cost/createSheinChoiceImportTask`});ne(this,"earthChoiceUrlMap",{saveMallLastRsyncTime:`${Ct}/platform/shein_choice/stat/crawl/saveMallLastRsyncTime`,saveCrawlWaitSettlementData:`${Ct}/platform/pddkj_choice/stat/crawl/saveCrawlWaitSettlementData`});ne(this,"sheinChoiceUrlMap",{getUserInfo:`${yr}/sso-prefix/auth/getUser`,getFileExportList:`${yr}/sso/common/fileExport/list`,getTimezoneList:`${yr}/sso/public/account/timezoneList`,exportPlatformWaitPayCheckDetail:`${yr}/gspJob/common/file/export/exportPlatformWaitPayCheckDetail`,exportPlatformPayedCheckDetail:`${yr}/gspJob/common/file/export/exportPlatformPayedCheckDetail`,getFileUrl:`${yr}/sso/common/fileExport/getFileUrl`});ne(this,"requestId");ne(this,"mallId");ne(this,"mallName");ne(this,"action");ne(this,"mallType");ne(this,"bindShopId");ne(this,"authAppNameList");ne(this,"startDate");ne(this,"endDate");ne(this,"crawlLogObj",{});this.requestId=g,this.mallId=t,this.mallName=r,this.action=i,this.mallType=u,this.bindShopId=c,this.authAppNameList=f||[],this.startDate=h,this.endDate=w,(!this.startDate||!this.endDate)&&(this.startDate=Xe().subtract(30,"day").format("YYYY-MM-DD"),this.endDate=Xe().format("YYYY-MM-DD"))}async startCrawl(){console.debug("startCrawl");try{if(!this.mallId)throw new Error("店铺为空");if(!this.bindShopId)throw new Error("绑定店铺为空");if(!this.requestId)throw new Error("采集日志ID为空");this.crawlLogObj=new En(this.mallId,this.requestId),await this.crawlLogObj.init(),this.crawlLogObj.resetAllTaskCount(2),await this.startCrawlChoiceWaitPayList(this.mallId,this.startDate,this.endDate),await this.startCrawlChoicePayedList(this.mallId,this.startDate,this.endDate),await this.crawlLogObj.updateRequestRet($e())}catch(t){if(this.crawlLogObj)await this.crawlLogObj.updateRequestRet(Re(Ce(t)));else throw t}}async startCrawlChoiceWaitPayList(t,r,i){const u="财务/我的收入/待结算收入",c="waitPayList";if(!this.crawlLogObj.isTaskSuccess(u))try{await this.crawlLogObj.startTask(u);const f=Date.now();let h=!1;const w={};let g={};const b=Xe(r).format("YYYY-MM-DD 00:00:00"),S=Xe(i).format("YYYY-MM-DD 23:59:59"),T=this.buildExportTaskHash(b,S,c);let A={result:"fail",reason:""};const k="hasTaskHashAndTaskIdMap";for(;!h;){if(Date.now()-f>18e4)throw new hi("导出等待超时",180);h=!0,g[T]||(g=Lr(k));const y=await this.getCurrentTimezoneInfo(),m=y.timezone,C=this.getCurrentUTC(y.defaultTimezone),E=Ue(),R=Xo(E,m),$=Xe(R).format("YYYY-MM-DD 00:00:00"),D=Xe(R).format("YYYY-MM-DD 23:59:59"),U=(await this.getFileExportList($,D)).find(j=>{const Y=new Date(this.convertToBeijingTime(j.createTime,C)).getTime(),O=j.fileName.includes("待结算账单");return Y<=(w[T]||0)+6e4&&O||g[T]});if(U)if(`${U.fileStatus}`=="1"){g[T]=U.id,xn(k,g);const j=await this.getFileUrl(U.id);if(!j)throw new Error("获取下载地址为空");const Y={gmtOrderDateStart:b,gmtOrderDateEnd:S,orderDateType:Zh,shopId:this.bindShopId,file:await this.getFileBase64(j),filename:U.id,requestId:this.requestId};A=await de({url:this.earthUrlsMap.createSheinChoiceImportTask,method:"POST",data:Y})}else h=!1;else h=!1,await this.exportPlatformWaitPayCheckDetail(b,S),w[T]||(w[T]=new Date(Ue()).getTime());await ve(5e3)}await this.saveMallLastRsyncTime(t,c),await this.crawlLogObj.saveTaskRet(u,A)}catch(f){await this.crawlLogObj.saveTaskRet(u,Re(Ce(f)))}}async startCrawlChoicePayedList(t,r,i){const u="财务/我的收入/已完成结算收入",c="payedList";if(!this.crawlLogObj.isTaskSuccess(u))try{await this.crawlLogObj.startTask(u);const f=Date.now();let h=!1;const w={};let g={};const b=Xe(r).format("YYYY-MM-DD 00:00:00"),S=Xe(i).format("YYYY-MM-DD 23:59:59"),T=this.buildExportTaskHash(b,S,c);let A={result:"fail",reason:""};const k="hasTaskHashAndTaskIdMap";for(;!h;){if(Date.now()-f>18e4)throw new hi("导出等待超时",180);h=!0,g[T]||(g=Lr(k));const y=await this.getCurrentTimezoneInfo(),m=y.timezone,C=this.getCurrentUTC(y.defaultTimezone),E=Ue(),R=Xo(E,m),$=Xe(R).format("YYYY-MM-DD 00:00:00"),D=Xe(R).format("YYYY-MM-DD 23:59:59"),U=(await this.getFileExportList($,D)).find(j=>{const Y=new Date(this.convertToBeijingTime(j.createTime,C)).getTime(),O=j.fileName.includes("已完成账单");return Y<=(w[T]||0)+6e4&&O||g[T]});if(U)if(`${U.fileStatus}`=="1"){g[T]=U.id,xn(k,g);const j=await this.getFileUrl(U.id);if(!j)throw new Error("获取下载地址为空");const Y={gmtOrderDateStart:b,gmtOrderDateEnd:S,orderDateType:eg,shopId:this.bindShopId,file:await this.getFileBase64(j),filename:U.id,requestId:this.requestId};A=await de({url:this.earthUrlsMap.createSheinChoiceImportTask,method:"POST",data:Y})}else h=!1;else h=!1,w[T]||(await this.exportPlatformPayedCheckDetail(b,S),w[T]=new Date(Ue()).getTime());await ve(5e3)}await this.saveMallLastRsyncTime(t,c),await this.crawlLogObj.saveTaskRet(u,A)}catch(f){await this.crawlLogObj.saveTaskRet(u,Re(Ce(f)))}}async getTimezoneList(){var i;const t=this.sheinChoiceUrlMap.getTimezoneList,r=await wr({url:t,type:"GET",data:{page:1,perPage:20}});if(`${r==null?void 0:r.code}`!="0")throw new Error(r.msg);return(i=r==null?void 0:r.info)==null?void 0:i.list}async getCurrentTimezoneInfo(){const t=await this.getUserInfo(),r=t.timezone;return t.utcTimezone?{timezone:r,defaultTimezone:t.utcTimezone}:(await this.getTimezoneList()).find(u=>`${u.timezone}`==`${r}`)}async getUserInfo(){const t=this.sheinChoiceUrlMap.getUserInfo,r=await wr({url:t,type:"GET"});if(`${r==null?void 0:r.code}`!="0")throw new Error(r.msg);return r.info}async getFileExportList(t,r){var c;const i=this.sheinChoiceUrlMap.getFileExportList,u=await wr({url:i,data:{createTimeStart:t,createTimeEnd:r,page:1,perPage:20}});if(`${u==null?void 0:u.code}`!="0")throw new Error(u.msg);return(c=u==null?void 0:u.info)==null?void 0:c.data}convertToBeijingTime(t,r){const i=new Date(t),u=new Date(i.toUTCString()),c=8*60,f=r*60,h=new Date(u.getTime()+(c-f)*60*1e3);return Xe(h).format("YYYY-MM-DD HH:mm:ss")}getCurrentUTC(t){return t.replace(/UTC|UCT/g,"")}buildExportTaskHash(t,r,i){return`${t}-${r}-${i}`}async getFileUrl(t){var u;const r=this.sheinChoiceUrlMap.getFileUrl,i=await wr({url:r,type:"GET",data:{id:t}});if(`${i==null?void 0:i.code}`!="0")throw new Error(i.msg);return(u=i==null?void 0:i.info)==null?void 0:u.url}async exportPlatformWaitPayCheckDetail(t,r){var c;const i=this.sheinChoiceUrlMap.exportPlatformWaitPayCheckDetail,u=await wr({url:i,type:"POST",data:{type:28,mode:2,orderDeliveryBeginTime:t,orderDeliveryEndTime:r}});if(`${u==null?void 0:u.code}`!="0")throw new Error(u.msg);return(c=u==null?void 0:u.info)==null?void 0:c.data}async exportPlatformPayedCheckDetail(t,r){const i=this.sheinChoiceUrlMap.exportPlatformPayedCheckDetail,u=await wr({url:i,type:"POST",data:{type:28,mode:2,payBeginTime:t,payEndTime:r}});if(`${u==null?void 0:u.code}`!="0")throw new Error(u.msg);return u.info.data}async getFileBase64(t){const i=await(await fetch(t)).blob();return await this.transBlobToBase64(i)}transBlobToBase64(t){return new Promise(r=>{const i=new FileReader;i.onload=function(u){var f;let c=(f=u==null?void 0:u.target)==null?void 0:f.result;c&&c.indexOf("base64,")>0&&(c=c.split("base64,")[1]),r(c)},i.readAsDataURL(t)})}async saveMallLastRsyncTime(t,r){return await de({url:this.earthChoiceUrlMap.saveMallLastRsyncTime,method:"POST",data:{mallId:t,rsyncType:r}})}}let eu=class{constructor(){ne(this,"earthUrlsMap",{getCrawlTaskUrl:`${Ct}/platform/shein_choice/stat/crawl/get_crawl_task`,initCrawlRequest:`${Ct}/platform/shein_choice/stat/crawl/init_crawl_request`});ne(this,"runStatus","wait");ne(this,"crawlQueueList",[]);ne(this,"isRunning",!1);ne(this,"nextAutoCrawlTime",0)}getAllWindows(){return new Promise(t=>{fe.windows.getAll({},r=>{t(r)})})}async run(t){console.debug("CrawlQueue run");try{if(this.runStatus="process",!kt.crawlTabId){let r=await qe.getItem(Jo);r=r?Number.parseInt(r):null,r=Fr(r)?null:r,kt.crawlTabId=r}for(;;){const i=(await this.getAllWindows()).length;if(console.debug("打开窗口数量",i),i>0){await this.autoCrawl();let u=await this.getTaskTs();const c=await qe.getItem("local:newTs");if(c&&(u=c,qe.removeItem("local:newTs")),u&&u>t){this.runStatus="waitStop";break}}await ve(900*1e3)}return new Promise(r=>{const i=setInterval(()=>{console.debug("wait stop"),this.isRunning===!1&&(clearInterval(i),console.debug("task stop"),r(!0))},3e3)})}catch(r){throw this.runStatus="waitStop",r}}async autoCrawl(){if(Date.now()<this.nextAutoCrawlTime)return;kt.isDebug?this.nextAutoCrawlTime=Date.now()+1e3*60:this.nextAutoCrawlTime=Date.now()+1e3*3600;try{const r=await de({url:this.earthUrlsMap.getCrawlTaskUrl,method:"GET"}),i=(r==null?void 0:r.taskList)||[];if(i.length){const u=await this.getSheinChoiceBackendLoginInfo();for(const c of i)`${c.mallId}`==`${u==null?void 0:u.supplierId}`&&(c.mallName=u.supplierUserName,c.platform="sheinChoice",this.addCrawlQueueByTask(c))}console.debug(Ue(),"crawlQueueList",this.crawlQueueList)}catch(r){console.debug(Ue(),"autoCrawl fail",r)}}async getTaskTs(){const t=await de({url:"http://plw.szchengji-inc.com/open/plugin/getBgTaskCodeTs",method:"GET"});return t==null?void 0:t.ts}addCrawlQueueByTask(t){console.debug("addCrawlQueueByTask",t);const{mallId:r,mallName:i,mallType:u,bindShopId:c,authAppNameList:f,host:h}=t;this.addCrawlQueue({mallId:r,mallName:i,mallType:u,bindShopId:c,authAppNameList:f,action:"auto",host:h})}async addCrawlQueue(t){const{mallId:r,mallName:i,mallType:u,bindShopId:c,authAppNameList:f,startDate:h,endDate:w,action:g,gmtExec:b,host:S}=t||{},T=this.crawlQueueList.find(k=>`${k.mallId}`==`${r}`);(!T||T.locked===0)&&(this.crawlQueueList=this.crawlQueueList.filter(k=>`${k.mallId}`!=`${r}`),this.crawlQueueList.push({mallId:r,mallName:i,mallType:u,bindShopId:c,authAppNameList:f,startDate:h,endDate:w,action:g||"auto",retryTimes:0,locked:0,gmtExec:b||Ue(),gmtLock:null,requestId:T&&T.requestId,host:S}),this.crawlQueueList.sort((k,x)=>new Date(k.gmtExec).getTime()-new Date(x.gmtExec).getTime()));const A=new En(r);await A.init(),A.sendToClientTab(),this.start()}async getSheinChoiceBackendLoginInfo(){const t=`${yr}/sso-prefix/auth/getUser`;try{const r=await mr({url:t}),i=r?r.msg:"";return(i?!+i.includes("子系统登录重定向"):1)?Promise.resolve(r):Promise.reject("未登录Shein后台")}catch{return Promise.resolve({})}}async start(){if(console.debug("start"),!this.isRunning){for(console.debug(Ue(),"start process queue"),this.isRunning=!0;;){let t=null;try{if(t=await this.lockQueue(),console.debug(Ue(),"lock queue",t),t){const r=await this.processQueue(t);console.debug(Ue(),"processQueue",r),await this.clearQueue(t,r)}else if(this.crawlQueueList.length>0)console.debug(Ue(),"lock empty,sleep"),await ve(10*1e3);else{console.debug(Ue(),"stop timer");break}}catch(r){console.debug(Ue(),"processQueue exception",t,r)}if(this.runStatus==="waitStop")break}this.isRunning=!1}}async lockQueue(){this.crawlQueueList=this.crawlQueueList.filter(i=>i.retryTimes<5);const t=Ue(),r=this.crawlQueueList.find(i=>i.locked===0&&i.gmtExec<=t);if(r){if(!r.requestId){const i=await this.initRequestId(r);if(i.result==="success")r.requestId=i.requestId;else return r.retryTimes++,null}r.locked=1,r.gmtLock=t}return r}async processQueue(t){try{return await new Zo(t).startCrawl(),{result:"success",reason:""}}catch(r){return r instanceof hi?{result:"fail",canRetry:!0,sleepSeconds:(r==null?void 0:r.sleepSeconds)||1800,reason:r.message}:{result:"fail",canRetry:!1,sleepSeconds:0,reason:Ce(r)}}}async clearQueue(t,r){if(r.canRetry){const u=this.crawlQueueList.find(c=>`${c.mallId}`==`${t.mallId}`);u.retryTimes++,u.locked=0,u.gmtExec=Ue(r.sleepSeconds||1800)}else this.crawlQueueList=this.crawlQueueList.filter(u=>`${u.mallId}`!=`${t.mallId}`);const i=new En(t.mallId,t.requestId);await i.init(),i.sendToClientTab()}initRequestId({mallId:t,mallName:r,action:i}){return de({url:this.earthUrlsMap.initCrawlRequest,method:"POST",data:{mallId:t,mallName:r,action:i}})}};const Br=Object.freeze(Object.defineProperty({__proto__:null,CrawlLog:En,CrawlQueue:eu,CrawlSheinChoice:Zo,CrawlTask:class{async run(){console.debug("sheinChoiceCrawlTask"),kt.crawlQueue||(kt.crawlQueue=new eu,await qe.getItem("local:crawlDebug")&&(kt.isDebug=!0));try{for(;;){const{ts:t,result:r}=await this.getTaskCode();if(console.debug("getSheinChoiceTaskCode",t),r==="success"){if(await kt.crawlQueue.run(t)!==!0)throw new Error("返回不是true");await ve(5*1e3)}else await ve(3600*1e3)}}catch(t){qe.setItem("local:bgTaskFail",`异常:${Date.now()}:${t==null?void 0:t.message}`)}}async getTaskCode(){return de({url:"http://plw.szchengji-inc.com/open/plugin/getBgTaskCode",method:"GET"})}},LOCAL_CRAWL_MALL_INFO_LIST:pi,LOCAL_CRAWL_SHEIN_CHOICE_TAB_ID:Jo,_globalCrawlData:kt,ajaxSheinChoice:wr},Symbol.toStringTag,{value:"Module"})),xe="https://erp.91miaoshou.com/api",gi="eprFee",tu="eprFeeRefund",Dn="gmt_settlement",tg="returnWaybillFee",ru="tradeIncome",nu="freightIncome",au="afterSalesRefund",iu="freightRefundAmount",su="illegalDeduction",ou="otherFee",rg="shipWaybillFee",mi="gmt_order_start",ng="afterSalesCompensationDeduction",ag="labelingServiceFee",ig="pickupServiceFee",sg="returnServiceFee",og="returnGoodsSortingPackingFee",ug="postDiscountTax",lg="platformSubsidy",cg="taxRefund",fg="waybillFee",dg="refundQuantity",pg="local:temuAntiContent";async function ge(n){let{mallId:t,url:r,data:i=null,retryTimes:u=0,antiContentStr:c}=n;const f=await mr({url:r,method:"POST",body:i&&JSON.stringify(i),headers:{Accept:"*/*","Anti-Content":c,"content-type":"application/json",Mallid:t}});return f.error_code&&(f.errorCode=f.error_code,f.errorMsg=f.error_msg),f.errorCode===40001&&(f.errorMsg||(f.errorMsg="登录过期，请重新登录")),f.errorCode===4000004&&(f.errorMsg||"").includes("请稍后重试")&&u<3?(await ve(3e3),u++,await ge({mallId:t,url:r,data:i,retryTimes:u,antiContentStr:c})):f}async function Gt(n){let{mallId:t,url:r,data:i=null,retryTimes:u=0}=n;const c=await mr({url:r,method:"POST",body:i&&JSON.stringify(i),headers:{"content-type":"application/json;charset=UTF-8"}});return c.errorCode===40001&&(c.errorMsg||(c.errorMsg="登录过期，请重新登录")),c.errorCode===4000004&&(c.errorMsg||"").includes("请稍后重试")&&u<3?(console.debug("请求频繁，等待3s后重试..."),await ve(3e3),u++,await Gt({mallId:t,url:r,data:i,retryTimes:u})):c}function pe(n,t="seller"){return`${uu(t).host||""}${n}`}function hg(n){return`https://agentseller.temu.com${n}`}function Kt(n){return uu(n).name||""}function uu(n){return{seller:{name:"seller",host:"https://seller.kuajingmaihuo.com"},us:{name:"美国",host:"https://agentseller-us.temu.com"},global:{name:"全球",host:"https://agentseller.temu.com"},eu:{name:"欧区",host:"https://agentseller-eu.temu.com"}}[n]||{}}function gg(n){try{return JSON.parse(n)}catch{return{}}}function lu(n,t){let r=0,i=0;const u=[];for(const c in n)i++,u[r]=u[r]||{},u[r][c]=n[c],i===t&&(r++,i=0);return u}function cu(n){if(!n)return 0;let t=n.replace(/,/g,"").replace(/[^\d.-]/g,"");t.includes(".")||(t+=".00");const r=Number.parseFloat(t).toFixed(2);return Fr(r)?0:r}const yi="local:crawlMallInfoList",fu="local:crawlTabId";class wt extends Error{constructor(r,i){super(r);ne(this,"sleepSeconds");this.name=this.constructor.name,this.sleepSeconds=i,Error.captureStackTrace(this,this.constructor)}}const Ge={isDebug:!1,crawlTabId:null,localData:{},crawlQueue:null};class _n{constructor(t,r=null){ne(this,"earthUrlsMap",{updateCrawlRequestStatus:`${xe}/platform/pddkj/stat/crawl/update_crawl_request_status`,initCrawlRequestDetail:`${xe}/platform/pddkj/stat/crawl/init_crawl_request_detail`});ne(this,"mallId");ne(this,"requestId");ne(this,"crawlTaskKey");ne(this,"crawlTaskNameAndRetKey");ne(this,"crawlTaskNameAndLogKey");ne(this,"crawlTaskObj",{});ne(this,"crawlRequestIdAndTaskNameAndRetObj");ne(this,"crawlRequestIdAndTaskNameAndLogObj");this.mallId=t,this.requestId=r,this.crawlTaskKey=`crawl_task_${this.mallId}`,this.crawlTaskNameAndRetKey=`crawl_task_ret_${this.mallId}`,this.crawlTaskNameAndLogKey=`crawl_task_log_${this.mallId}`}async init(){this.crawlTaskObj=await Lr(this.crawlTaskKey),this.crawlRequestIdAndTaskNameAndRetObj=await this.initCacheData(this.crawlTaskNameAndRetKey),this.crawlRequestIdAndTaskNameAndLogObj=await this.initCacheData(this.crawlTaskNameAndLogKey)}resetAllTaskCount(t){this.crawlTaskObj.status=null,this.crawlTaskObj.requestId=this.requestId,this.crawlTaskObj.allTaskCount=t,this.crawlTaskObj.finishTaskCount=0;for(const r in this.crawlRequestIdAndTaskNameAndRetObj){const i=this.crawlRequestIdAndTaskNameAndRetObj[r]||{};for(const u in i)i[u]&&i[u].result==="success"&&this.crawlTaskObj.finishTaskCount++}this.setItem(this.crawlTaskKey,this.crawlTaskObj)}incrFinishTaskCount(t){this.crawlTaskObj.finishTaskCount+=t,this.setItem(this.crawlTaskKey,this.crawlTaskObj)}async getCrawlInfo(){var b;const t={mallId:this.mallId,status:null,progressText:"",progressRate:""};(((b=Ge.crawlQueue)==null?void 0:b.crawlQueueList)||[]).find(S=>`${S.mallId}`==`${this.mallId}`)&&(t.status="processing");const{requestId:u,currentTaskName:c,progressText:f,allTaskCount:h,finishTaskCount:w,status:g}=this.crawlTaskObj;return this.requestId&&`${this.requestId}`==`${u}`&&(t.progressText=`【${c}】：${f}`,t.progressRate=h>0?Math.floor(w/h*100):0,g==="success"?t.progressText="采集完成":g==="fail"&&(t.progressText=`采集部分失败：${t.reason||""}`)),console.debug("CrawlInfo",t),t}async updateRequestStatus(t,r){return de({url:this.earthUrlsMap.updateCrawlRequestStatus,method:"POST",data:{requestId:t,status:r.result,reason:r.reason}})}async saveRequestDetail(t,r){return de({url:this.earthUrlsMap.initCrawlRequestDetail,method:"POST",data:{requestId:t,desc:r}})}async initCacheData(t){const r=await Lr(t);let i={};for(const c in r)if(!this.requestId||`${this.requestId}`==`${c}`){i=r[c];break}const u={};return u[this.requestId]=i,u}setItem(t,r){this.requestId&&xn(t,r),this.sendToClientTab()}async sendToClientTab(){if(!Ge.crawlTabId)return;const t=await this.getCrawlInfo();try{const r=await qe.getItem(yi)||[],{mallId:i}=t,u=r.reduce((c,f)=>(`${f.id}`==`${i}`?c.push({...f,...t}):c.push(f),c),[]);qe.setItem(yi,u)}catch(r){Ge.crawlTabId=null,console.debug(r)}}isTaskSuccess(t,r){const i=this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t]||{};return!!(r&&i[r]&&i[r].result==="success"||i.result==="success")}async updateRequestRet(t){if(this.crawlTaskObj.status=t==null?void 0:t.result,this.crawlTaskObj.reason=t==null?void 0:t.reason,this.setItem(this.crawlTaskKey,this.crawlTaskObj),(await this.updateRequestStatus(this.requestId,t)).result!=="success")throw new Error(`更新采集结果:${t.reason}`)}async saveTaskSubTaskRet(t,r,i){this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t]||(this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t]={}),this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t][r]=i,this.setItem(this.crawlTaskNameAndRetKey,this.crawlRequestIdAndTaskNameAndRetObj);let u="";i.result==="success"?u="采集成功":u=`采集失败，原因：${i.reason}`,await this.updateTaskProgress(t,r+u)}async saveTaskRet(t,r){let i=t,u="";r.result==="success"?(i+="，采集成功",u="采集成功"):(i+=`，采集失败，原因：${r.reason}`,u=`采集失败，原因：${r.reason}`),await this.updateTaskProgress(t,u);const c=await this.saveRequestDetail(this.requestId,i);if(c.result!=="success")throw new Error(`保存采集详情失败:${c.reason}`);r.canRetry||this.incrFinishTaskCount(1),this.crawlRequestIdAndTaskNameAndRetObj[this.requestId][t]=r,this.setItem(this.crawlTaskNameAndRetKey,this.crawlRequestIdAndTaskNameAndRetObj)}startTask(t){this.crawlTaskObj.currentTaskName=t,this.crawlTaskObj.progressText="开始采集",this.setItem(this.crawlTaskKey,this.crawlTaskObj),this.debugLog(t,"开始采集")}updateTaskProgress(t,r){this.crawlTaskObj.currentTaskName=t,this.crawlTaskObj.progressText=r,this.setItem(this.crawlTaskKey,this.crawlTaskObj),this.debugLog(t,r)}async debugLog(t,r){Ge.isDebug&&(this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][t]||(this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][t]=[]),this.crawlRequestIdAndTaskNameAndLogObj[this.requestId][t].push({date:Ue(),desc:r}),this.setItem(this.crawlTaskNameAndLogKey,this.crawlRequestIdAndTaskNameAndLogObj))}}class du{constructor({mallId:t,mallName:r,action:i,mallType:u,bindShopId:c,authAppNameList:f,startDate:h,endDate:w,requestId:g,antiContentStr:b,host:S}){ne(this,"earthUrlsMap",{getShopWithBindMallList:`${xe}/platform/pddkj/stat/crawl/get_crawl_shop_with_bind_mall_list`,bindTemuMall:`${xe}/platform/pddkj/shop/shop/bind_pddkj_mall`,unbindTemuMall:`${xe}/platform/pddkj/shop/shop/unbind_pddkj_mall`,uploadSettlement:`${xe}/platform/pddkj/stat/crawl/upload_settlement_excel`,saveMallGmtLastRsyncSettlement:`${xe}/platform/pddkj/stat/crawl/save_mall_gmt_last_rsync_settlement`,uploadSaleManageList:`${xe}/platform/pddkj/stat/crawl/upload_sale_manage_list`,saveMallGmtLastRsyncSaleManage:`${xe}/platform/pddkj/stat/crawl/save_mall_gmt_last_rsync_sale_manage`,uploadAfterSaleList:`${xe}/platform/pddkj/stat/crawl/upload_after_sale_list`,saveMallGmtLastRsyncAfterSale:`${xe}/platform/pddkj/stat/crawl/save_mall_gmt_last_rsync_after_sale`,initCrawlRequest:`${xe}/platform/pddkj/stat/crawl/init_crawl_request`,updateCrawlRequestStatus:`${xe}/platform/pddkj/stat/crawl/update_crawl_request_status`,initCrawlRequestDetail:`${xe}/platform/pddkj/stat/crawl/init_crawl_request_detail`,getFullAccountName:`${xe}/auth/account/get_full_account_name`,getAccountInfo:`${xe}/auth/account/get_account_info`,createPddkjChoiceImportTask:`${xe}/order/data/import_cost/createPddkjChoiceImportTask`,uploadProductSale:`${xe}/platform/pddkj/stat/crawl/upload_product_sale`,uploadProductQualityScoreUrl:`${xe}/platform/pddkj/stat/crawl/uploadProductQualityScore`,uploadLongTermActivityUrl:`${xe}/platform/pddkj/stat/crawl/upload_long_term_activity`,uploadAppliedActivityUrl:`${xe}/platform/pddkj/stat/crawl/upload_applied_activity`,getCrawlTaskUrl:`${xe}/platform/pddkj/stat/crawl/upload_applied_activity`,uploadCustomizePic:`${xe}/platform/pddkj/stat/crawl/upload_customize_pic`,uploadCustomizeGoodsList:`${xe}/platform/pddkj/stat/crawl/upload_customize_goods_list`,batchAddGoodsRiskTags:`${xe}/warehouse/pddkj_prepare_goods/batch_add_goods_risk_tags`,clearInvalidGoodsRiskTags:`${xe}/warehouse/pddkj_prepare_goods/clear_invalid_goods_risk_tags`,getTimestamp:`${xe}/home/home/getTimestamp`,createPddkjImportTask:`${xe}/order/data/import_cost/createPddkjImportTask`,uploadProductSkuQualityScoreUrl:`${xe}/platform/pddkj/stat/crawl/uploadProductSkuQualityScore`,saveAccountOverview:`${xe}/platform/pddkj/stat/crawl/saveAccountOverview`,saveAccountWaitSettleAmount:`${xe}/platform/pddkj_choice/stat/crawl/saveAccountWaitSettleAmount`,saveAccountLimitationOfFunds:`${xe}/platform/pddkj/stat/crawl/saveAccountLimitationOfFunds`,savePddkjCrawlDataParseTask:`${xe}/platform/pddkj/stat/crawl/savePddkjCrawlDataParseTask`});ne(this,"earthChoiceUrlMap",{saveMallLastRsyncTime:`${xe}/platform/pddkj_choice/stat/crawl/saveMallLastRsyncTime`,uploadProductList:`${xe}/platform/pddkj_choice/stat/crawl/uploadProductList`,uploadSettlement:`${xe}/platform/pddkj_choice/stat/crawl/uploadSettlementExcel`,saveCrawlWaitSettlementData:`${xe}/platform/pddkj_choice/stat/crawl/saveCrawlWaitSettlementData`,uploadProductActivityPriceList:`${xe}/platform/pddkj_choice/stat/crawl/uploadProductActivityPriceList`,uploadProductQualityScoreUrl:`${xe}/platform/pddkj_choice/stat/crawl/uploadProductQualityScore`});ne(this,"earthLocalUrlMap",{uploadLocalOrderSkuList:`${xe}/platform/pddkj_local/stat/crawl/uploadLocalOrderSkuList`,uploadLocalOrderReport:`${xe}/platform/pddkj_local/stat/crawl/uploadLocalOrderReport`,createPddkjLocalImportTask:`${xe}/order/data/import_cost/createPddkjLocalImportTask`});ne(this,"requestId");ne(this,"mallId");ne(this,"mallName");ne(this,"action");ne(this,"mallType");ne(this,"bindShopId");ne(this,"authAppNameList");ne(this,"startDate");ne(this,"endDate");ne(this,"crawlLogObj",{});ne(this,"antiContentStr");ne(this,"host");this.requestId=g,this.mallId=t,this.mallName=r,this.action=i,this.mallType=u,this.bindShopId=c,this.authAppNameList=f||[],this.startDate=h,this.endDate=w,this.antiContentStr=b,this.host=S,(!this.startDate||!this.endDate)&&(this.startDate=Xe().subtract(30,"day").format("YYYY-MM-DD"),this.endDate=Xe().format("YYYY-MM-DD"))}async startCrawl(){console.debug("startCrawl");try{if(!this.mallId)throw new Error("店铺为空");if(!this.bindShopId)throw new Error("绑定店铺为空");if(!this.requestId)throw new Error("采集日志ID为空");if(this.crawlLogObj=new _n(this.mallId,this.requestId),await this.crawlLogObj.init(),this.mallType==="pddkj")this.crawlLogObj.resetAllTaskCount(20),await this.startCrawlGoodsQuantityScoreDt(this.mallId,"eu"),await this.startCrawlGoodsQuantityScoreDt(this.mallId,"global"),await this.startCrawlGoodsQuantityScoreDt(this.mallId,"us"),await this.startCrawlLongTermActivityList(this.mallId),await this.startCrawlAppliedActivityList(this.mallId),await this.startCrawlSaleManage(this.mallId),await this.startRsyncRiskTag(this.mallId),await this.startRsyncCustomizeOrderSkuInfo(this.mallId,this.startDate,this.endDate),await this.startCrawlRegionSettlement(this.mallId,"us",this.startDate,this.endDate),await this.startCrawlRegionSettlement(this.mallId,"eu",this.startDate,this.endDate),await this.startCrawlRegionSettlement(this.mallId,"global",this.startDate,this.endDate),await this.startCrawlEprProxyPaymentServiceFee(this.mallId,"eu",this.startDate,this.endDate),await this.startCrawlEprFee(this.mallId,"eu",this.startDate,this.endDate),await this.startCrawlStockingPenalty(this.mallId,"global",this.startDate,this.endDate),await this.startCrawlQualityAccidentViolationDeduction(this.mallId,"global",this.startDate,this.endDate),await this.startCrawlBill(this.mallId,this.startDate,this.endDate),await this.startCrawlFulfillmentBill(this.mallId,1,this.startDate,this.endDate),await this.startCrawlFulfillmentBill(this.mallId,2,this.startDate,this.endDate),await this.startCrawlAccountOverview(this.mallId),await this.startCrawlFundFrozen(this.mallId);else if(this.mallType==="pddkjChoice"){const t={pddkjChoiceOrder:"us",pddkjChoiceEuOrder:"eu",pddkjChoiceGlobalOrder:"global"};this.crawlLogObj.resetAllTaskCount(8+this.authAppNameList.length*5),await this.startCrawlChoiceProductList(this.mallId),await this.startCrawlChoiceAppliedActivityList(this.mallId),await this.startCrawlChoicelongTermEnrollmentList(this.mallId),await this.startCrawlChoiceErpFee(this.mallId,this.startDate,this.endDate),await this.startRsyncRiskTag(this.mallId);for(const r of this.authAppNameList){const i=t[r];await this.startCrawlChoiceGoodsQuantityScoreDt(this.mallId,i),await this.startCrawlChoiceStmlLogistics(this.mallId,i,this.startDate,this.endDate),await this.startCrawlChoiceStmlReverseLogistics(this.mallId,i,this.startDate,this.endDate,1),await this.startCrawlChoiceStmlReverseLogistics(this.mallId,i,this.startDate,this.endDate,2),await this.startCrawlWaitSettlementData(this.mallId,i)}await this.startCrawlChoiceTransactionRevenue(this.mallId,this.startDate,this.endDate),await this.startCrawlAccountOverview(this.mallId),await this.startCrawlFundFrozen(this.mallId)}else if(this.mallType==="pddkjLocal")this.crawlLogObj.resetAllTaskCount(5),await this.startCrawlLocalOrderList(this.mallId,this.startDate,this.endDate),await this.startCrawlLocalOrderReport(this.mallId,this.startDate,this.endDate),await this.startCrawlLocalBillReport(this.mallId,this.startDate,this.endDate);else throw new Error(`店铺类型错误${this.mallType}`);await this.crawlLogObj.updateRequestRet($e())}catch(t){if(this.crawlLogObj)await this.crawlLogObj.updateRequestRet(Re(Ce(t)));else throw t}}async startCrawlChoiceProductList(t){var u;const r="销售管理";if(this.crawlLogObj.isTaskSuccess(r))return;const i=Ge;try{await this.crawlLogObj.startTask(r);const c=hg("/visage-agent-seller/product/skc/pageQuery"),f=20;let h=1,w=0,g=0;do{const b=await ge({mallId:t,url:c,data:{page:h,pageSize:f},antiContentStr:this.antiContentStr});if(b.errorCode!==1e6)throw new Error(b.errorMsg);if(!b.result)break;const S=[];w||(w=((u=b.result)==null?void 0:u.total)||0,g=Math.max(1,Math.ceil(w/f)));const T=b.result,A=(T==null?void 0:T.pageItems)||[];for(const x of A){const{productId:y,productSkcId:m}=x||{},C={productId:y,productSkcId:m,productSkuSummaries:[]},E=x.productSkuSummaries;if(E)for(const R of E){const D={...Ir(R,["productSkuId","extCode","supplierPrice","supplierPriceUS","siteSupplierPrices"]),currency:R.currencyType};C.productSkuSummaries.push(D)}S.push(C)}const k=await de({url:this.earthChoiceUrlMap.uploadProductList,method:"POST",data:{mallId:t,uploadDataList:JSON.stringify(S),filename:`${r}-第${h}页`,requestId:this.requestId,shopId:this.bindShopId}});if(k.result!=="success")throw new Error(k.reason);if(await this.crawlLogObj.updateTaskProgress(r,`第${h}/${g}页`),await ve(3e3),i.isDebug&&h===2){this.crawlLogObj.debugLog(r,"debug模式只取两页");break}h++}while((h-1)*f<w);await this.saveMallLastRsyncTime(t,"productList"),await this.crawlLogObj.saveTaskRet(r,$e())}catch(c){await this.crawlLogObj.saveTaskRet(r,Re(Ce(c)))}}async startCrawlChoiceAppliedActivityList(t){var u,c;const r="店铺营销/报名记录/专题活动 活动申报价";if(this.crawlLogObj.isTaskSuccess(r))return;const i=Ge;try{await this.crawlLogObj.startTask(r);const f=pe("/marvel-mms/cn/api/kiana/gambit/marketing/activity/product/applied/list"),h=10;let w=1,g=0,b=0;do{const S=await ge({mallId:t,url:f,data:{pageNo:w,pageSize:h},antiContentStr:this.antiContentStr});if(S.errorCode!==1e6)throw new Error(S.errorMsg);if(!S.result)break;const T=[];g||(g=((u=S.result)==null?void 0:u.total)||0,b=Math.max(1,Math.ceil(g/h)));const A=S.result,k=(A==null?void 0:A.productList)||[];for(const y of k){const{productId:m,activityStartTime:C,activityEndTime:E,id:R,sessionStatus:$,skcList:D=[]}=y||{};for(const o of D){const U=o.skcId;for(const j of o.skuList){const{skuId:Y,currency:O,extCode:F}=j||{};let G=j.activityPrice,K=!1;if(yt(j.sitePriceList))for(const Z of j.sitePriceList)Z.siteName==="美国站"&&(G=Z.activityPrice,K=!0);yt(j.sitePriceList)&&j.sitePriceList.length&&K===!1&&(G=(c=j.sitePriceList[0])==null?void 0:c.activityPrice);const H={productId:m,productSkcId:U,productSkuId:Y,currency:O,extCode:F,activityPrice:G,activityStartTime:C,activityEndTime:E,activityId:R,sessionStatus:$};T.push(H)}}}const x=await de({url:this.earthChoiceUrlMap.uploadProductActivityPriceList,method:"POST",data:{mallId:t,uploadDataList:JSON.stringify(T),filename:`${r}-第${w}页`,requestId:this.requestId,shopId:this.bindShopId}});if(x.result!=="success")throw new Error(x.reason);if(await this.crawlLogObj.updateTaskProgress(r,`第${w}/${b}页`),await ve(3e3),i.isDebug&&w===2){this.crawlLogObj.debugLog(r,"debug模式只取两页");break}w++}while((w-1)*h<g);await this.saveMallLastRsyncTime(t,"activityPrice"),await this.crawlLogObj.saveTaskRet(r,$e())}catch(f){await this.crawlLogObj.saveTaskRet(r,Re(Ce(f)))}}async startCrawlChoicelongTermEnrollmentList(t){var u;const r="店铺营销/报名记录/长期活动 活动申报价";if(this.crawlLogObj.isTaskSuccess(r))return;const i=Ge;try{await this.crawlLogObj.startTask(r);const c=pe("/marvel-mms/cn/api/kiana/gambit/marketing/enroll/list"),f=50;let h=1,w=0,g=0,b=0;do{const S=await ge({mallId:t,url:c,data:{pageNo:h,pageSize:f},antiContentStr:this.antiContentStr});if(S.errorCode!==1e6){if(h>1&&S.errorMsg==="Operation too frequent, please try again later"){if(b++,b>5)throw new Error(`${S.errorMsg} retry 5 times 合计${w} page=${h}`);await ve(5e3*b);continue}throw new Error(S.errorMsg)}if(b=0,!S.result)break;const T=[];w||(w=((u=S.result)==null?void 0:u.total)||0,g=Math.max(1,Math.ceil(w/f)));const k=S.result.list??[];for(const y of k){const{productId:m,sessionStartTime:C,sessionEndTime:E,enrollId:R,sessionStatus:$,skcList:D=[]}=y||{};for(const o of D){const U=o.skcId;for(const j of o.skuList){const{skuId:Y,currency:O,extCode:F}=j||{};let G=j.activityPrice,K=!1;if(yt(j.sitePriceList))for(const Z of j.sitePriceList)Z.siteName==="美国站"&&(G=Z.activityPrice,K=!0);yt(j.sitePriceList)&&j.sitePriceList.length&&K===!1&&(G=j.sitePriceList[0].activityPrice);const H={productId:m,productSkcId:U,productSkuId:Y,currency:O,extCode:F,activityPrice:G,activityStartTime:C,activityEndTime:E,activityId:R,sessionStatus:$};T.push(H)}}}const x=await de({url:this.earthChoiceUrlMap.uploadProductActivityPriceList,method:"POST",data:{mallId:t,uploadDataList:JSON.stringify(T),filename:`${r}-第${h}页`,requestId:this.requestId,shopId:this.bindShopId}});if(x.result!=="success")throw new Error(x.reason);if(await this.crawlLogObj.updateTaskProgress(r,`第${h}/${g}页`),await ve(5e3),i.isDebug&&h===2){this.crawlLogObj.debugLog(r,"debug模式只取两页");break}h++}while((h-1)*f<w);await this.saveMallLastRsyncTime(t,"activityPrice"),await this.crawlLogObj.saveTaskRet(r,$e())}catch(c){await this.crawlLogObj.saveTaskRet(r,Re(Ce(c)))}}async startCrawlChoiceErpFee(t,r,i){var f,h;const u="eu",c=`账户资金/EPR费用管理-${Kt(u)}`;if(!this.crawlLogObj.isTaskSuccess(c))try{const w=Date.now();await this.crawlLogObj.startTask(c),await this.loginMallAgent(t,u);let g=!1;const b={},S=[{taskType:18,taskTypeName:"商品环保费"},{taskType:19,taskTypeName:"物流包装环保费"}],T=[{exportType:2,exportTypeName:"已扣费"},{exportType:4,exportTypeName:"已退费"}];for(;!g;){if(Date.now()-w>3e5)throw new wt("导出等待超时",300);g=!0;for(const A of this.groupBy30Days(r,i))for(const{taskType:k,taskTypeName:x}of S){const y=await this.getChoiceExportHistory(t,u,k);for(const{exportType:m,exportTypeName:C}of T){const E=x+C;if(this.crawlLogObj.isTaskSuccess(c,E))continue;const R=y.find($=>`${$.exportType}`==`${m}`&&$.expireTime>Date.now()&&`${$.financeStartTime}`==`${A.start.getTime()}`&&`${$.financeEndTime}`==`${A.end.getTime()}`);if(R)if(+R.status==2){const $=pe("/api/merchant/file/export/download",u),D=await ge({mallId:t,url:$,data:{taskType:k,id:R.id},antiContentStr:this.antiContentStr});if(D.errorMsg)throw new Error(D.errorMsg);if(!((f=D.result)!=null&&f.fileUrl))throw new Error("获取下载地址失败");const o=(h=D.result)==null?void 0:h.fileUrl;let U=[];m===2?U=[gi]:m===4&&(U=[tu]);const j={feeTypeList:U,gmtOrderDateStart:this.timestampTranDate(R.financeStartTime),gmtOrderDateEnd:this.timestampTranDate(R.financeEndTime),orderDateType:Dn,shopId:this.bindShopId,file:await this.getFileBase64(o),filename:`${R.id}-${c}`,requestId:this.requestId},Y=await de({url:this.earthUrlsMap.createPddkjChoiceImportTask,method:"POST",data:j});await this.crawlLogObj.saveTaskSubTaskRet(c,E,Y)}else g=!1;else{g=!1;const $={exportType:m,taskType:k,financeStartTime:A.start.getTime(),financeEndTime:A.end.getTime()};if(!b[`${$.exportType}-${$.taskType}-${$.financeStartTime}-${$.financeEndTime}}`]){const D=pe("/api/merchant/file/export",u),o=await ge({mallId:t,url:D,data:$,antiContentStr:this.antiContentStr});if(o.errorCode!==1e6&&o.errorMsg!=="导出任务已存在, 请勿重复创建, 请前往【导出历史】查看")throw new Error(o.errorMsg);b[`${$.taskType}-${$.taskType}-${$.financeStartTime}-${$.financeEndTime}}`]=!0}}}}await ve(5e3)}await this.saveMallLastRsyncTime(t,"eprFee"),await this.crawlLogObj.saveTaskRet(c,$e())}catch(w){await this.crawlLogObj.saveTaskRet(c,Re(Ce(w)))}}async startCrawlChoiceGoodsQuantityScoreDt(t,r){const i=`品质分-${Kt(r)}`;try{if(this.crawlLogObj.isTaskSuccess(i))return;const u=r==="eu";await this.crawlLogObj.startTask(i),await this.loginMallAgent(t,r);const c=pe("/bg-luna-agent-seller/goods/quality/semiHosted/qualityScore/count",r),f=await ge({mallId:t,url:c,data:{page:1,pageSize:10,qualityScoreEnum:2},antiContentStr:this.antiContentStr});if(f.errorCode!==1e6)throw new Error(f.errorMsg);const h=await de({url:this.earthUrlsMap.uploadProductQualityScoreUrl,method:"POST",data:{mallId:t,region:r,uploadDataList:JSON.stringify(f.result),filename:i,requestId:this.requestId,shopId:this.bindShopId}});if(h.result!=="success")throw new Error(h.reason);await this.saveMallLastRsyncTime(t,u?"goodsQuantityScore":"goodsQuantityScoreEu"),await this.crawlLogObj.saveTaskRet(i,$e())}catch(u){await this.crawlLogObj.saveTaskRet(i,Re(Ce(u)))}}async startCrawlChoiceStmlReverseLogistics(t,r,i,u,c){const f=`账户资金/退货面单费-${Kt(r)}-${c===1?"商家仓":"temu仓"}`;if(!this.crawlLogObj.isTaskSuccess(f))try{const h={},w=Date.now();let g=!1,b=!1;for(;!g;){if(Date.now()-w>3e5)throw new wt("导出等待超时",300);g=!0,b||(await this.loginMallAgent(t,r),b=!0);const S=await this.queryStmlReverseLogisticsTask(t,r,c);for(const T of this.groupBy30Days(i,u)){const A={deductTypeList:[1,2,3],deductDesc:["支出","调整(支出)","调整(退款)"],deductTimeBegin:T.start.getTime(),deductTimeEnd:T.end.getTime(),rangeTime:`导出任务生成时间: ${this.timestampTranDate(T.start.getTime(),"YYYY-MM-DD")} ~ ${this.timestampTranDate(T.end.getTime(),"YYYY-MM-DD")}`},k=A.rangeTime;if(this.crawlLogObj.isTaskSuccess(f,k))continue;const x={ext:JSON.stringify(A)},y=S.find(m=>dp(gg(m.ext),A)&&Date.now()-new Date(m.createdAt).getTime()<24*3600*1e3&&!(m.isFinished&&!m.isSuccess));if(y)if(y.isFinished){const m=JSON.parse(y.ext),C={gmtOrderDateStart:this.timestampTranDate(m.deductTimeBegin),gmtOrderDateEnd:this.timestampTranDate(m.deductTimeEnd),feeTypeList:[tg],orderDateType:Dn,shopId:this.bindShopId,file:await this.getFileBase64(y.downloadUrl),filename:`${y.id}-${f}`,requestId:this.requestId},E=await de({url:this.earthUrlsMap.createPddkjChoiceImportTask,method:"POST",data:C});await this.crawlLogObj.saveTaskSubTaskRet(f,k,E)}else g=!1;else if(g=!1,!h[`${A.deductTimeBegin}-${A.deductTimeEnd}`]){let m=pe("/portal/sunce/seller/center/bill/download/async",r);r==="us"&&(m=pe("/portal/udp/sunce/seller/center/bill/download/async",r)),c===2&&(m=pe("/portal/sunquan/seller/center/bill/download/async",r),r==="us"&&(m=pe("/portal/udp/sunquan/seller/center/bill/download/async",r))),await ge({mallId:t,url:m,data:x,antiContentStr:this.antiContentStr}),h[`${A.deductTimeBegin}-${A.deductTimeEnd}`]=!0}}await ve(1e4)}await this.saveMallLastRsyncTime(t,"stmlReverseLogistics"),await this.crawlLogObj.saveTaskRet(f,$e())}catch(h){await this.crawlLogObj.saveTaskRet(f,Re(Ce(h)))}}async queryStmlReverseLogisticsTask(t,r,i){var f;let u=pe("/portal/sunce/seller/center/bill/task/list",r);r==="us"&&(u=pe("/portal/udp/sunce/seller/center/bill/task/list",r)),i===2&&(u=pe("/portal/sunquan/seller/center/bill/task/list",r),r==="us"&&(u=pe("/portal/udp/sunquan/seller/center/bill/task/list",r)));const c=await ge({mallId:t,url:u,data:{pageNum:1,pageSize:10},antiContentStr:this.antiContentStr});if(c.errorMsg)throw new Error(c.errorMsg);return((f=c.result)==null?void 0:f.excelCommonTaskList)||[]}async startCrawlChoiceStmlLogistics(t,r,i,u){const c=`账户资金/发货面单费-${Kt(r)}`;if(!this.crawlLogObj.isTaskSuccess(c))try{let f=!1,h=!1;const w={},g=Date.now();for(;!f;){if(Date.now()-g>3e5)throw new wt("导出等待超时",300);f=!0,h||(await this.loginMallAgent(t,r),h=!0);const b=await this.queryStmlLogisticsTask(t,r);for(const S of this.groupBy30Days(i,u)){const T={req:{deductTimeBegin:S.start.getTime(),deductTimeEnd:S.end.getTime(),reconciliationTypeList:[1,2,3,5,6,7,8]},requestStr:JSON.stringify([{label:"账单类型",value:["支出","调整(支出)","调整(退款)","物流商赔偿款","揽收支出","揽收调整(支出)","揽收调整(退款)"]},`账单支出/退款时间: ${this.timestampTranDate(S.start.getTime(),"YYYY-MM-DD")} ~ ${this.timestampTranDate(S.end.getTime(),"YYYY-MM-DD")}`])},A=`${T.req.deductTimeBegin}-${T.req.deductTimeEnd}`;if(this.crawlLogObj.isTaskSuccess(c,A))continue;const k=b.find(x=>x.isFinished&&x.isSuccess&&x.taskId===w[A]);if(k)if(k.isFinished){let x=JSON.parse(k.requestStr);x=x[1].replace("账单支出/退款时间: ","").replaceAll(" ",""),x=x.split("~");const y=`${x[0]} 00:00:00`,m=`${x[1]} 23:59:59`,C={gmtOrderDateStart:y,gmtOrderDateEnd:m,feeTypeList:[rg],orderDateType:Dn,shopId:this.bindShopId,file:await this.getFileBase64(k.downloadUrl),filename:`${k.taskId}-${c}-${A}`,requestId:this.requestId},E=await de({url:this.earthUrlsMap.createPddkjChoiceImportTask,method:"POST",data:C});await this.crawlLogObj.saveTaskSubTaskRet(c,A,E)}else f=!1;else if(f=!1,!w[A]){let x=pe("/portal/selene/seller/portal/recon/download",r);r==="us"&&(x=pe("/api/udp/yuanbenchu/seller_central/recon_bill/download/async",r));const y=await ge({mallId:t,url:x,data:T,antiContentStr:this.antiContentStr});if(y.errorMsg)throw new Error(y.errorMsg);w[A]=y.result.taskId}}await ve(1e4)}await this.saveMallLastRsyncTime(t,"stmlLogistics"),await this.crawlLogObj.saveTaskRet(c,$e())}catch(f){await this.crawlLogObj.saveTaskRet(c,Re(Ce(f)))}}async queryStmlLogisticsTask(t,r){let i=pe("/portal/selene/seller/portal/recon/download_list",r);r==="us"&&(i=pe("/api/udp/yuanbenchu/seller_central/recon_bill/task/info",r));const u=await ge({mallId:t,url:i,data:{pageNum:1,pageSize:10},antiContentStr:this.antiContentStr});if(u.errorMsg)throw new Error(u.errorMsg);return u.result.excelCommonTaskList}async startCrawlChoiceTransactionRevenue(t,r,i){var c;const u="账户资金/对账中心/财务明细/财务详情 交易收入";if(!this.crawlLogObj.isTaskSuccess(u))try{const f=Date.now(),h={};let w=!1;for(;!w;){if(Date.now()-f>3e5)throw new wt("导出等待超时",300);w=!0;const g=await this.getChoiceTransactionRevenueExportHistoryTaskList(t);for(const b of this.groupBy30Days(r,i)){const S=`${b.start.getTime()}-${b.end.getTime()}`;if(this.crawlLogObj.isTaskSuccess(u,S))continue;const T=g.find(A=>`${A.searchExportTimeBegin}`==`${b.start.getTime()}`&&`${A.searchExportTimeEnd}`==`${b.end.getTime()}`&&A.expireTime>Date.now()&&+A.status==2);if(T)for(const A of["seller","global","us","eu"]){let k={};if(A==="seller"){const $={taskType:19,id:T.id},D=pe("/api/merchant/file/export/download",A);k=await ge({mallId:t,url:D,data:$,antiContentStr:this.antiContentStr})}else k=await this.getAgentBillFile(t,A,T);if(k.errorCode!==1e6)throw new Error(k.errorMsg);const x=(c=k.result)==null?void 0:c.fileUrl;if(!x)throw new Error("获取下载地址为空");const y=await this.getFileBase64(x),m=`${S}-${A}-${T.id}`;await de({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:t,region:A,platform:this.mallType,filename:m,file:y,requestId:this.requestId,fundType:"结算明细",fundStatus:3,gmtBillStart:this.timestampTranDate(b.start.getTime()),gmtBillEnd:this.timestampTranDate(b.end.getTime())}});const C={feeTypeList:[ru,au,nu,iu,su,ou],gmtOrderDateStart:this.timestampTranDate(T.searchExportTimeBegin),gmtOrderDateEnd:this.timestampTranDate(T.searchExportTimeEnd),orderDateType:Dn,shopId:this.bindShopId,file:y,filename:m},E=await de({url:this.earthUrlsMap.createPddkjChoiceImportTask,method:"POST",data:C});await this.crawlLogObj.saveTaskSubTaskRet(u,S,E)}else if(w=!1,!h[S]){const A={fundDetailExport:!0,taskType:19,beginTime:b.start.getTime(),endTime:b.end.getTime()},k=pe("/api/merchant/file/export"),x=await ge({mallId:t,url:k,data:A,antiContentStr:this.antiContentStr});if(x.errorMsg)throw new Error(x.errorMsg);h[S]=!0}}await ve(5e3)}await this.saveMallLastRsyncTime(t,"bill"),await this.crawlLogObj.saveTaskRet(u,$e())}catch(f){await this.crawlLogObj.saveTaskRet(u,Re(Ce(f)))}}async startCrawlGoodsQuantityScoreDt(t,r){const i=`品质分-${Kt(r)}`;try{if(this.crawlLogObj.isTaskSuccess(i))return;const u=Ge,c=r==="eu";await this.crawlLogObj.startTask(i),await this.loginMallAgent(t,r);let f=pe("/bg-luna-agent-seller/goods/quality/supplyChain/qualityScore/count",r);const h=await ge({mallId:t,url:f,data:{page:1,pageSize:10,qualityScoreEnum:2},antiContentStr:this.antiContentStr});if(h.errorCode!==1e6)throw new Error(h.errorMsg);const w=await de({url:this.earthUrlsMap.uploadProductQualityScoreUrl,method:"POST",data:{mallId:t,region:r,isEu:c?1:0,uploadDataList:JSON.stringify(h.result),filename:i,requestId:this.requestId,shopId:this.bindShopId}});if(w.result!=="success")throw new Error(w.reason);f=pe("/bg-luna-agent-seller/goods/quality/supplyChain/qualityMetrics/pageQuery",r);for(const g of[1,2,3,4]){let b=1;const S=10;let T=0,A=0;do{const k=await ge({mallId:t,url:f,data:{page:b,pageSize:S,qualityScoreEnum:g},antiContentStr:this.antiContentStr});if(k.errorCode!==1e6)throw new Error(k.errorMsg);if(!k.result)break;T||(T=k.result.total,A=Math.max(1,Math.ceil(T/S)));const y=k.result.pageItems,m=await de({url:this.earthUrlsMap.uploadProductSkuQualityScoreUrl,method:"POST",data:{mallId:t,region:r,qualityScoreEnum:g,uploadDataList:JSON.stringify(y)}});if(m.result!=="success")throw new Error(m.reason);await this.crawlLogObj.updateTaskProgress(i,`第${b}/${A}页`),await ve(3e3),u.isDebug&&b===2&&this.crawlLogObj.debugLog(i,"debug模式只取两页"),b++}while((b-1)*S<T)}await this.saveMallLastRsyncTime(t,c?"goodsQuantityScore":"goodsQuantityScoreEu"),await this.crawlLogObj.saveTaskRet(i,$e())}catch(u){await this.crawlLogObj.saveTaskRet(i,Re(Ce(u)))}}async startCrawlLongTermActivityList(t){var u;const r="店铺营销/报名记录/长期活动 活动申报价";if(this.crawlLogObj.isTaskSuccess(r))return;const i=Ge;try{await this.crawlLogObj.startTask(r);const c=pe("/marvel-mms/cn/api/kiana/gambit/marketing/enroll/list"),f=40;let h=1,w=0,g=0,b=0;do{const S=await ge({mallId:t,url:c,data:{pageNo:h,pageSize:f,sessionStatusTag:3},antiContentStr:this.antiContentStr});if(S.errorCode!==1e6){if(h>1&&S.errorMsg==="Operation too frequent, please try again later"){if(b++,b>5)throw new Error(`${S.errorMsg} retry 5 times 合计${w} page=${h}`);await ve(5e3*b);continue}throw new Error(S.errorMsg)}if(b=0,!S.result)break;const T=[];w||(w=((u=S.result)==null?void 0:u.total)||0,g=Math.max(1,Math.ceil(w/f)));const A=S.result,k=(A==null?void 0:A.list)||[];for(const y of k){const m=Ir(y,["activityStock","remainingActivityStock","sessionEndTime","sessionStartTime","enrollId","productId","skcList"]);T.push(m)}const x=await de({url:this.earthUrlsMap.uploadLongTermActivityUrl,method:"POST",data:{mallId:t,uploadDataList:JSON.stringify(T),filename:`${r}-第${h}页`,requestId:this.requestId,shopId:this.bindShopId}});if(x.result!=="success")throw new Error(x.reason);if(await this.crawlLogObj.updateTaskProgress(r,`第${h}/${g}页`),await ve(5e3),i.isDebug&&h===2){this.crawlLogObj.debugLog(r,"debug模式只取两页");break}h++}while((h-1)*f<w);await this.saveMallLastRsyncTime(t,"longTermActivity"),await this.crawlLogObj.saveTaskRet(r,$e())}catch(c){await this.crawlLogObj.saveTaskRet(r,Re(Ce(c)))}}async startCrawlAppliedActivityList(t){var u;const r="店铺营销/报名记录/专题活动 活动申报价";if(this.crawlLogObj.isTaskSuccess(r))return;const i=Ge;try{await this.crawlLogObj.startTask(r);const c=pe("/marvel-mms/cn/api/kiana/gambit/marketing/activity/product/applied/list"),f=10;let h=1,w=0,g=0;do{const b=await ge({mallId:t,url:c,data:{pageNo:h,pageSize:f,sessionStatusTag:3},antiContentStr:this.antiContentStr});if(b.errorCode!==1e6)throw new Error(b.errorMsg);if(!b.result)break;const S=[];w||(w=((u=b.result)==null?void 0:u.total)||0,g=Math.max(1,Math.ceil(w/f)));const T=b.result,A=(T==null?void 0:T.productList)||[];for(const x of A){const m={...Ir(x,["id","productId","activityStock","activityStartTime","activityEndTime","skcList"]),remainingActivityStock:0};S.push(m)}const k=await de({url:this.earthUrlsMap.uploadAppliedActivityUrl,method:"POST",data:{mallId:t,uploadDataList:JSON.stringify(S),filename:`${r}-第${h}页`,requestId:this.requestId,shopId:this.bindShopId}});if(k.result!=="success")throw new Error(k.reason);if(await this.crawlLogObj.updateTaskProgress(r,`第${h}/${g}页`),await ve(3e3),i.isDebug&&h===2){await this.crawlLogObj.debugLog(r,"debug模式只取两页");break}h++}while((h-1)*f<w);await this.saveMallLastRsyncTime(t,"appliedActivity"),await this.crawlLogObj.saveTaskRet(r,$e())}catch(c){await this.crawlLogObj.saveTaskRet(r,Re(Ce(c)))}}async startCrawlSaleManage(t){var u;const r="销售管理/申报价格+销量";if(this.crawlLogObj.isTaskSuccess(r))return;const i=Ge;try{await this.crawlLogObj.startTask(r);const c=pe("/marvel-mms/cn/api/kiana/venom/sales/management/listWarehouse"),f=!0,h=20;let w=1,g=0,b=0;do{let S=await ge({mallId:t,url:c,data:{isLack:0,pageNo:w,pageSize:h,priceAdjustRecentDays:7},antiContentStr:this.antiContentStr});const T=[];if(S.errorCode!==1e6)throw new Error(S.errorMsg);g||(g=((u=S.result)==null?void 0:u.total)||0,b=Math.max(1,Math.ceil(g/h)));const A=S.result,k=(A==null?void 0:A.subOrderList)||[];for(const x of k){const y=x.skuQuantityDetailList||[];let m=!1,C={};if(f){const $=[];for(const D of y)$.push(D.productSkuId),D.lastThirtyDaysSaleVolume>0&&(m=!0);if(m){const D=this.getPastDate(31),o=this.getPastDate(1);C=await this.getProductSkuIdAndDtSaleListMap(t,$,D,o),await ve(300)}else{const D=[];for(let o=31;o>0;o--)D.push({date:this.getPastDate(o),sale:0});for(const o of $)C[o]=D}}const R={...Ir(x,["productId","productSkcId","commentNum","mark","onSalesDurationOffline"]),skuQuantityDetailList:[]};for(const $ of y){const D=Ir($,["productSkuId","className","supplierPrice","currencyType"]);f&&(D.dtSaleList=C[D.productSkuId]),R.skuQuantityDetailList.push(D)}T.push(R)}if(S=await de({url:this.earthUrlsMap.uploadSaleManageList,method:"POST",data:{mallId:t,isNeedRsyncProductSale:1,uploadDataList:JSON.stringify(T),requestId:this.requestId,filename:`${r}-第${w}页`,shopId:this.bindShopId}}),S.result!=="success")throw new Error(S.reason);if(await this.crawlLogObj.updateTaskProgress(r,`第${w}/${b}页`),await ve(3e3),i.isDebug&&w===2){this.crawlLogObj.debugLog(r,"debug模式只取两页");break}w++}while((w-1)*h<g);await this.saveMallLastRsyncTime(t,"saleManage"),await this.crawlLogObj.saveTaskRet(r,$e())}catch(c){await this.crawlLogObj.saveTaskRet(r,Re(Ce(c)))}}async startRsyncCustomizeOrderSkuInfo(t,r,i){var f,h;const u="备货单定制品内容";if(this.crawlLogObj.isTaskSuccess(u))return;const c=Ge;try{await this.crawlLogObj.startTask(u);for(const w of this.groupBy30Days(r,i)){const g=pe("/oms/bg/venom/api/supplier/purchase/manager/querySubOrderList"),b={beginTime:w.start.getTime(),endTime:w.end.getTime()},S="global",T=20;let A=1,k=0,x=0;await this.loginMallAgent(t,S);do{const y=await ge({mallId:t,url:g,data:{pageNo:A,pageSize:T,purchaseTimeFrom:b.beginTime,purchaseTimeTo:b.endTime,oneDimensionSort:{firstOrderByDesc:1,firstOrderByParam:"createdAt"},isCustomGoods:!0},antiContentStr:this.antiContentStr});if(y.errorCode===1e6){k||(k=((f=y.result)==null?void 0:f.total)||0,x=Math.max(1,Math.ceil(k/T))),await this.crawlLogObj.updateTaskProgress(u,`第${A}/${x}页`);const m=y.result,C=(m==null?void 0:m.subOrderForSupplierList)||[],E=[];for(const R of C)R.subPurchaseOrderSn&&((h=R.subPurchaseOrderSn)==null?void 0:h.length)>0&&!E.includes(R.subPurchaseOrderSn)&&E.push(R.subPurchaseOrderSn);await this.rsyncCustomOrderSkuInfo(t,S,E)}else throw new Error(y.errorMsg);if(await ve(3e3),c.isDebug&&A===2){console.warn("debug模式只取两页");break}A++}while((A-1)*T<k)}await this.saveMallLastRsyncTime(t,"customizeOrderSkuInfo"),await this.crawlLogObj.saveTaskRet(u,$e())}catch(w){await this.crawlLogObj.saveTaskRet(u,Re(Ce(w)))}}async startCrawlRegionSettlement(t,r,i,u){var f;const c=`结算数据-${Kt(r)}`;if(!this.crawlLogObj.isTaskSuccess(c))try{await this.crawlLogObj.startTask(c);const h=Date.now(),w=1,g=2,b=3,S={[w]:{type:w,desc:"待处理款项",breadcrumb:"结算数据/待结算/导出明细"},[g]:{type:g,desc:"结算中款项",breadcrumb:"结算数据/结算中/导出明细"},[b]:{type:b,desc:"已到账款项",breadcrumb:"结算数据/已到账/导出明细"}};await this.loginMallAgent(t,r);const T={};let A=!1;for(;!A;){if(Date.now()-h>3e5)throw new wt("导出等待超时",300);A=!0;const k=await this.getSettlementExportHistoryTaskList(t,r);for(const x in S){let y=i,m=u;(+x===w||+x===g)&&(y=u,m=u);for(const C of this.groupBy30Days(y,m)){let E=this.timestampTranDate(C.start.getTime(),"YYYY-MM-DD"),R=this.timestampTranDate(C.end.getTime(),"YYYY-MM-DD");(+x===w||+x===g)&&(E=i,R=u);const $=`${E} ${R} ${S[x].desc}`;if(this.crawlLogObj.isTaskSuccess(c,$))continue;let D=k.find(o=>`${o.settleDataType}`==`${x}`&&o.status==2&&o.id==T[$]);if(D){await this.crawlLogObj.debugLog(c,`${$}:找到导出任务${JSON.stringify(D)}`);const o=pe("/api/merchant/file/export/download",r);let U=await ge({mallId:t,url:o,data:{id:D.id,taskType:12},antiContentStr:this.antiContentStr});const j=(f=U.result)==null?void 0:f.fileUrl,Y=`${c}-${$}-${D.id}`,O=await this.getFileBase64(j);U=await de({url:this.earthUrlsMap.uploadSettlement,method:"POST",data:{taskId:D.id,fundType:D.settleDataType,mallId:t,gmtExportBegin:D.beginDate,gmtExportEnd:D.endDate,region:r,filename:Y,file:O,requestId:this.requestId}}),await de({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:t,region:r,filename:Y,platform:this.mallType,file:O,requestId:this.requestId,fundType:"结算明细",fundStatus:x,gmtBillStart:this.timestampTranDate(C.start.getTime()),gmtBillEnd:this.timestampTranDate(C.end.getTime())}}),await this.crawlLogObj.saveTaskSubTaskRet(c,$,U)}else if(A=!1,!T[$]){await this.crawlLogObj.debugLog(c,`${$}:创建导出`);const o=pe("/api/merchant/file/export",r),U={settleDataType:Number.parseInt(x),taskType:12};+x===b&&(U.beginDate=E,U.endDate=R);const j=await ge({mallId:t,url:o,data:U,antiContentStr:this.antiContentStr});if(j.errorMsg)throw new Error(j.errorMsg);T[$]=j.result}}}await ve(5e3)}await this.saveMallLastRsyncTime(t,"settlement"),await this.crawlLogObj.saveTaskRet(c,$e())}catch(h){await this.crawlLogObj.saveTaskRet(c,Re(Ce(h)))}}async startCrawlEprProxyPaymentServiceFee(t,r,i,u){var f;const c=`EPR代付服务费-已扣费-${Kt(r)}`;if(!this.crawlLogObj.isTaskSuccess(c))try{const h=Date.now();await this.crawlLogObj.startTask(c),await this.loginMallAgent(t,r);let w=!1;const g=16,b={};for(;!w;){if(Date.now()-h>3e5)throw new wt("导出等待超时",300);w=!0;const S=await this.queryExportHistory(t,r,g);for(const T of this.groupBy30Days(i,u)){const A=this.timestampTranDate(T.start.getTime(),"YYYY-MM-DD"),k=this.timestampTranDate(T.end.getTime(),"YYYY-MM-DD"),x=`${A}-${k}`;if(this.crawlLogObj.isTaskSuccess(c,x))continue;const y=S.find(m=>`${m.financeDateStart}`==`${A}`&&`${m.financeDateEnd}`==`${k}`&&+m.status==2);if(y){const m=pe("/api/merchant/file/export/download",r);let C=await ge({mallId:t,url:m,data:{id:y.id,taskType:g},antiContentStr:this.antiContentStr});const E=(f=C.result)==null?void 0:f.fileUrl,R=await this.getFileBase64(E),$=`${x}-${y.id}`;C=await de({url:this.earthUrlsMap.createPddkjImportTask,method:"POST",data:{feeTypeList:[gi],gmtOrderDateStart:T.start,gmtOrderDateEnd:T.end,orderDateType:mi,shopId:this.bindShopId,filename:$,file:R,requestId:this.requestId}}),await de({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:t,region:r,filename:$,file:R,platform:this.mallType,requestId:this.requestId,fundType:"代付服务费",fundStatus:3,gmtBillStart:this.timestampTranDate(T.start.getTime()),gmtBillEnd:this.timestampTranDate(T.end.getTime())}}),await this.crawlLogObj.saveTaskSubTaskRet(c,x,C)}else if(w=!1,!b[x]){await this.crawlLogObj.debugLog(c,`${x}:创建导出`);const m=pe("/api/merchant/file/export",r),E=await ge({mallId:t,url:m,data:{billingCycleList:[],taskType:g,financeDateStart:A,financeDateEnd:k},antiContentStr:this.antiContentStr});if(E.errorMsg)throw new Error(E.errorMsg);b[x]=!0}}await ve(5e3)}await this.saveMallLastRsyncTime(t,"pddkj_eprFee"),await this.crawlLogObj.saveTaskRet(c,$e())}catch(h){await this.crawlLogObj.saveTaskRet(c,Re(Ce(h)))}}async startCrawlEprFee(t,r,i,u){const c=`EPR费用-${Kt(r)}`;if(!this.crawlLogObj.isTaskSuccess(c))try{const f=Date.now();await this.crawlLogObj.startTask(c),await this.loginMallAgent(t,r);let h=!1;const w={};for(;!h;){if(Date.now()-f>3e5)throw new wt("导出等待超时",300);h=!0;for(const g of[18,19]){const b=await this.queryExportHistory(t,r,g);let S="商品环保费";g===19&&(S="物流包装环保费");for(const T of[1,2,4])for(const A of this.groupBy30Days(i,u)){const k=this.timestampTranDate(A.start.getTime(),"YYYY-MM-DD"),x=this.timestampTranDate(A.end.getTime(),"YYYY-MM-DD"),y=`${k}-${x}-${g}-${T}`;if(this.crawlLogObj.isTaskSuccess(c,y))continue;const m=b.find(C=>`${C.financeStartTime}`==`${A.start.getTime()}`&&`${C.financeEndTime}`==`${A.end.getTime()}`&&+C.status==2&&`${C.exportType}`==`${T}`);if(m){const C=pe("/api/merchant/file/export/download",r);let E=await ge({mallId:t,url:C,data:{id:m.id,taskType:g},antiContentStr:this.antiContentStr});const R=E.result.fileUrl;let $=[gi];T===4&&($=[tu]);const D=`${y}-${m.id}`,o=await this.getFileBase64(R);(T===2||T===4)&&(E=await de({url:this.earthUrlsMap.createPddkjImportTask,method:"POST",data:{feeTypeList:$,gmtOrderDateStart:this.timestampTranDate(A.start.getTime()),gmtOrderDateEnd:this.timestampTranDate(A.end.getTime()),orderDateType:mi,shopId:this.bindShopId,filename:D,file:o,requestId:this.requestId}})),(T===1||T===2)&&(E=await de({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:t,region:r,filename:D,file:o,platform:this.mallType,requestId:this.requestId,fundType:S,fundStatus:T===2?3:1,gmtBillStart:this.timestampTranDate(A.start.getTime()),gmtBillEnd:this.timestampTranDate(A.end.getTime())}})),await this.crawlLogObj.saveTaskSubTaskRet(c,y,E)}else if(h=!1,!w[y]){await this.crawlLogObj.debugLog(c,`${y}:创建导出`);const C=pe("/api/merchant/file/export",r),E={exportType:T,taskType:g,financeStartTime:A.start.getTime(),financeEndTime:A.end.getTime()},R=await ge({mallId:t,url:C,data:E,antiContentStr:this.antiContentStr});if(R.errorMsg)throw new Error(R.errorMsg);w[y]=!0}}}await ve(5e3)}await this.saveMallLastRsyncTime(t,"pddkj_eprFee"),await this.crawlLogObj.saveTaskRet(c,$e())}catch(f){await this.crawlLogObj.saveTaskRet(c,Re(Ce(f)))}}async startCrawlStockingPenalty(t,r,i,u){const c="账户资金-违规信息-备货违规",f="备货违规";if(!this.crawlLogObj.isTaskSuccess(c))try{await this.crawlLogObj.startTask(c),await this.loginMallAgent(t,r);const w=[];for(const b of this.groupBy30Days(i,u)){const S=b.start.getTime(),T=b.end.getTime();let A=1;const k=50,x=0;let y=0;const m=[],C=pe("/mms/api/andes/punish/seller/queryPurchasePunishList",r);do{const R=await ge({mallId:t,url:C,data:{pageNo:A,pageSize:k,punishTabCode:x,status:3,startDateFrom:S,startDateTo:T},antiContentStr:this.antiContentStr});if(R.errorMsg)throw new Error(R.errorMsg);const $=R.result,D=$.list;if(D)for(const o of D)m.push(o);y=$.total,A++,await ve(2e3)}while(m.length<y);for(const E of m)w.push(E)}const g=await de({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:t,region:r,file:"",platform:this.mallType,requestId:this.requestId,fundType:f,fundStatus:3,data:w,filename:c,gmtBillStart:i,gmtBillEnd:`${u} 23:59:59`}});if(g.result!=="success")throw new Error(g.reason);await this.saveMallLastRsyncTime(t,"stockingPenalty"),await this.crawlLogObj.saveTaskRet(c,$e())}catch(w){await this.crawlLogObj.saveTaskRet(c,Re(Ce(w)))}}async startCrawlQualityAccidentViolationDeduction(t,r,i,u){const c="账户资金-违规信息-质量事故违规",f="质量事故违规";if(!this.crawlLogObj.isTaskSuccess(c))try{await this.crawlLogObj.startTask(c),await this.loginMallAgent(t,r);const w=[];for(const b of this.groupBy30Days(i,u)){const S=b.start.getTime(),T=b.end.getTime();let A=1;const k=50,x=2;let y=0;const m=[],C=pe("/mms/api/andes/punish/seller/listPunishRecord",r);do{const R=await ge({mallId:t,url:C,data:{pageNo:A,pageSize:k,punishTabCode:x,status:3,startDateFrom:S,startDateTo:T},antiContentStr:this.antiContentStr});if(R.errorMsg)throw new Error(R.errorMsg);const $=R.result,D=$.list;if(D)for(const o of D)m.push(o);y=$.total,A++,await ve(2e3)}while(m.length<y);for(const E of m)w.push(E)}const g=await de({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:t,region:r,file:"",platform:this.mallType,requestId:this.requestId,fundType:f,fundStatus:3,data:w,filename:c,gmtBillStart:i,gmtBillEnd:`${u} 23:59:59`}});if(g.result!=="success")throw new Error(g.reason);await this.saveMallLastRsyncTime(t,"qualityAccidentViolationDeduction"),await this.crawlLogObj.saveTaskRet(c,$e())}catch(w){await this.crawlLogObj.saveTaskRet(c,Re(Ce(w)))}}async startCrawlBill(t,r,i){const u="账务明细";if(!this.crawlLogObj.isTaskSuccess(u))try{await this.crawlLogObj.startTask(u);const c=Date.now();let f=!1;const h={};for(;!f;){if(Date.now()-c>3e5)throw new wt("导出等待超时",300);f=!0;const w=await this.getChoiceTransactionRevenueExportHistoryTaskList(t);for(const g of this.groupBy30Days(r,i)){const b=`${g.start.getTime()}-${g.end.getTime()}`;if(this.crawlLogObj.isTaskSuccess(u,b))continue;const S=w.find(T=>`${T.searchExportTimeBegin}`==`${g.start.getTime()}`&&`${T.searchExportTimeEnd}`==`${g.end.getTime()}`&&+T.status==2);if(S)for(const T of["seller","global","us","eu"]){let A={};if(T==="seller"){const R={taskType:19,id:S.id},$=pe("/api/merchant/file/export/download",T);A=await ge({mallId:t,url:$,data:R,antiContentStr:this.antiContentStr})}else A=await this.getAgentBillFile(t,T,S);if(A.errorCode!==1e6)throw new Error(A.errorMsg);const k=A.result.fileUrl;if(!k)throw new Error("获取下载地址为空");let x=`${u}-${b}-${T}-${S.id}`,y=await this.getFileBase64(k);const m={feeTypeList:[ng,ag,ou],gmtOrderDateStart:this.timestampTranDate(S.searchExportTimeBegin),gmtOrderDateEnd:this.timestampTranDate(S.searchExportTimeEnd),orderDateType:mi,shopId:this.bindShopId,file:y,filename:x,requestId:this.requestId};await de({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:t,region:T,filename:x,platform:this.mallType,file:y,requestId:this.requestId,fundType:"结算明细",fundStatus:3,gmtBillStart:this.timestampTranDate(g.start.getTime()),gmtBillEnd:this.timestampTranDate(g.end.getTime())}});const C=await de({url:this.earthUrlsMap.createPddkjImportTask,method:"POST",data:m});await this.crawlLogObj.saveTaskSubTaskRet(u,b,C)}else if(f=!1,!h[b]){const T={fundDetailExport:!0,taskType:19,beginTime:g.start.getTime(),endTime:g.end.getTime()},A=pe("/api/merchant/file/export"),k=await ge({mallId:t,url:A,data:T,antiContentStr:this.antiContentStr});if(k.errorMsg)throw new Error(k.errorMsg);h[b]=!0}}await ve(5e3)}await this.saveMallLastRsyncTime(t,"bill"),await this.crawlLogObj.saveTaskRet(u,$e())}catch(c){await this.crawlLogObj.saveTaskRet(u,Re(Ce(c)))}}async startCrawlFulfillmentBill(t,r,i,u){let c="履约服务账单/已缴费数据";if(r===1&&(c="履约服务账单/待缴费数据"),!this.crawlLogObj.isTaskSuccess(c))try{await this.crawlLogObj.startTask(c);const f=Date.now();let h=!1;const w={},g=13,b="seller";for(;!h;){if(Date.now()-f>3e5)throw new wt("导出等待超时",300);h=!0;const T=(await this.queryExportHistory(t,b,g)).find(A=>+A.status==2&&A.createTime>f);if(T){const A=pe("/api/merchant/file/export/download",b),k=await ge({mallId:t,url:A,data:{id:T.id,taskType:g},antiContentStr:this.antiContentStr});if(k.errorCode!==1e6)throw new Error(k.errorMsg);const x=k.result.fileUrl;if(!x)throw new Error("获取下载地址为空");const y=await this.getFileBase64(x),m=`${T.fundTypeDesc}-${T.id}`;if(r===2){const C={feeTypeList:[ig,sg,og],shopId:this.bindShopId,file:y,filename:m,requestId:this.requestId},E=await de({url:this.earthUrlsMap.createPddkjImportTask,method:"POST",data:C});await this.crawlLogObj.saveTaskSubTaskRet(c,"",E)}await de({url:this.earthUrlsMap.savePddkjCrawlDataParseTask,method:"POST",data:{mallId:t,region:b,file:"",platform:this.mallType,requestId:this.requestId,fundType:"履约服务账单明细",fundStatus:r===2?3:1,gmtBillStart:i,gmtBillEnd:u}})}else if(h=!1,!w[c]){const A={taskType:g,billStatus:r,mallId:t,pageNum:1,pageSize:20},k=pe("/api/merchant/file/express/export"),x=await ge({mallId:t,url:k,data:A,antiContentStr:this.antiContentStr});if(x.errorMsg&&x.errorMsg!=="当前筛选条件的导出任务已创建, 请勿重复创建")throw new Error(x.errorMsg);w[c]=!0}await ve(5e3)}await this.saveMallLastRsyncTime(t,"fulfillmentBill"),await this.crawlLogObj.saveTaskRet(c,$e())}catch(f){await this.crawlLogObj.saveTaskRet(c,Re(Ce(f)))}}async getSettlementExportHistoryTaskList(t,r){var c;const i=pe("/api/merchant/file/export/history/page",r);return((c=(await ge({mallId:t,url:i,data:{pageNum:1,pageSize:10,taskType:12},antiContentStr:this.antiContentStr})).result)==null?void 0:c.merchantMerchantFileExportHistoryList)||[]}async rsyncCustomOrderSkuInfo(t,r,i){var b;if(!i||i.length===0)return;const u=Ge,c=pe("/bg-luna-agent-seller/product/customizeSku/pageQuery",r),f=20;let h=1,w=0,g=0;do{const S=await ge({mallId:t,url:c,data:{page:h,pageSize:f,subPurchaseOrderSns:i},antiContentStr:this.antiContentStr}),T=[];if(S.errorCode===1e6){w||(w=((b=S.result)==null?void 0:b.total)||0,g=Math.max(1,Math.ceil(w/f)));const A=S.result,k=(A==null?void 0:A.pageItems)||[];for(const x of k){const y=await this.buildCustomizeUploadData(t,x);T.push(y)}if(T.length>0){await this.replaceCustomizePicUrlWithFetchInfo(T),await this.replaceCustomizePicFetchInfoWithUploadUrlEntity(T);const x=await de({url:this.earthUrlsMap.uploadCustomizeGoodsList,method:"POST",data:{data:JSON.stringify(T),requestId:this.requestId,filename:`备货单定制品内容-${h}`,shopId:this.bindShopId}});if(x.result!=="success")throw new Error(x.reason)}}else throw new Error(S.errorMsg);if(console.debug(`采集定制品内容，${h}/${g}页完成`),await ve(3e3),u.isDebug&&h===2){console.warn("debug模式只取两页");break}h++}while((h-1)*f<w)}async replaceCustomizePicFetchInfoWithUploadUrlEntity(t){const r=Ss(t,2),i=async(u,c)=>{const f=[];for(const h of u)for(const w in h[c]){const g=h[c][w],b=new Promise((S,T)=>{(async()=>{try{const A=await de({url:this.earthUrlsMap.uploadCustomizePic,method:"POST",data:{ext:g.ext,sku:h.customProductSkuId,mallId:h.mallId,file:g.base64}});if(A.result!=="success")throw new Error(A.reason);h[c][w]=A.entity}catch(A){T(Ce(A))}S(!0)})()});f.push(b)}await Promise.all(f)};for(const u of r)await i(u,"originalImgUrls"),await i(u,"previewImgUrls"),await i(u,"regionImgUrls")}async buildCustomizeUploadData(t,r){var S,T,A,k,x,y;const i=r.subPurchaseOrderSnList,u=r.personalProductSkuId,c=(S=r.productSkuCustomization)==null?void 0:S.customizationTmplSurfaces,f=((T=r.productSkuCustomization)==null?void 0:T.customizedPreviewItems)||[],h=[],w=[],g=[];let b=null;for(const m of f){if(`${m.previewType}`=="3"){h.push(m.imageUrlDisplay),b=m.customizedText;continue}if(`${m.previewType}`=="1"){w.push(m.imageUrlDisplay);for(const C of c)for(const E of(C==null?void 0:C.regions)||[]){const R=`${m.imageUrlDisplay}&imageMogr2/cut/${(A=E.dimension)==null?void 0:A.width}x${(k=E.dimension)==null?void 0:k.height}x${(x=E.position)==null?void 0:x.x}x${(y=E.position)==null?void 0:y.y}`;g.push(R)}continue}}return{mallId:t,subPurchaseOrderSns:i,customProductSkuId:u,originalImgUrls:h,previewImgUrls:w,regionImgUrls:g,customText:b}}async replaceCustomizePicUrlWithFetchInfo(t){const r={},i=[];for(const f of t)i.push(...f.originalImgUrls,...f.previewImgUrls,...f.regionImgUrls);const u=Ss(i,10);for(const f of u){const h=[];for(const w of f){const g=new Promise((b,S)=>{(async()=>{try{const T=w.substring(w.lastIndexOf(".")+1).toLowerCase().split("?")[0],A=await this.fetchSkuCustomizePic(w);A&&(r[w]={base64:A,ext:T}),b(!0)}catch(T){S(Ce(T))}})()});h.push(g)}await Promise.all(h)}const c=(f,h)=>{const w=[];for(const g of f[h])r[g]&&w.push(r[g]);f[h]=w};for(const f of t)c(f,"originalImgUrls"),c(f,"previewImgUrls"),c(f,"regionImgUrls")}async fetchSkuCustomizePic(t){let r=null;try{r=await fetch(t)}catch{const c="采集图片失败，尝试切换合适的网络环境后再进行操作";throw new Error(c)}if(!r||!r.ok)return!1;const i=await r.blob();return await new Promise(c=>{const f=new FileReader;f.onload=function(h){var g;let w=(g=h==null?void 0:h.target)==null?void 0:g.result;if(w&&w.indexOf("base64,")>0)w=w.split("base64,")[1];else{let S=(JSON.parse(w)||{}).message;if(S)throw S.includes("Too many request")&&(S="请求获取定制品图片接口过于频繁，请稍后再试"),new Error(S)}c(w)},f.readAsDataURL(i)})}getPastDate(t){return Xe().subtract(t,"day").format("YYYY-MM-DD")}async getProductSkuIdAndDtSaleListMap(t,r,i,u){const c=pe("/oms/bg/venom/api/supplier/sales/management/querySkuSalesNumber"),f=await ge({mallId:t,url:c,data:{endDate:u,startDate:i,productSkuIds:r},antiContentStr:this.antiContentStr});if(f.errorCode!==1e6)throw new Error(f.errorMsg);const h={};for(const w of f.result||[])h[w.prodSkuId]||(h[w.prodSkuId]=[]),h[w.prodSkuId].push({date:w.date,sale:w.salesNumber});return h}async getChoiceTransactionRevenueExportHistoryTaskList(t){var u;const r=pe("/api/merchant/file/export/history/page"),i=await ge({mallId:t,url:r,data:{pageNum:1,pageSize:10,taskType:19},antiContentStr:this.antiContentStr});if(i.errorMsg)throw new Error(i.errorMsg);return((u=i.result)==null?void 0:u.merchantMerchantFileExportHistoryList)||[]}async getAgentBillFile(t,r,i){await this.loginMallAgent(t,r);const u=31;let c={taskType:u,params:i.agentSellerExportParams,sign:i.agentSellerExportSign},f=pe("/api/merchant/file/export",r),h=await ge({mallId:t,url:f,data:c,antiContentStr:this.antiContentStr});if(h.errorMsg&&h.errorMsg!=="导出任务已存在, 请勿重复创建, 请前往【导出历史】查看")throw new Error(h.errorMsg);const w=h.result,g=Date.now();h={};do{if(c={id:w,taskType:u},f=pe("/api/merchant/file/export/download",r),h=await ge({mallId:t,url:f,data:c,antiContentStr:this.antiContentStr}),h.errorCode===1e6)break;if(h.errorMsg!=="导出任务未完成")throw new Error(h.errorMsg);if(await ve(5e3),Date.now()-g>3e5)throw new wt("导出等待超时",300)}while(!0);return h}async saveMallLastRsyncTime(t,r){return await de({url:this.earthChoiceUrlMap.saveMallLastRsyncTime,method:"POST",data:{mallId:t,rsyncType:r}})}async loginMallAgent(t,r){var w;let i=pe("/bg/quiet/api/auth/obtainCode");const u=await ge({mallId:t,url:i,data:{redirectUrl:pe("/main/authentication",r)},antiContentStr:this.antiContentStr});if(u.errorCode!==1e6)throw new Error(`自动登录卖家中心失败1:${u.errorMsg}`);i=pe("/api/seller/auth/loginByCode",r);const c={code:(w=u.result)==null?void 0:w.code,confirm:!0,targetMallId:t},f=2;let h=0;for(;h<f;)try{const g=await ge({mallId:t,url:i,data:c,antiContentStr:this.antiContentStr});if(g.errorCode!==1e6)throw new Error(`自动登录卖家中心失败:${g.errorMsg}`===void 0?JSON.stringify(g):g.errorMsg);return}catch(g){if(h++,h<f)await ve(3e3);else throw new Error(`自动登录卖家中心失败e:${Ce(g)}`)}}async startRsyncRiskTag(t){await this.loginMallAgent(t,"global");const r={};await this.startRsyncCompliantLivePhotos(r,t),await this.startRsyncComplianceProperty(r,t),await this.uploadSpuRiskTags(r),await this.saveMallLastRsyncTime(t,"riskTag")}async startRsyncCompliantLivePhotos(t,r){var c,f;const i="合规中心/商品实拍图";if(this.crawlLogObj.isTaskSuccess(i))return;const u=Ge;try{await this.crawlLogObj.startTask(i);const h=pe("/api/flash/real_picture/list","global"),w=20;let g=1,b=0,S=0;do{const T=await ge({mallId:r,url:h,data:{page:g,page_size:w},antiContentStr:this.antiContentStr});if(T.errorCode!==1e6)throw new Error(T.errorMsg);b||(b=Math.min(200,((c=T.result)==null?void 0:c.total)||0),S=Math.max(1,Math.ceil(b/w)));const A=((f=T.result)==null?void 0:f.items)||[];for(const k of A)this.addSpuRiskTag(t,k.spu_id,40001);if(await this.crawlLogObj.updateTaskProgress(i,`第${g}/${S}页`),await ve(3e3),u.isDebug&&g===2){this.crawlLogObj.debugLog(i,"debug模式只取两页");break}g++}while((g-1)*w<b);await this.crawlLogObj.saveTaskRet(i,$e())}catch(h){await this.crawlLogObj.saveTaskRet(i,Re(Ce(h)))}}async startRsyncComplianceProperty(t,r){var c,f;const i="合规中心/商品合规信息";if(this.crawlLogObj.isTaskSuccess(i))return;const u=Ge;try{this.crawlLogObj.startTask(i);const h=pe("/ms/bg-flux-ms/compliance_property/page_query","global"),w=20;let g=1,b=0,S=0;do{const T=await ge({mallId:r,url:h,data:{page_num:g,page_size:w,type:2},antiContentStr:this.antiContentStr});if(T.errorCode!==1e6)throw new Error(T.errorMsg);b||(b=Math.min(200,((c=T.result)==null?void 0:c.total)||0),S=Math.max(1,Math.ceil(b/w)));const A=((f=T.result)==null?void 0:f.data)||[];for(const k of A)this.addSpuRiskTag(t,k.spu_id,40001);if(this.crawlLogObj.updateTaskProgress(i,`第${g}/${S}页`),await ve(3e3),u.isDebug&&g===2){this.crawlLogObj.debugLog(i,"debug模式只取两页");break}g++}while((g-1)*w<b);await this.crawlLogObj.saveTaskRet(i,$e())}catch(h){await this.crawlLogObj.saveTaskRet(i,Re(Ce(h)))}}async uploadSpuRiskTags(t){const i=(await de({url:this.earthUrlsMap.getTimestamp,method:"GET"})).timestamp,u=lu(t,50);for(const c of u)await de({url:this.earthUrlsMap.batchAddGoodsRiskTags,method:"POST",data:{productIdAndTagValuesMap:c,batchAddTimestamp:i,filename:"风险标签",requestId:this.requestId,shopId:this.bindShopId}});await de({url:this.earthUrlsMap.clearInvalidGoodsRiskTags,method:"POST",data:{batchAddTimestamp:i}})}addSpuRiskTag(t,r,i){if(r&&i){if(!t[r])t[r]=[];else if(t[r].includes(i))return;t[r].push(i)}}groupBy30Days(t,r){const i=[];r=new Date(r);let u=new Date(t);for(u.setHours(0,0,0);u<=r;){let c=new Date(u);if(c.setDate(c.getDate()+30),c>r&&(c=r),c.setHours(23,59,59),u.getTime()===c.getTime())break;const f={start:new Date(u),end:c};i.push(f),u=new Date(u),u.setDate(u.getDate()+31)}return i}async getChoiceExportHistory(t,r,i){var f;const u=pe("/api/merchant/file/export/history/page",r),c=await ge({mallId:t,url:u,data:{pageNum:1,pageSize:20,taskType:i},antiContentStr:this.antiContentStr});if(c.errorMsg)throw new Error(c.errorMsg);return((f=c.result)==null?void 0:f.merchantMerchantFileExportHistoryList)||[]}timestampTranDate(t,r="YYYY-MM-DD HH:mm:ss"){let i="";switch(typeof t){case"string":Fr(t)||(i=Xe(+t).format(r||"YYYY-MM-DD"),(i.includes("1970")||+t<5e3)&&(i=Xe(t).format(r||"YYYY")),t=i);break;case"number":t=Xe(t).format(r||"YYYY-MM-DD");break;case"object":if(yt(t))for(let u=0;u<t.length;u++)Fr(t[u])||(i=Xe(+t[u]).format(r||"YYYY-MM-DD"),(i.includes("1970")||+t[u]<5e3)&&(i=Xe(t[u]).format(r||"YYYY")),t[u]=i);break}return t}async getFileBase64(t){if(!t)return"";const i=await(await fetch(t)).blob();return await this.transBlobToBase64(i)}transBlobToBase64(t){return new Promise(r=>{const i=new FileReader;i.onload=function(u){var f;let c=(f=u==null?void 0:u.target)==null?void 0:f.result;c&&c.indexOf("base64,")>0&&(c=c.split("base64,")[1]),r(c)},i.readAsDataURL(t)})}async queryExportHistory(t,r,i,u=0){var g;const c=pe("/api/merchant/file/export/history/page",r),f=await ge({mallId:t,url:c,data:{pageNum:1,pageSize:20,taskType:i},antiContentStr:this.antiContentStr});if(f.errorMsg)throw new Error(f.errorMsg);const h=((g=f.result)==null?void 0:g.merchantMerchantFileExportHistoryList)||[],w=[];for(const b of h){const{status:S}=b;if(+S==1){if(await ve(5e3),u++,u>60)throw new wt("导出任务超时",300);return await this.queryExportHistory(t,r,i,u)}+S==2&&w.push(b)}return w}async startCrawlLocalOrderList(t,r,i){var f,h;const u="订单/管理订单";if(this.crawlLogObj.isTaskSuccess(u))return;const c=Ge;try{i=new Date(i),i.setHours(23,59,59),r=new Date(r),r.setHours(0,0,0),this.crawlLogObj.startTask(u);const w=[];for(const A of[1,2,3,4]){let k=1;const x=10;let y=0,m=0;do{const C=await Gt({mallId:t,url:`${this.host}/mms/kirogi/local/recentOrderList`,data:{packageAbnormalTypeList:[],pageNumber:k,pageSize:x,parentOrderTimeEnd:i.getTime()/1e3,parentOrderTimeStart:r.getTime()/1e3,queryType:A,sortType:1}});if(C.success!==!0)throw new Error(C.errorMsg);y||(y=Math.min(200,(f=C.result)==null?void 0:f.totalItemNum),m=Math.max(1,Math.ceil(y/x)));const E=((h=C.result)==null?void 0:h.pageItems)||[];for(const $ of E){const o=$.parentOrderMap.poCurrencyExchangeInfo.storeSettlementCurrency;for(const U of $.orderList)w.push({orderSn:U.orderSn,orderSkuId:U.skuId,orderProductId:U.goodsId,localOrderStatus:U.localOrderStatus,goodsRetailPrice:cu(U.goodsRetailPrice),goodsBasePrice:cu(U.goodsBasePrice),quantity:U.quantity,shippedQuantity:U.shippedQuantity,currency:o})}let R;switch(A){case 4:R="已发货";break;case 3:R="已取消";break;case 2:R="未发货";break;case 1:R="平台处理中";break}if(this.crawlLogObj.updateTaskProgress(u,`${R} 第${k}/${m}页`),await ve(3e3),c.isDebug&&k===2){this.crawlLogObj.debugLog(u,"debug模式只取两页");break}k++}while((k-1)*x<y)}const b=(await de({url:this.earthUrlsMap.getTimestamp,method:"GET"})).timestamp,S=lu(w,50);let T=0;for(const A of S)await de({url:this.earthLocalUrlMap.uploadLocalOrderSkuList,method:"POST",data:{shopId:this.bindShopId,orderSkuList:A,batchAddTimestamp:b,requestId:this.requestId,filename:`${u}-${T}`}}),T++;await this.saveMallLastRsyncTime(t,"localOrder"),await this.crawlLogObj.saveTaskRet(u,$e())}catch(w){await this.crawlLogObj.saveTaskRet(u,Re(Ce(w)))}}async startCrawlLocalOrderReport(t,r,i){var c;const u="订单/订单报告";if(!this.crawlLogObj.isTaskSuccess(u))try{const f=Date.now();this.crawlLogObj.startTask(u);let h=!1;for(i=new Date(i),i.setHours(23,59,59),r=new Date(r),r.setHours(0,0,0);!h;){if(Date.now()-f>3e5)throw new wt("导出等待超时",300);h=!0;const g=(await this.getLocalOrderExportTaskList(t)).find(b=>new Date(b.jobApplyTimeStr).getTime()>f&&`${b.jobStatus}`=="1");if(g){const b=await Gt({mallId:t,url:`${this.host}/mms/kirogi/local/export/task/download`,data:{jobId:g.jobId}});if(b.success!==!0)throw new Error(b.errorMsg);const S=(c=b.result)==null?void 0:c.downloadUrl;if(!S)throw new Error("获取下载地址为空");const T={gmtOrderDateStart:this.timestampTranDate(r),gmtOrderDateEnd:this.timestampTranDate(i),shopId:this.bindShopId,file:await this.getFileBase64(S)};await de({url:this.earthLocalUrlMap.uploadLocalOrderReport,method:"POST",data:T})}else{h=!1;const b={parentOrderStatusList:[1,2,4,41,5,51,3],parentOrderTimeEnd:i.getTime()/1e3,parentOrderTimeStart:r.getTime()/1e3},S=`${this.host}/mms/kirogi/local/export/addOrdersExportTask`,T=await Gt({mallId:t,url:S,data:b});if(T.success!==!0)throw new Error(T.errorMsg)}await ve(5e3)}await this.saveMallLastRsyncTime(t,"bill"),await this.crawlLogObj.saveTaskRet(u,$e())}catch(f){await this.crawlLogObj.saveTaskRet(u,Re(Ce(f)))}}getThreeDaysAgoLastSecond(){const t=new Date,r=new Date(t);return r.setDate(r.getDate()-3),r.setHours(23,59,59),r}async startCrawlLocalBillReport(t,r,i){var c;const u="财务/报告库";if(!this.crawlLogObj.isTaskSuccess(u))try{const f=Date.now();this.crawlLogObj.startTask(u);let h=!1;const w={};i=new Date(i),i.setHours(23,59,59);const g=this.getThreeDaysAgoLastSecond();for(i.getTime()>g.getTime()&&(i=g),r=new Date(r),r.setHours(0,0,0);!h;){if(Date.now()-f>3e5)throw new wt("导出等待超时",300);h=!0;const S=(await this.getLocalBillExportTaskList(t)).find(T=>`${T.end_time_stamp}`==`${i.getTime()}`&&`${T.start_time_stamp}`==`${r.getTime()}`&&`${T.status}`=="1");if(S){const T=await Gt({mallId:t,url:`${this.host}/mms/statement/export/task/result`,data:{flowId:S.flow_id}});if(T.success!==!0)throw new Error(T.error_msg);const A=(c=T.result)==null?void 0:c.file_url;if(!A)throw new Error("获取下载地址为空");const k={feeTypeList:[ru,nu,ug,lg,au,fg,su,iu,cg,dg],shopId:this.bindShopId,file:await this.getFileBase64(A),filename:S.flow_id,gmtOrderDateStart:this.timestampTranDate(r.getTime()),gmtOrderDateEnd:this.timestampTranDate(i.getTime())};await de({url:this.earthLocalUrlMap.createPddkjLocalImportTask,data:k,method:"POST"})}else if(h=!1,!w[u]){const T={beginCreateTime:r.getTime(),endCreateTime:i.getTime()},A=`${this.host}/mms/statement/export/task/create`,k=await Gt({mallId:t,url:A,data:T});if(k.success!==!0)throw new Error(k.error_msg);w[u]=!0}await ve(5e3)}await this.saveMallLastRsyncTime(t,"bill"),await this.crawlLogObj.saveTaskRet(u,$e())}catch(f){await this.crawlLogObj.saveTaskRet(u,Re(Ce(f)))}}async getLocalBillExportTaskList(t){const r=`${this.host}/mms/statement/export/task/list`,i=await Gt({mallId:t,url:r,data:{page:1,size:10}});if(i.success!==!0)throw new Error(i.errorMsg);return i.result.export_task_list}async getLocalOrderExportTaskList(t){const r=`${this.host}/mms/kirogi/local/export/listOrdersExportTask`,i=await Gt({mallId:t,url:r,data:{pageNumber:1,pageSize:10}});if(i.success!==!0)throw new Error(i.errorMsg);return i.result.pageItems}async startCrawlAccountOverview(t){const r="账户资金/资金中心-货款账户";if(!this.crawlLogObj.isTaskSuccess(r))try{await this.crawlLogObj.startTask(r);const i=pe("/api/merchant/payment/account/amount/info");let u=await ge({mallId:t,url:i,data:{},antiContentStr:this.antiContentStr});if(u.errorCode!==1e6)throw new Error(u.errorMsg);const{currency:c,totalAmount:f,availableBalance:h,mallDepositLimitAmount:w}=u.result||{},g={mallId:t,shopId:this.bindShopId,requestId:this.requestId,region:"seller",totalAmount:f,availableAmount:h,accountReservedAmount:w,currency:c};if(u=await de({url:this.earthUrlsMap.saveAccountOverview,method:"POST",data:g}),u.result!=="success")throw new Error(u.reason);await this.saveMallLastRsyncTime(t,"accountOverview"),await this.crawlLogObj.saveTaskRet(r,$e())}catch(i){await this.crawlLogObj.saveTaskRet(r,Re(Ce(i)))}}removeCurrencyUnit(t){return t.replace(/[^\d.-]/g,"")}async startCrawlFundFrozen(t){var i;const r="账户资金/资金限制";if(!this.crawlLogObj.isTaskSuccess(r))try{await this.crawlLogObj.startTask(r);for(const u of["global","us","eu"]){await this.loginMallAgent(t,u);const c=pe("/api/merchant/fund-frozen/rules",u);let f=await ge({mallId:t,url:c,data:{},antiContentStr:this.antiContentStr});if(f.errorCode!==1e6)throw new Error(f.errorMsg);const h=((i=f.result)==null?void 0:i.rules)||[],w=[];for(const g of h){const{frozenType:b}=g,S=10;let T=1,A=0;do{const k=await ge({mallId:t,url:pe("/api/merchant/fund-frozen/details",u),data:{frozenType:b,pageNum:T,pageSize:S},antiContentStr:this.antiContentStr});if(k.errorCode!==1e6)throw new Error(k.errorMsg);if(!k.result)break;const{detailsRowCount:x,detailsColumns:y,detailsRows:m}=k.result;A||(A=x||0),T===1&&Object.assign(g,{detailsRowCount:x,detailsColumns:y,detailsRows:[]});for(const C of m)C.amount=this.removeCurrencyUnit(C.amount),g.detailsRows.push(C);await ve(3e3),T++}while((T-1)*S<A);w.push({...g,amount:this.removeCurrencyUnit(g.amount)})}if(w.length>0&&(f=await de({url:this.earthUrlsMap.saveAccountLimitationOfFunds,method:"POST",data:{mallId:t,shopId:this.bindShopId,region:u,requestId:this.requestId,list:w}}),f.result!=="success"))throw new Error(f.reason)}await this.saveMallLastRsyncTime(t,"fundFrozen"),await this.crawlLogObj.saveTaskRet(r,$e())}catch(u){await this.crawlLogObj.saveTaskRet(r,Re(Ce(u)))}}async startCrawlWaitSettlementData(t,r){const i=`账户资金/资金中心-结算数据-${Kt(r)}`;if(!this.crawlLogObj.isTaskSuccess(i))try{await this.crawlLogObj.startTask(i);const u=pe("/api/merchant/settle/detail/getWaitSettlementData",r),c=await ge({mallId:t,url:u,data:{},antiContentStr:this.antiContentStr});if(c.success!==!0)throw new Error(c.errorMsg);const f=c.result||{},h={mallId:t,shopId:this.bindShopId,requestId:this.requestId,region:r,waitSettleAmount:f.waitSettleAmount,currency:f.waitSettleAmountFormat.currencyCode};await de({url:this.earthUrlsMap.saveAccountWaitSettleAmount,method:"POST",data:h}),await this.saveMallLastRsyncTime(t,"accountOverview"),await this.crawlLogObj.saveTaskRet(i,$e())}catch(u){await this.crawlLogObj.saveTaskRet(i,Re(Ce(u)))}}}class pu{constructor(t){ne(this,"earthUrlsMap",{getCrawlTaskUrl:`${xe}/platform/pddkj/stat/crawl/get_crawl_task`,initCrawlRequest:`${xe}/platform/pddkj/stat/crawl/init_crawl_request`});ne(this,"runStatus","wait");ne(this,"crawlQueueList",[]);ne(this,"isRunning",!1);ne(this,"nextAutoCrawlTime",0);ne(this,"antiContentStr");this.antiContentStr=t}getAllWindows(){return new Promise(t=>{fe.windows.getAll({},r=>{t(r)})})}async run(t){console.debug("CrawlQueue run");try{if(this.runStatus="process",!Ge.crawlTabId){let r=await qe.getItem(fu);r=r?Number.parseInt(r):null,r=Fr(r)?null:r,Ge.crawlTabId=r}for(;;){const i=(await this.getAllWindows()).length;if(console.debug("打开窗口数量",i),i>0){await this.autoCrawl();let u=await this.getTaskTs();const c=await qe.getItem("local:newTs");if(c&&(u=c,qe.removeItem("local:newTs")),u&&u>t){this.runStatus="waitStop";break}}await ve(9e5)}return new Promise(r=>{const i=setInterval(()=>{console.debug("wait stop"),this.isRunning===!1&&(clearInterval(i),console.debug("task stop"),r(!0))},3e3)})}catch(r){throw this.runStatus="waitStop",r}}async autoCrawl(){if(Date.now()<this.nextAutoCrawlTime)return;Ge.isDebug?this.nextAutoCrawlTime=Date.now()+6e4:this.nextAutoCrawlTime=Date.now()+36e5;try{const r=await de({url:this.earthUrlsMap.getCrawlTaskUrl,method:"GET"}),i=(r==null?void 0:r.taskList)||[];if(i.length){const u=await this.getTemuMallMap();for(const c of i){const f=u[c.mallId];f&&(c.mallName=f.mallName,this.addCrawlQueueByTask(c))}}console.debug(Ue(),"crawlQueueList",this.crawlQueueList)}catch(r){console.debug(Ue(),"autoCrawl fail",r)}}async getTaskTs(){const t=await de({url:"/open/plugin/getBgTaskCodeTs",method:"GET"});return t==null?void 0:t.ts}addCrawlQueueByTask(t){console.debug("addCrawlQueueByTask",t);const{mallId:r,mallName:i,mallType:u,bindShopId:c,authAppNameList:f,host:h}=t;this.addCrawlQueue({mallId:r,mallName:i,mallType:u,bindShopId:c,authAppNameList:f,action:"auto",host:h})}async addCrawlQueue(t){const{mallId:r,mallName:i,mallType:u,bindShopId:c,authAppNameList:f,startDate:h,endDate:w,action:g,gmtExec:b,host:S}=t||{},T=this.crawlQueueList.find(k=>`${k.mallId}`==`${r}`);(!T||T.locked===0)&&(this.crawlQueueList=this.crawlQueueList.filter(k=>`${k.mallId}`!=`${r}`),this.crawlQueueList.push({mallId:r,mallName:i,mallType:u,bindShopId:c,authAppNameList:f,startDate:h,endDate:w,action:g||"auto",retryTimes:0,locked:0,gmtExec:b||Ue(),gmtLock:null,requestId:T&&T.requestId,host:S}),this.crawlQueueList.sort((k,x)=>new Date(k.gmtExec).getTime()-new Date(x.gmtExec).getTime()));const A=new _n(r);await A.init(),A.sendToClientTab(),this.start()}async getTemuMallMap(){const t=pe("/bg/quiet/api/mms/userInfo"),r=await ge({url:t,antiContentStr:this.antiContentStr}),i={};if(r.result&&r.result.companyList&&r.result.companyList.length)for(const u of r.result.companyList)for(const c of u.malInfoList||[])i[c.mallId]=c;return i}async start(){if(console.debug("start"),!this.isRunning){for(console.debug(Ue(),"start process queue"),this.isRunning=!0;;){let t=null;try{if(t=await this.lockQueue(),console.debug(Ue(),"lock queue",t),t){const r=await this.processQueue(t);console.debug(Ue(),"processQueue",r),await this.clearQueue(t,r)}else if(this.crawlQueueList.length>0)console.debug(Ue(),"lock empty,sleep"),await ve(1e4);else{console.debug(Ue(),"stop timer");break}}catch(r){console.debug(Ue(),"processQueue exception",t,r)}if(this.runStatus==="waitStop")break}this.isRunning=!1}}async lockQueue(){this.crawlQueueList=this.crawlQueueList.filter(i=>i.retryTimes<5);const t=Ue(),r=this.crawlQueueList.find(i=>i.locked===0&&i.gmtExec<=t);if(r){if(!r.requestId){const i=await this.initRequestId(r);if(i.result==="success")r.requestId=i.requestId;else return r.retryTimes++,null}r.locked=1,r.gmtLock=t}return r}async processQueue(t){try{return await new du({...t,antiContentStr:this.antiContentStr}).startCrawl(),{result:"success",reason:""}}catch(r){return r instanceof wt?{result:"fail",canRetry:!0,sleepSeconds:(r==null?void 0:r.sleepSeconds)||1800,reason:r.message}:{result:"fail",canRetry:!1,sleepSeconds:0,reason:Ce(r)}}}async clearQueue(t,r){if(r.canRetry){const u=this.crawlQueueList.find(c=>`${c.mallId}`==`${t.mallId}`);u.retryTimes++,u.locked=0,u.gmtExec=Ue(r.sleepSeconds||1800)}else this.crawlQueueList=this.crawlQueueList.filter(u=>`${u.mallId}`!=`${t.mallId}`);const i=new _n(t.mallId,t.requestId);await i.init(),i.sendToClientTab()}initRequestId({mallId:t,mallName:r,action:i}){return de({url:this.earthUrlsMap.initCrawlRequest,method:"POST",data:{mallId:t,mallName:r,action:i}})}}class mg{constructor(t){ne(this,"antiContentStr");this.antiContentStr=t}async run(){console.debug("CrawlTask"),Ge.crawlQueue||(Ge.crawlQueue=new pu(this.antiContentStr),await qe.getItem("local:crawlDebug")&&(Ge.isDebug=!0));try{for(;;){const{ts:t,result:r}=await this.getTaskCode();if(console.debug("getTaskCode",t),r==="success"){if(await Ge.crawlQueue.run(t)!==!0)throw new Error("返回不是true");await ve(5e3)}else await ve(36e5)}}catch(t){qe.setItem("local:bgTaskFail",`异常:${Date.now()}:${t==null?void 0:t.message}`)}}async getTaskCode(){return de({url:"/open/plugin/getBgTaskCode",method:"GET"})}}const Hr=Object.freeze(Object.defineProperty({__proto__:null,CrawlLog:_n,CrawlQueue:pu,CrawlTask:mg,CrawlTemu:du,LOCAL_CRAWL_MALL_INFO_LIST:yi,LOCAL_CRAWL_TAB_ID:fu,LOCAL_TEMU_ANTI_CONTENT:pg,_globalCrawlData:Ge,ajaxPddkjAgent:ge,ajaxPddkjLocal:Gt},Symbol.toStringTag,{value:"Module"}));function yg(){const{LOCAL_CRAWL_MALL_INFO_LIST:n,_globalCrawlData:t,LOCAL_TEMU_ANTI_CONTENT:r}=Hr,{LOCAL_CRAWL_MALL_INFO_LIST:i,_globalCrawlData:u}=Br;fe.runtime.onInstalled.addListener(async f=>{f.reason==="update"&&(qe.removeItem(n),qe.removeItem(i))}),fe.tabs.onRemoved.addListener(async f=>{(t==null?void 0:t.crawlTabId)===f&&(qe.removeItem(n),qe.removeItem(r)),(u==null?void 0:u.crawlTabId)===f&&qe.removeItem(i)});function c(f){(async function(){const{requestHeaders:h}=f;if(!await qe.getItem(r)){const g=h.find(b=>b.name==="Anti-Content");g&&qe.setItem(r,g.value)}})()}fe.webRequest.onBeforeSendHeaders.addListener(c,{urls:["*://seller.kuajingmaihuo.com:*/*"],types:["main_frame","sub_frame","xmlhttprequest"]},["requestHeaders"])}const{sendMessage:Om,onMessage:wi}=Wt();function wg(){const n={};let t=[];mr({url:"/open/plugin/getInjectRecordWebRequestHistoryRules",method:"GET"}).then(u=>{t=u});function r(u){let c;try{if(!t||!t.length)return c;for(const f of t)if(new RegExp(f.rule,"i").test(u)){c=f;break}}catch{c=void 0}return c}function i(u){const c=r(u.url)||{};if(!c)return;let f=u.url;c.formatUrl?f=c.formatUrl:c.hasParams||(f=u.url.replace(/\?.*/,""));const h=n[u.tabId]||{};h[f]=Ir(u,["tabId","url"]),n[u.tabId]=h}return fe.webRequest.onBeforeRequest.addListener(i,{urls:["<all_urls>"],types:["main_frame","sub_frame"]},["requestBody"]),fe.tabs.onRemoved.addListener(u=>{n[u]&&delete n[u]}),wi("getUrlRequestHistory",u=>{var g;const c=(g=u.sender.tab)==null?void 0:g.id;if(!c||!n[c])return null;const f=n[c],h=u.data;return f[h]})}function vg(n){return`local:purchaseOrderInfo-${n}`}function xg(){fe.tabs.onRemoved.addListener(n=>{qe.removeItem(vg(n))})}function bg(){return wi("execute1688SearchSamePutImageScript",n=>{const t=n.sender.tab.id,r=n.data;return fe.scripting.executeScript({target:{tabId:t},world:"MAIN",args:[r],func:i=>{try{const u={api:"mtop.1688.imageService.putImage",data:JSON.stringify({imageBase64:i,appName:"searchImageUpload",appKey:"pvvljh1grxcmaay2vgpe9nb68gg9ueg2"}),ecode:"0",v:"1.0",type:"POST"};return window.lib.mtop.request(u)}catch(u){return u}}})})}function Tg(){return wi("execute1688GetWindowContextScript",n=>{const t=n.sender.tab.id;return fe.scripting.executeScript({target:{tabId:t},world:"MAIN",func:()=>{try{return window.context||null}catch(r){return r}}})})}const Sg="earth";for(var vr=256,hu=[],gu=256,Rn;vr--;)hu[vr]=(vr+256).toString(16).substring(1);function Ag(n){var t=0,r=11;if(!Rn||vr+r>gu*2)for(Rn="",vr=0;t<gu;t++)Rn+=hu[Math.random()*256|0];return Rn.substring(vr,vr+++r)}var mu="@webext-core/messaging/window",yu="@webext-core/messaging/window/response";function nt(n){const t=n.namespace,r=Ag();let i=[];const u=(f,h)=>new Promise(w=>{const g=S=>{S.data.type===yu&&S.data.namespace===t&&S.data.instanceId!==r&&S.data.message.type===f.type&&(w(S.data.response),b())},b=()=>window.removeEventListener("message",g);i.push(b),window.addEventListener("message",g),window.postMessage({type:mu,message:f,senderOrigin:location.origin,namespace:t,instanceId:r},h??"*")}),c=Qi(ln(un({},n),{sendMessage(f,h){return u(f,h)},addRootListener(f){const h=w=>Yi(this,null,function*(){if(w.data.type!==mu||w.data.namespace!==t||w.data.instanceId===r)return;const g=yield f(w.data.message);window.postMessage({type:yu,response:g,instanceId:r,message:w.data.message,namespace:t},w.data.senderOrigin)});return window.addEventListener("message",h),()=>window.removeEventListener("message",h)},verifyMessageData(f){return structuredClone(f)}}));return ln(un({},c),{removeAllListeners(){c.removeAllListeners(),i.forEach(f=>f()),i=[]}})}nt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"});const Cg="52dsy",wu="doudiandaifa",kg=n=>{const t=/(?:52dsy|52hqb)\.com/.test(n),r=t?"//(.*).(52dsy|52hqb).com/(\\d+)(?:\\.html)?":"//(.*)/(\\d+)(?:\\.html)?",i=new RegExp(r),u=n.match(i),c=t?Cg:wu,f=n.includes("52hqb.com")?"hqb":(u==null?void 0:u[1])||"";return{itemUrl:n,itemId:t?u==null?void 0:u[3]:u==null?void 0:u[2],site:f,source:c,postFee:""}},vu=(n=location.href)=>{const t=location.host;return new RegExp(`${t}\\/\\d+(\\.html)?`).test(n)},Og=(n=location.href)=>{const t=location.host;return[new RegExp(`${t}\\/(goodsList\\.html|shop\\/|spotsGoodsList\\.html|downList\\.html|activity\\/\\d+)`)].some(i=>i.test(n))},Ig=n=>vu(n),xu=n=>de({url:"/open/plugin/getSourcePlatformConfig",method:"GET",params:n,cacheKey:"local:register52DsyContentScript"}),Lg=Object.freeze(Object.defineProperty({__proto__:null,getPluginConfig:xu,getRegister52DsyConfig:async n=>{const{sourcePlatformConfig:{supportDomainList:t}}=await xu({source:wu,...n});return{id:"52dsy-collect",matches:t.map(i=>`*://${i}/*`),js:["content-scripts/collect-platform-52dsy-content.js"],runAt:"document_end"}},getSourceInfoByItemUrl:kg,isProductLink:Ig,matchDetailPage:vu,matchListPage:Og},Symbol.toStringTag,{value:"Module"}));nt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),nt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),nt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),nt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),nt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),nt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),nt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),nt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),nt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),nt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),nt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),nt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),nt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),nt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),nt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"}),nt({namespace:"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"});async function Eg(n){const r=(await fe.scripting.getRegisteredContentScripts()).flatMap(i=>i.matches||[]);if(n.length>0){const i=n.map(u=>{const{id:c,js:f,css:h=[],matches:w,runAt:g="document_end",...b}=u,S=w.filter(T=>!r.includes(T));return{id:c,css:["assets/platform-base-utils.css",...h],js:["platform-base-utils.js",...f],matches:S,runAt:g,...b}});await fe.scripting.registerContentScripts(i)}}async function Dg(){const n=async()=>{const{getRegister52DsyConfig:t}=Lg,i=[await t({tag:Sg})];await Eg(i)};fe.runtime.onInstalled.addListener(()=>{n()}),fe.management.onEnabled.addListener(t=>{t.id===fe.runtime.id&&n()})}const _g=fr(()=>{Yh(),zh(),Jh(),bh(),Oh(),Wh(),Lh(),wg(),xg(),wl(),bg(),Tg(),qh(),yg(),Dg()});function Lm(){}function Mn(n,...t){}const Rg={debug:(...n)=>Mn(console.debug,...n),log:(...n)=>Mn(console.log,...n),warn:(...n)=>Mn(console.warn,...n),error:(...n)=>Mn(console.error,...n)};let vi;try{vi=_g.main(),vi instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(n){throw Rg.error("The background crashed on startup!"),n}return vi}();
background;
